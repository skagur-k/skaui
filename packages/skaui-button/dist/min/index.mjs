import H, { useRef, useContext, useEffect, forwardRef, useState, useMemo, useLayoutEffect, useCallback } from 'react';

var hr=Object.create;var Mt=Object.defineProperty;var yr=Object.getOwnPropertyDescriptor;var Pr=Object.getOwnPropertyNames;var Er=Object.getPrototypeOf,xr=Object.prototype.hasOwnProperty;var wr=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Tr=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Pr(t))!xr.call(e,o)&&o!==r&&Mt(e,o,{get:()=>t[o],enumerable:!(n=yr(t,o))||n.enumerable});return e};var He=(e,t,r)=>(r=e!=null?hr(Er(e)):{},Tr(t||!e||!e.__esModule?Mt(r,"default",{value:e,enumerable:!0}):r,e));var Ve=wr((ns,Be)=>{(function(){var e={}.hasOwnProperty;function t(){for(var r=[],n=0;n<arguments.length;n++){var o=arguments[n];if(!!o){var s=typeof o;if(s==="string"||s==="number")r.push(o);else if(Array.isArray(o)){if(o.length){var a=t.apply(null,o);a&&r.push(a);}}else if(s==="object")if(o.toString===Object.prototype.toString)for(var i in o)e.call(o,i)&&o[i]&&r.push(i);else r.push(o.toString());}}return r.join(" ")}typeof Be<"u"&&Be.exports?(t.default=t,Be.exports=t):typeof define=="function"&&typeof define.amd=="object"&&define.amd?define("classnames",[],function(){return t}):window.classNames=t;})();});function Ge(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0});}var Ue={};Ge(Ue,"SSRProvider",()=>Fr);Ge(Ue,"useSSRSafeId",()=>ze);Ge(Ue,"useIsSSR",()=>Mr);var he={prefix:String(Math.round(Math.random()*1e10)),current:0},me=H.createContext(he);function Fr(e){let t=useContext(me),r=useMemo(()=>({prefix:t===he?"":`${t.prefix}-${++t.current}`,current:0}),[t]);return H.createElement(me.Provider,{value:r},e.children)}var Cr=Boolean(typeof window<"u"&&window.document&&window.document.createElement);function ze(e){let t=useContext(me);return t===he&&!Cr&&console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server."),useMemo(()=>e||`react-aria${t.prefix}-${++t.current}`,[e])}function Mr(){let t=useContext(me)!==he,[r,n]=useState(t);return typeof window<"u"&&t&&useLayoutEffect(()=>{n(!1);},[]),r}function Kt(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=Kt(e[t]))&&(n&&(n+=" "),n+=r);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}function Dr(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=Kt(e))&&(n&&(n+=" "),n+=t);return n}var ye=Dr;function Pe(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0});}var Nr={};Pe(Nr,"useControlledState",()=>Or);function Or(e,t,r){let[n,o]=useState(e||t),s=useRef(e!==void 0),a=s.current,i=e!==void 0,c=useRef(n);a!==i&&console.warn(`WARN: A component changed from ${a?"controlled":"uncontrolled"} to ${i?"controlled":"uncontrolled"}.`),s.current=i;let f=useCallback((b,...y)=>{let g=(l,...m)=>{r&&(Object.is(c.current,l)||r(l,...m)),i||(c.current=l);};typeof b=="function"?(console.warn("We can not support a function callback. See Github Issues for details https://github.com/adobe/react-spectrum/issues/2320"),o((m,...v)=>{let x=b(i?c.current:m,...v);return g(x,...y),i?m:x})):(i||o(b),g(b,...y));},[i,r]);return i?c.current=e:e=n,[e,f]}var Ye={};Pe(Ye,"clamp",()=>Xe);Pe(Ye,"snapValueToStep",()=>je);Pe(Ye,"toFixedNumber",()=>kr);function Xe(e,t=-1/0,r=1/0){return Math.min(Math.max(e,t),r)}function je(e,t,r,n){let o=(e-(isNaN(t)?0:t))%n,s=Math.abs(o)*2>=n?e+Math.sign(o)*(n-Math.abs(o)):e-o;isNaN(t)?!isNaN(r)&&s>r&&(s=Math.floor(r/n)*n):s<t?s=t:!isNaN(r)&&s>r&&(s=t+Math.floor((r-t)/n)*n);let a=n.toString(),i=a.indexOf("."),c=i>=0?a.length-i:0;if(c>0){let f=Math.pow(10,c);s=Math.round(s*f)/f;}return s}function kr(e,t,r=10){let n=Math.pow(r,t);return Math.round(e*n)/n}function E(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0});}var Je={};E(Je,"useId",()=>Qe);E(Je,"mergeIds",()=>At);E(Je,"useSlotId",()=>Br);var Ar={};E(Ar,"useLayoutEffect",()=>I);var I=typeof window<"u"?H.useLayoutEffect:()=>{},we=new Map;function Qe(e){let[t,r]=useState(e),n=useRef(null),o=ze(t),s=useCallback(a=>{n.current=a;},[]);return we.set(o,s),I(()=>{let a=o;return ()=>{we.delete(a);}},[o]),useEffect(()=>{let a=n.current;a&&(n.current=null,r(a));}),o}function At(e,t){if(e===t)return e;let r=we.get(e);if(r)return r(t),t;let n=we.get(t);return n?(n(e),e):t}function Br(e=[]){let t=Qe(),[r,n]=Ut(t),o=useCallback(()=>{n(function*(){yield t,yield document.getElementById(t)?t:null;});},[t,n]);return I(o,[t,o,...e]),r}var Vr={};E(Vr,"chain",()=>Se);function Se(...e){return (...t)=>{for(let r of e)typeof r=="function"&&r(...t);}}var Hr={};E(Hr,"mergeProps",()=>M);function M(...e){let t={...e[0]};for(let r=1;r<e.length;r++){let n=e[r];for(let o in n){let s=t[o],a=n[o];typeof s=="function"&&typeof a=="function"&&o[0]==="o"&&o[1]==="n"&&o.charCodeAt(2)>=65&&o.charCodeAt(2)<=90?t[o]=Se(s,a):(o==="className"||o==="UNSAFE_className")&&typeof s=="string"&&typeof a=="string"?t[o]=ye(s,a):o==="id"&&s&&a?t.id=At(s,a):t[o]=a!==void 0?a:s;}}return t}var Wr={};E(Wr,"mergeRefs",()=>Ze);function Ze(...e){return t=>{for(let r of e)typeof r=="function"?r(t):r!=null&&(r.current=t);}}var Gr={};E(Gr,"filterDOMProps",()=>et);var Ur=new Set(["id"]),zr=new Set(["aria-label","aria-labelledby","aria-describedby","aria-details"]),Yr=/^(data-.*)$/;function et(e,t={}){let{labelable:r,propNames:n}=t,o={};for(let s in e)Object.prototype.hasOwnProperty.call(e,s)&&(Ur.has(s)||r&&zr.has(s)||(n==null?void 0:n.has(s))||Yr.test(s))&&(o[s]=e[s]);return o}var Xr={};E(Xr,"focusWithoutScrolling",()=>W);function W(e){if(jr())e.focus({preventScroll:!0});else {let t=_r(e);e.focus(),qr(t);}}var Ee=null;function jr(){if(Ee==null){Ee=!1;try{var e=document.createElement("div");e.focus({get preventScroll(){return Ee=!0,!0}});}catch{}}return Ee}function _r(e){for(var t=e.parentNode,r=[],n=document.scrollingElement||document.documentElement;t instanceof HTMLElement&&t!==n;)(t.offsetHeight<t.scrollHeight||t.offsetWidth<t.scrollWidth)&&r.push({element:t,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}),t=t.parentNode;return n instanceof HTMLElement&&r.push({element:n,scrollTop:n.scrollTop,scrollLeft:n.scrollLeft}),r}function qr(e){for(let{element:t,scrollTop:r,scrollLeft:n}of e)t.scrollTop=r,t.scrollLeft=n;}var Jr={};E(Jr,"getOffset",()=>Bt);function Bt(e,t,r="horizontal"){let n=e.getBoundingClientRect();return t?r==="horizontal"?n.right:n.bottom:r==="horizontal"?n.left:n.top}var Vt={};E(Vt,"clamp",()=>Xe);E(Vt,"snapValueToStep",()=>je);var Qr={};E(Qr,"runAfterTransition",()=>ce);var q=new Map,qe=new Set;function Ot(){if(typeof window>"u")return;let e=r=>{let n=q.get(r.target);n||(n=new Set,q.set(r.target,n),r.target.addEventListener("transitioncancel",t)),n.add(r.propertyName);},t=r=>{let n=q.get(r.target);if(!!n&&(n.delete(r.propertyName),n.size===0&&(r.target.removeEventListener("transitioncancel",t),q.delete(r.target)),q.size===0)){for(let o of qe)o();qe.clear();}};document.body.addEventListener("transitionrun",e),document.body.addEventListener("transitionend",t);}typeof document<"u"&&(document.readyState!=="loading"?Ot():document.addEventListener("DOMContentLoaded",Ot));function ce(e){requestAnimationFrame(()=>{q.size===0?e():qe.add(e);});}var Zr={};E(Zr,"useDrag1D",()=>en);var xe=[];function en(e){console.warn("useDrag1D is deprecated, please use `useMove` instead https://react-spectrum.adobe.com/react-aria/useMove.html");let{containerRef:t,reverse:r,orientation:n,onHover:o,onDrag:s,onPositionChange:a,onIncrement:i,onDecrement:c,onIncrementToMax:f,onDecrementToMin:b,onCollapseToggle:y}=e,g=w=>n==="horizontal"?w.clientX:w.clientY,l=w=>{let T=Bt(t.current,r,n),P=g(w);return r?T-P:P-T},m=useRef(!1),v=useRef(0),x=useRef({onPositionChange:a,onDrag:s});x.current.onDrag=s,x.current.onPositionChange=a;let h=w=>{w.preventDefault();let T=l(w);m.current||(m.current=!0,x.current.onDrag&&x.current.onDrag(!0),x.current.onPositionChange&&x.current.onPositionChange(T)),v.current!==T&&(v.current=T,a&&a(T));},S=w=>{let T=w.target;m.current=!1;let P=l(w);x.current.onDrag&&x.current.onDrag(!1),x.current.onPositionChange&&x.current.onPositionChange(P),xe.splice(xe.indexOf(T),1),window.removeEventListener("mouseup",S,!1),window.removeEventListener("mousemove",h,!1);};return {onMouseDown:w=>{let T=w.currentTarget;xe.some(P=>T.contains(P))||(xe.push(T),window.addEventListener("mousemove",h,!1),window.addEventListener("mouseup",S,!1));},onMouseEnter:()=>{o&&o(!0);},onMouseOut:()=>{o&&o(!1);},onKeyDown:w=>{switch(w.key){case"Left":case"ArrowLeft":n==="horizontal"&&(w.preventDefault(),c&&!r?c():i&&r&&i());break;case"Up":case"ArrowUp":n==="vertical"&&(w.preventDefault(),c&&!r?c():i&&r&&i());break;case"Right":case"ArrowRight":n==="horizontal"&&(w.preventDefault(),i&&!r?i():c&&r&&c());break;case"Down":case"ArrowDown":n==="vertical"&&(w.preventDefault(),i&&!r?i():c&&r&&c());break;case"Home":w.preventDefault(),b&&b();break;case"End":w.preventDefault(),f&&f();break;case"Enter":w.preventDefault(),y&&y();break}}}}var tn={};E(tn,"useGlobalListeners",()=>le);function le(){let e=useRef(new Map),t=useCallback((o,s,a,i)=>{let c=i!=null&&i.once?(...f)=>{e.current.delete(a),a(...f);}:a;e.current.set(a,{type:s,eventTarget:o,fn:c,options:i}),o.addEventListener(s,a,i);},[]),r=useCallback((o,s,a,i)=>{var c;let f=((c=e.current.get(a))===null||c===void 0?void 0:c.fn)||a;o.removeEventListener(s,f,i),e.current.delete(a);},[]),n=useCallback(()=>{e.current.forEach((o,s)=>{r(o.eventTarget,o.type,s,o.options);});},[r]);return useEffect(()=>n,[n]),{addGlobalListener:t,removeGlobalListener:r,removeAllGlobalListeners:n}}var rn={};E(rn,"useLabels",()=>nn);function nn(e,t){let{id:r,"aria-label":n,"aria-labelledby":o}=e;return r=Qe(r),o&&n?o=[...new Set([...o.trim().split(/\s+/),r])].join(" "):o&&(o=o.trim().split(/\s+/).join(" ")),!n&&!o&&t&&(n=t),{id:r,"aria-label":n,"aria-labelledby":o}}var on={};E(on,"useObjectRef",()=>sn);function sn(e){let t=useRef();return I(()=>{!e||(typeof e=="function"?e(t.current):e.current=t.current);},[e]),t}var an={};E(an,"useUpdateEffect",()=>un);function un(e,t){let r=useRef(!0);useEffect(()=>{r.current?r.current=!1:e();},t);}var cn={};E(cn,"useResizeObserver",()=>fn);function ln(){return typeof window.ResizeObserver<"u"}function fn(e){let{ref:t,onResize:r}=e;useEffect(()=>{let n=t==null?void 0:t.current;if(!!n)if(ln()){let o=new window.ResizeObserver(s=>{!s.length||r();});return o.observe(n),()=>{n&&o.unobserve(n);}}else return window.addEventListener("resize",r,!1),()=>{window.removeEventListener("resize",r,!1);}},[r,t]);}var dn={};E(dn,"useSyncRef",()=>Z);function Z(e,t){I(()=>{if(e&&e.ref&&t)return e.ref.current=t.current,()=>{e.ref.current=null;}},[e,t]);}var pn={};E(pn,"getScrollParent",()=>bn);function bn(e){for(;e&&!$n(e);)e=e.parentElement;return e||document.scrollingElement||document.documentElement}function $n(e){let t=window.getComputedStyle(e);return /(auto|scroll)/.test(t.overflow+t.overflowX+t.overflowY)}var vn={};E(vn,"useViewportSize",()=>gn);var B=typeof window<"u"&&window.visualViewport;function gn(){let[e,t]=useState(()=>kt());return useEffect(()=>{let r=()=>{t(n=>{let o=kt();return o.width===n.width&&o.height===n.height?n:o});};return B?B.addEventListener("resize",r):window.addEventListener("resize",r),()=>{B?B.removeEventListener("resize",r):window.removeEventListener("resize",r);}},[]),e}function kt(){return {width:(B==null?void 0:B.width)||window.innerWidth,height:(B==null?void 0:B.height)||window.innerHeight}}var mn={};E(mn,"useDescription",()=>tt);var hn=0,_e=new Map;function tt(e){let[t,r]=useState(null);return I(()=>{if(!e)return;let n=_e.get(e);if(n)r(n.element.id);else {let o=`react-aria-description-${hn++}`;r(o);let s=document.createElement("div");s.id=o,s.style.display="none",s.textContent=e,document.body.appendChild(s),n={refCount:0,element:s},_e.set(e,n);}return n.refCount++,()=>{--n.refCount===0&&(n.element.remove(),_e.delete(e));}},[e]),{"aria-describedby":e?t:void 0}}var Y={};E(Y,"isMac",()=>fe);E(Y,"isIPhone",()=>Ht);E(Y,"isIPad",()=>Wt);E(Y,"isIOS",()=>de);E(Y,"isAppleDevice",()=>yn);E(Y,"isWebKit",()=>Pn);E(Y,"isChrome",()=>Gt);E(Y,"isAndroid",()=>En);function rt(e){var t;return typeof window>"u"||window.navigator==null?!1:((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.brands.some(r=>e.test(r.brand)))||e.test(window.navigator.userAgent)}function nt(e){return typeof window<"u"&&window.navigator!=null?e.test((window.navigator.userAgentData||window.navigator).platform):!1}function fe(){return nt(/^Mac/i)}function Ht(){return nt(/^iPhone/i)}function Wt(){return nt(/^iPad/i)||fe()&&navigator.maxTouchPoints>1}function de(){return Ht()||Wt()}function yn(){return fe()||de()}function Pn(){return rt(/AppleWebKit/i)&&!Gt()}function Gt(){return rt(/Chrome/i)}function En(){return rt(/Android/i)}var xn={};E(xn,"useEvent",()=>ot);function ot(e,t,r,n){let o=useRef(r);o.current=r;let s=r==null;useEffect(()=>{if(s)return;let a=e.current,i=c=>o.current.call(this,c);return a.addEventListener(t,i,n),()=>{a.removeEventListener(t,i,n);}},[e,t,n,s]);}var wn={};E(wn,"useValueEffect",()=>Ut);function Ut(e){let[t,r]=useState(e),n=useRef(t),o=useRef(null);n.current=t;let s=useRef(null);s.current=()=>{let i=o.current.next();if(i.done){o.current=null;return}t===i.value?s.current():r(i.value);},I(()=>{o.current&&s.current();});let a=useCallback(i=>{o.current=i(n.current),s.current();},[o,s]);return [t,a]}var Tn={};E(Tn,"scrollIntoView",()=>Sn);function Sn(e,t){let r=Rt(e,t,"left"),n=Rt(e,t,"top"),o=t.offsetWidth,s=t.offsetHeight,a=e.scrollLeft,i=e.scrollTop,c=a+e.offsetWidth,f=i+e.offsetHeight;r<=a?a=r:r+o>c&&(a+=r+o-c),n<=i?i=n:n+s>f&&(i+=n+s-f),e.scrollLeft=a,e.scrollTop=i;}function Rt(e,t,r){let n=r==="left"?"offsetLeft":"offsetTop",o=0;for(;t.offsetParent&&(o+=t[n],t.offsetParent!==e);){if(t.offsetParent.contains(e)){o-=e[n];break}t=t.offsetParent;}return o}function F(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0});}var Ln={};F(Ln,"Pressable",()=>Nn);var Fn={};F(Fn,"usePress",()=>$e);var re="default",ut="",Fe=new WeakMap;function ct(e){de()?(re==="default"&&(ut=document.documentElement.style.webkitUserSelect,document.documentElement.style.webkitUserSelect="none"),re="disabled"):e&&(Fe.set(e,e.style.userSelect),e.style.userSelect="none");}function pe(e){if(de()){if(re!=="disabled")return;re="restoring",setTimeout(()=>{ce(()=>{re==="restoring"&&(document.documentElement.style.webkitUserSelect==="none"&&(document.documentElement.style.webkitUserSelect=ut||""),ut="",re="default");});},300);}else if(e&&Fe.has(e)){let t=Fe.get(e);e.style.userSelect==="none"&&(e.style.userSelect=t),e.getAttribute("style")===""&&e.removeAttribute("style"),Fe.delete(e);}}function lt(e){return e.mozInputSource===0&&e.isTrusted?!0:e.detail===0&&!e.pointerType}var ft=class{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault();}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0;}isPropagationStopped(){return !1}persist(){}constructor(t,r){this.nativeEvent=r,this.target=r.target,this.currentTarget=r.currentTarget,this.relatedTarget=r.relatedTarget,this.bubbles=r.bubbles,this.cancelable=r.cancelable,this.defaultPrevented=r.defaultPrevented,this.eventPhase=r.eventPhase,this.isTrusted=r.isTrusted,this.timeStamp=r.timeStamp,this.type=t;}};function Qt(e){let t=useRef({isFocused:!1,onBlur:e,observer:null});return t.current.onBlur=e,I(()=>{let r=t.current;return ()=>{r.observer&&(r.observer.disconnect(),r.observer=null);}},[]),useCallback(r=>{if(r.target instanceof HTMLButtonElement||r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement||r.target instanceof HTMLSelectElement){t.current.isFocused=!0;let n=r.target,o=s=>{var a,i;t.current.isFocused=!1,n.disabled&&((i=(a=t.current).onBlur)===null||i===void 0||i.call(a,new ft("blur",s))),t.current.observer&&(t.current.observer.disconnect(),t.current.observer=null);};n.addEventListener("focusout",o,{once:!0}),t.current.observer=new MutationObserver(()=>{t.current.isFocused&&n.disabled&&(t.current.observer.disconnect(),n.dispatchEvent(new FocusEvent("blur")),n.dispatchEvent(new FocusEvent("focusout",{bubbles:!0})));}),t.current.observer.observe(n,{attributes:!0,attributeFilter:["disabled"]});}},[])}var Ce=H.createContext(null);Ce.displayName="PressResponderContext";function Cn(e){let t=useContext(Ce);if(t){let{register:r,...n}=t;e=M(n,e),r();}return Z(t,e.ref),e}function $e(e){let{onPress:t,onPressChange:r,onPressStart:n,onPressEnd:o,onPressUp:s,isDisabled:a,isPressed:i,preventFocusOnPress:c,shouldCancelOnPointerExit:f,allowTextSelectionOnPress:b,ref:y,...g}=Cn(e),l=useRef(null);l.current={onPress:t,onPressChange:r,onPressStart:n,onPressEnd:o,onPressUp:s,isDisabled:a,shouldCancelOnPointerExit:f};let[m,v]=useState(!1),x=useRef({isPressed:!1,ignoreEmulatedMouseEvents:!1,ignoreClickAfterPress:!1,didFirePressStart:!1,activePointerId:null,target:null,isOverTarget:!1,pointerType:null}),{addGlobalListener:h,removeAllGlobalListeners:S}=le(),L=useMemo(()=>{let u=x.current,k=(p,N)=>{let{onPressStart:d,onPressChange:$,isDisabled:ge}=l.current;ge||u.didFirePressStart||(d&&d({type:"pressstart",pointerType:N,target:p.currentTarget,shiftKey:p.shiftKey,metaKey:p.metaKey,ctrlKey:p.ctrlKey,altKey:p.altKey}),$&&$(!0),u.didFirePressStart=!0,v(!0));},C=(p,N,d=!0)=>{let{onPressEnd:$,onPressChange:ge,onPress:Ct,isDisabled:mr}=l.current;!u.didFirePressStart||(u.ignoreClickAfterPress=!0,u.didFirePressStart=!1,$&&$({type:"pressend",pointerType:N,target:p.currentTarget,shiftKey:p.shiftKey,metaKey:p.metaKey,ctrlKey:p.ctrlKey,altKey:p.altKey}),ge&&ge(!1),v(!1),Ct&&d&&!mr&&Ct({type:"press",pointerType:N,target:p.currentTarget,shiftKey:p.shiftKey,metaKey:p.metaKey,ctrlKey:p.ctrlKey,altKey:p.altKey}));},w=(p,N)=>{let{onPressUp:d,isDisabled:$}=l.current;$||d&&d({type:"pressup",pointerType:N,target:p.currentTarget,shiftKey:p.shiftKey,metaKey:p.metaKey,ctrlKey:p.ctrlKey,altKey:p.altKey});},T=p=>{u.isPressed&&(u.isOverTarget&&C(G(u.target,p),u.pointerType,!1),u.isPressed=!1,u.isOverTarget=!1,u.activePointerId=null,u.pointerType=null,S(),b||pe(u.target));},P={onKeyDown(p){st(p.nativeEvent)&&p.currentTarget.contains(p.target)&&(Yt(p.target)&&p.preventDefault(),p.stopPropagation(),!u.isPressed&&!p.repeat&&(u.target=p.currentTarget,u.isPressed=!0,k(p,"keyboard"),h(document,"keyup",Ft,!1)));},onKeyUp(p){st(p.nativeEvent)&&!p.repeat&&p.currentTarget.contains(p.target)&&w(G(u.target,p),"keyboard");},onClick(p){p&&!p.currentTarget.contains(p.target)||p&&p.button===0&&(p.stopPropagation(),a&&p.preventDefault(),!u.ignoreClickAfterPress&&!u.ignoreEmulatedMouseEvents&&(u.pointerType==="virtual"||lt(p.nativeEvent))&&(!a&&!c&&W(p.currentTarget),k(p,"virtual"),w(p,"virtual"),C(p,"virtual")),u.ignoreEmulatedMouseEvents=!1,u.ignoreClickAfterPress=!1);}},Ft=p=>{if(u.isPressed&&st(p)){Yt(p.target)&&p.preventDefault(),p.stopPropagation(),u.isPressed=!1;let N=p.target;C(G(u.target,p),"keyboard",u.target.contains(N)),S(),(u.target.contains(N)&&Zt(u.target)||u.target.getAttribute("role")==="link")&&u.target.click();}};if(typeof PointerEvent<"u"){P.onPointerDown=$=>{if(!($.button!==0||!$.currentTarget.contains($.target))){if(Kn($.nativeEvent)){u.pointerType="virtual";return}at($.currentTarget)&&$.preventDefault(),u.pointerType=$.pointerType,$.stopPropagation(),u.isPressed||(u.isPressed=!0,u.isOverTarget=!0,u.activePointerId=$.pointerId,u.target=$.currentTarget,!a&&!c&&W($.currentTarget),b||ct(u.target),k($,u.pointerType),h(document,"pointermove",p,!1),h(document,"pointerup",N,!1),h(document,"pointercancel",d,!1));}},P.onMouseDown=$=>{!$.currentTarget.contains($.target)||$.button===0&&(at($.currentTarget)&&$.preventDefault(),$.stopPropagation());},P.onPointerUp=$=>{!$.currentTarget.contains($.target)||u.pointerType==="virtual"||$.button===0&&ee($,$.currentTarget)&&w($,u.pointerType||$.pointerType);};let p=$=>{$.pointerId===u.activePointerId&&(ee($,u.target)?u.isOverTarget||(u.isOverTarget=!0,k(G(u.target,$),u.pointerType)):u.isOverTarget&&(u.isOverTarget=!1,C(G(u.target,$),u.pointerType,!1),l.current.shouldCancelOnPointerExit&&T($)));},N=$=>{$.pointerId===u.activePointerId&&u.isPressed&&$.button===0&&(ee($,u.target)?C(G(u.target,$),u.pointerType):u.isOverTarget&&C(G(u.target,$),u.pointerType,!1),u.isPressed=!1,u.isOverTarget=!1,u.activePointerId=null,u.pointerType=null,S(),b||pe(u.target));},d=$=>{T($);};P.onDragStart=$=>{!$.currentTarget.contains($.target)||T($);};}else {P.onMouseDown=d=>{d.button!==0||!d.currentTarget.contains(d.target)||(at(d.currentTarget)&&d.preventDefault(),d.stopPropagation(),!u.ignoreEmulatedMouseEvents&&(u.isPressed=!0,u.isOverTarget=!0,u.target=d.currentTarget,u.pointerType=lt(d.nativeEvent)?"virtual":"mouse",!a&&!c&&W(d.currentTarget),k(d,u.pointerType),h(document,"mouseup",p,!1)));},P.onMouseEnter=d=>{!d.currentTarget.contains(d.target)||(d.stopPropagation(),u.isPressed&&!u.ignoreEmulatedMouseEvents&&(u.isOverTarget=!0,k(d,u.pointerType)));},P.onMouseLeave=d=>{!d.currentTarget.contains(d.target)||(d.stopPropagation(),u.isPressed&&!u.ignoreEmulatedMouseEvents&&(u.isOverTarget=!1,C(d,u.pointerType,!1),l.current.shouldCancelOnPointerExit&&T(d)));},P.onMouseUp=d=>{!d.currentTarget.contains(d.target)||!u.ignoreEmulatedMouseEvents&&d.button===0&&w(d,u.pointerType);};let p=d=>{if(d.button===0){if(u.isPressed=!1,S(),u.ignoreEmulatedMouseEvents){u.ignoreEmulatedMouseEvents=!1;return}ee(d,u.target)?C(G(u.target,d),u.pointerType):u.isOverTarget&&C(G(u.target,d),u.pointerType,!1),u.isOverTarget=!1;}};P.onTouchStart=d=>{if(!d.currentTarget.contains(d.target))return;d.stopPropagation();let $=Mn(d.nativeEvent);!$||(u.activePointerId=$.identifier,u.ignoreEmulatedMouseEvents=!0,u.isOverTarget=!0,u.isPressed=!0,u.target=d.currentTarget,u.pointerType="touch",!a&&!c&&W(d.currentTarget),b||ct(u.target),k(d,u.pointerType),h(window,"scroll",N,!0));},P.onTouchMove=d=>{if(!d.currentTarget.contains(d.target)||(d.stopPropagation(),!u.isPressed))return;let $=zt(d.nativeEvent,u.activePointerId);$&&ee($,d.currentTarget)?u.isOverTarget||(u.isOverTarget=!0,k(d,u.pointerType)):u.isOverTarget&&(u.isOverTarget=!1,C(d,u.pointerType,!1),l.current.shouldCancelOnPointerExit&&T(d));},P.onTouchEnd=d=>{if(!d.currentTarget.contains(d.target)||(d.stopPropagation(),!u.isPressed))return;let $=zt(d.nativeEvent,u.activePointerId);$&&ee($,d.currentTarget)?(w(d,u.pointerType),C(d,u.pointerType)):u.isOverTarget&&C(d,u.pointerType,!1),u.isPressed=!1,u.activePointerId=null,u.isOverTarget=!1,u.ignoreEmulatedMouseEvents=!0,b||pe(u.target),S();},P.onTouchCancel=d=>{!d.currentTarget.contains(d.target)||(d.stopPropagation(),u.isPressed&&T(d));};let N=d=>{u.isPressed&&d.target.contains(u.target)&&T({currentTarget:u.target,shiftKey:!1,ctrlKey:!1,metaKey:!1,altKey:!1});};P.onDragStart=d=>{!d.currentTarget.contains(d.target)||T(d);};}return P},[h,a,c,S,b]);return useEffect(()=>()=>{b||pe(x.current.target);},[b]),{isPressed:i||m,pressProps:M(g,L)}}function Zt(e){return e.tagName==="A"&&e.hasAttribute("href")}function st(e){let{key:t,code:r,target:n}=e,o=n,{tagName:s,isContentEditable:a}=o,i=o.getAttribute("role");return (t==="Enter"||t===" "||t==="Spacebar"||r==="Space")&&s!=="INPUT"&&s!=="TEXTAREA"&&a!==!0&&(!Zt(o)||i==="button"&&t!=="Enter")&&!(i==="link"&&t!=="Enter")}function Mn(e){let{targetTouches:t}=e;return t.length>0?t[0]:null}function zt(e,t){let r=e.changedTouches;for(let n=0;n<r.length;n++){let o=r[n];if(o.identifier===t)return o}return null}function G(e,t){return {currentTarget:e,shiftKey:t.shiftKey,ctrlKey:t.ctrlKey,metaKey:t.metaKey,altKey:t.altKey}}function Dn(e){let t=e.width/2||e.radiusX||0,r=e.height/2||e.radiusY||0;return {top:e.clientY-r,right:e.clientX+t,bottom:e.clientY+r,left:e.clientX-t}}function In(e,t){return !(e.left>t.right||t.left>e.right||e.top>t.bottom||t.top>e.bottom)}function ee(e,t){let r=t.getBoundingClientRect(),n=Dn(e);return In(r,n)}function at(e){return !e.draggable}function Yt(e){return !((e.tagName==="INPUT"||e.tagName==="BUTTON")&&e.type==="submit")}function Kn(e){return e.width===0&&e.height===0||e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"}var Nn=H.forwardRef(({children:e,...t},r)=>{let n=useRef();r=r??n;let{pressProps:o}=$e({...t,ref:r}),s=H.Children.only(e);return H.cloneElement(s,{ref:r,...M(s.props,o)})}),On={};F(On,"PressResponder",()=>kn);var kn=H.forwardRef(({children:e,...t},r)=>{let n=useRef(!1),o=useContext(Ce),s=M(o||{},{...t,ref:r||(o==null?void 0:o.ref),register(){n.current=!0,o&&o.register();}});return Z(o,r),useEffect(()=>{n.current||console.warn("A PressResponder was rendered without a pressable child. Either call the usePress hook, or wrap your DOM node with <Pressable> component.");},[]),H.createElement(Ce.Provider,{value:s},e)}),Rn={};F(Rn,"useFocus",()=>Ke);function Ke(e){let{isDisabled:t,onFocus:r,onBlur:n,onFocusChange:o}=e,s=useCallback(c=>{if(c.target===c.currentTarget)return n&&n(c),o&&o(!1),!0},[n,o]),a=Qt(s),i=useCallback(c=>{c.target===c.currentTarget&&(r&&r(c),o&&o(!0),a(c));},[o,r,a]);return {focusProps:{onFocus:!t&&(r||o||n)?i:void 0,onBlur:!t&&(n||o)?s:null}}}var se={};F(se,"isFocusVisible",()=>ve);F(se,"getInteractionModality",()=>$t);F(se,"setInteractionModality",()=>Gn);F(se,"useInteractionModality",()=>Un);F(se,"useFocusVisible",()=>Yn);F(se,"useFocusVisibleListener",()=>Oe);var U=null,be=new Set,Xt=!1,_=!1,dt=!1,An={Tab:!0,Escape:!0};function Ne(e,t){for(let r of be)r(e,t);}function Bn(e){return !(e.metaKey||!fe()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function jt(e){_=!0,Bn(e)&&(U="keyboard",Ne("keyboard",e));}function te(e){U="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(_=!0,Ne("pointer",e));}function Vn(e){lt(e)&&(_=!0,U="virtual");}function Hn(e){e.target===window||e.target===document||(!_&&!dt&&(U="virtual",Ne("virtual",e)),_=!1,dt=!1);}function Wn(){_=!1,dt=!0;}function Me(){if(typeof window>"u"||Xt)return;let e=HTMLElement.prototype.focus;HTMLElement.prototype.focus=function(){_=!0,e.apply(this,arguments);},document.addEventListener("keydown",jt,!0),document.addEventListener("keyup",jt,!0),document.addEventListener("click",Vn,!0),window.addEventListener("focus",Hn,!0),window.addEventListener("blur",Wn,!1),typeof PointerEvent<"u"?(document.addEventListener("pointerdown",te,!0),document.addEventListener("pointermove",te,!0),document.addEventListener("pointerup",te,!0)):(document.addEventListener("mousedown",te,!0),document.addEventListener("mousemove",te,!0),document.addEventListener("mouseup",te,!0)),Xt=!0;}typeof document<"u"&&(document.readyState!=="loading"?Me():document.addEventListener("DOMContentLoaded",Me));function ve(){return U!=="pointer"}function $t(){return U}function Gn(e){U=e,Ne(e,null);}function Un(){Me();let[e,t]=useState(U);return useEffect(()=>{let r=()=>{t(U);};return be.add(r),()=>{be.delete(r);}},[]),e}function zn(e,t,r){return !(e&&t==="keyboard"&&r instanceof KeyboardEvent&&!An[r.key])}function Yn(e={}){let{isTextInput:t,autoFocus:r}=e,[n,o]=useState(r||ve());return Oe(s=>{o(s);},[t],{isTextInput:t}),{isFocusVisible:n}}function Oe(e,t,r){Me(),useEffect(()=>{let n=(o,s)=>{!zn(r==null?void 0:r.isTextInput,o,s)||e(ve());};return be.add(n),()=>{be.delete(n);}},t);}var Xn={};F(Xn,"useFocusWithin",()=>vt);function vt(e){let{isDisabled:t,onBlurWithin:r,onFocusWithin:n,onFocusWithinChange:o}=e,s=useRef({isFocusWithin:!1}),a=useCallback(f=>{s.current.isFocusWithin&&!f.currentTarget.contains(f.relatedTarget)&&(s.current.isFocusWithin=!1,r&&r(f),o&&o(!1));},[r,o,s]),i=Qt(a),c=useCallback(f=>{s.current.isFocusWithin||(n&&n(f),o&&o(!0),s.current.isFocusWithin=!0,i(f));},[n,o,i]);return t?{focusWithinProps:{onFocus:null,onBlur:null}}:{focusWithinProps:{onFocus:c,onBlur:a}}}var jn={};F(jn,"useHover",()=>gt);var De=!1,it=0;function pt(){De=!0,setTimeout(()=>{De=!1;},50);}function _t(e){e.pointerType==="touch"&&pt();}function _n(){if(!(typeof document>"u"))return typeof PointerEvent<"u"?document.addEventListener("pointerup",_t):document.addEventListener("touchend",pt),it++,()=>{it--,!(it>0)&&(typeof PointerEvent<"u"?document.removeEventListener("pointerup",_t):document.removeEventListener("touchend",pt));}}function gt(e){let{onHoverStart:t,onHoverChange:r,onHoverEnd:n,isDisabled:o}=e,[s,a]=useState(!1),i=useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;useEffect(_n,[]);let{hoverProps:c,triggerHoverEnd:f}=useMemo(()=>{let b=(l,m)=>{if(i.pointerType=m,o||m==="touch"||i.isHovered||!l.currentTarget.contains(l.target))return;i.isHovered=!0;let v=l.currentTarget;i.target=v,t&&t({type:"hoverstart",target:v,pointerType:m}),r&&r(!0),a(!0);},y=(l,m)=>{if(i.pointerType="",i.target=null,m==="touch"||!i.isHovered)return;i.isHovered=!1;let v=l.currentTarget;n&&n({type:"hoverend",target:v,pointerType:m}),r&&r(!1),a(!1);},g={};return typeof PointerEvent<"u"?(g.onPointerEnter=l=>{De&&l.pointerType==="mouse"||b(l,l.pointerType);},g.onPointerLeave=l=>{!o&&l.currentTarget.contains(l.target)&&y(l,l.pointerType);}):(g.onTouchStart=()=>{i.ignoreEmulatedMouseEvents=!0;},g.onMouseEnter=l=>{!i.ignoreEmulatedMouseEvents&&!De&&b(l,"mouse"),i.ignoreEmulatedMouseEvents=!1;},g.onMouseLeave=l=>{!o&&l.currentTarget.contains(l.target)&&y(l,"mouse");}),{hoverProps:g,triggerHoverEnd:y}},[t,r,n,o,i]);return useEffect(()=>{o&&f({currentTarget:i.target},i.pointerType);},[o]),{hoverProps:c,isHovered:s}}var qn={};F(qn,"useInteractOutside",()=>Jn);function Jn(e){let{ref:t,onInteractOutside:r,isDisabled:n,onInteractOutsideStart:o}=e,a=useRef({isPointerDown:!1,ignoreEmulatedMouseEvents:!1,onInteractOutside:r,onInteractOutsideStart:o}).current;a.onInteractOutside=r,a.onInteractOutsideStart=o,useEffect(()=>{if(n)return;let i=c=>{Le(c,t)&&a.onInteractOutside&&(a.onInteractOutsideStart&&a.onInteractOutsideStart(c),a.isPointerDown=!0);};if(typeof PointerEvent<"u"){let c=f=>{a.isPointerDown&&a.onInteractOutside&&Le(f,t)&&(a.isPointerDown=!1,a.onInteractOutside(f));};return document.addEventListener("pointerdown",i,!0),document.addEventListener("pointerup",c,!0),()=>{document.removeEventListener("pointerdown",i,!0),document.removeEventListener("pointerup",c,!0);}}else {let c=b=>{a.ignoreEmulatedMouseEvents?a.ignoreEmulatedMouseEvents=!1:a.isPointerDown&&a.onInteractOutside&&Le(b,t)&&(a.isPointerDown=!1,a.onInteractOutside(b));},f=b=>{a.ignoreEmulatedMouseEvents=!0,a.onInteractOutside&&a.isPointerDown&&Le(b,t)&&(a.isPointerDown=!1,a.onInteractOutside(b));};return document.addEventListener("mousedown",i,!0),document.addEventListener("mouseup",c,!0),document.addEventListener("touchstart",i,!0),document.addEventListener("touchend",f,!0),()=>{document.removeEventListener("mousedown",i,!0),document.removeEventListener("mouseup",c,!0),document.removeEventListener("touchstart",i,!0),document.removeEventListener("touchend",f,!0);}}},[t,a,n]);}function Le(e,t){if(e.button>0)return !1;if(e.target){let r=e.target.ownerDocument;if(!r||!r.documentElement.contains(e.target))return !1}return t.current&&!t.current.contains(e.target)}var Qn={};F(Qn,"useKeyboard",()=>mt);function qt(e){if(!e)return;let t=!0;return r=>{let n={...r,preventDefault(){r.preventDefault();},isDefaultPrevented(){return r.isDefaultPrevented()},stopPropagation(){console.error("stopPropagation is now the default behavior for events in React Spectrum. You can use continuePropagation() to revert this behavior.");},continuePropagation(){t=!1;}};e(n),t&&r.stopPropagation();}}function mt(e){return {keyboardProps:e.isDisabled?{}:{onKeyDown:qt(e.onKeyDown),onKeyUp:qt(e.onKeyUp)}}}var Zn={};F(Zn,"useMove",()=>eo);function eo(e){let{onMoveStart:t,onMove:r,onMoveEnd:n}=e,o=useRef({didMove:!1,lastPosition:null,id:null}),{addGlobalListener:s,removeGlobalListener:a}=le();return {moveProps:useMemo(()=>{let c={},f=()=>{ct(),o.current.didMove=!1;},b=(l,m,v,x)=>{v===0&&x===0||(o.current.didMove||(o.current.didMove=!0,t==null||t({type:"movestart",pointerType:m,shiftKey:l.shiftKey,metaKey:l.metaKey,ctrlKey:l.ctrlKey,altKey:l.altKey})),r({type:"move",pointerType:m,deltaX:v,deltaY:x,shiftKey:l.shiftKey,metaKey:l.metaKey,ctrlKey:l.ctrlKey,altKey:l.altKey}));},y=(l,m)=>{pe(),o.current.didMove&&(n==null||n({type:"moveend",pointerType:m,shiftKey:l.shiftKey,metaKey:l.metaKey,ctrlKey:l.ctrlKey,altKey:l.altKey}));};if(typeof PointerEvent>"u"){let l=h=>{h.button===0&&(b(h,"mouse",h.pageX-o.current.lastPosition.pageX,h.pageY-o.current.lastPosition.pageY),o.current.lastPosition={pageX:h.pageX,pageY:h.pageY});},m=h=>{h.button===0&&(y(h,"mouse"),a(window,"mousemove",l,!1),a(window,"mouseup",m,!1));};c.onMouseDown=h=>{h.button===0&&(f(),h.stopPropagation(),h.preventDefault(),o.current.lastPosition={pageX:h.pageX,pageY:h.pageY},s(window,"mousemove",l,!1),s(window,"mouseup",m,!1));};let v=h=>{let S=[...h.changedTouches].findIndex(({identifier:L})=>L===o.current.id);if(S>=0){let{pageX:L,pageY:u}=h.changedTouches[S];b(h,"touch",L-o.current.lastPosition.pageX,u-o.current.lastPosition.pageY),o.current.lastPosition={pageX:L,pageY:u};}},x=h=>{[...h.changedTouches].findIndex(({identifier:L})=>L===o.current.id)>=0&&(y(h,"touch"),o.current.id=null,a(window,"touchmove",v),a(window,"touchend",x),a(window,"touchcancel",x));};c.onTouchStart=h=>{if(h.changedTouches.length===0||o.current.id!=null)return;let{pageX:S,pageY:L,identifier:u}=h.changedTouches[0];f(),h.stopPropagation(),h.preventDefault(),o.current.lastPosition={pageX:S,pageY:L},o.current.id=u,s(window,"touchmove",v,!1),s(window,"touchend",x,!1),s(window,"touchcancel",x,!1);};}else {let l=v=>{if(v.pointerId===o.current.id){let x=v.pointerType||"mouse";b(v,x,v.pageX-o.current.lastPosition.pageX,v.pageY-o.current.lastPosition.pageY),o.current.lastPosition={pageX:v.pageX,pageY:v.pageY};}},m=v=>{if(v.pointerId===o.current.id){let x=v.pointerType||"mouse";y(v,x),o.current.id=null,a(window,"pointermove",l,!1),a(window,"pointerup",m,!1),a(window,"pointercancel",m,!1);}};c.onPointerDown=v=>{v.button===0&&o.current.id==null&&(f(),v.stopPropagation(),v.preventDefault(),o.current.lastPosition={pageX:v.pageX,pageY:v.pageY},o.current.id=v.pointerId,s(window,"pointermove",l,!1),s(window,"pointerup",m,!1),s(window,"pointercancel",m,!1));};}let g=(l,m,v)=>{f(),b(l,"keyboard",m,v),y(l,"keyboard");};return c.onKeyDown=l=>{switch(l.key){case"Left":case"ArrowLeft":l.preventDefault(),l.stopPropagation(),g(l,-1,0);break;case"Right":case"ArrowRight":l.preventDefault(),l.stopPropagation(),g(l,1,0);break;case"Up":case"ArrowUp":l.preventDefault(),l.stopPropagation(),g(l,0,-1);break;case"Down":case"ArrowDown":l.preventDefault(),l.stopPropagation(),g(l,0,1);break}},c},[o,t,r,n,s,a])}}var to={};F(to,"useScrollWheel",()=>ro);function ro(e,t){let{onScroll:r,isDisabled:n}=e,o=useCallback(s=>{s.ctrlKey||(s.preventDefault(),s.stopPropagation(),r&&r({deltaX:s.deltaX,deltaY:s.deltaY}));},[r]);ot(t,"wheel",n?null:o);}var no={};F(no,"useLongPress",()=>so);var oo=500;function so(e){let{isDisabled:t,onLongPressStart:r,onLongPressEnd:n,onLongPress:o,threshold:s=oo,accessibilityDescription:a}=e,i=useRef(null),{addGlobalListener:c,removeGlobalListener:f}=le(),{pressProps:b}=$e({isDisabled:t,onPressStart(g){if((g.pointerType==="mouse"||g.pointerType==="touch")&&(r&&r({...g,type:"longpressstart"}),i.current=setTimeout(()=>{g.target.dispatchEvent(new PointerEvent("pointercancel",{bubbles:!0})),o&&o({...g,type:"longpress"}),i.current=null;},s),g.pointerType==="touch")){let l=m=>{m.preventDefault();};c(g.target,"contextmenu",l,{once:!0}),c(window,"pointerup",()=>{setTimeout(()=>{f(g.target,"contextmenu",l);},30);},{once:!0});}},onPressEnd(g){i.current&&clearTimeout(i.current),n&&(g.pointerType==="mouse"||g.pointerType==="touch")&&n({...g,type:"longpressend"});}}),y=tt(o&&!t?a:null);return {longPressProps:M(b,y)}}function z(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0});}var ke={};z(ke,"FocusScope",()=>co);z(ke,"useFocusManager",()=>lo);z(ke,"getFocusableTreeWalker",()=>O);z(ke,"createFocusManager",()=>ho);var ao={};z(ao,"focusSafely",()=>xt);function xt(e){if($t()==="virtual"){let t=document.activeElement;ce(()=>{document.activeElement===t&&document.contains(e)&&W(e);});}else W(e);}function io(e){if(!(e instanceof HTMLElement)&&!(e instanceof SVGElement))return !1;let{display:t,visibility:r}=e.style,n=t!=="none"&&r!=="hidden"&&r!=="collapse";if(n){let{getComputedStyle:o}=e.ownerDocument.defaultView,{display:s,visibility:a}=o(e);n=s!=="none"&&a!=="hidden"&&a!=="collapse";}return n}function uo(e,t){return !e.hasAttribute("hidden")&&(e.nodeName==="DETAILS"&&t&&t.nodeName!=="SUMMARY"?e.hasAttribute("open"):!0)}function nr(e,t){return e.nodeName!=="#comment"&&io(e)&&uo(e,t)&&(!e.parentElement||nr(e.parentElement,e))}var yt=H.createContext(null),D=null,ie=new Map;function co(e){let{children:t,contain:r,restoreFocus:n,autoFocus:o}=e,s=useRef(),a=useRef(),i=useRef([]),c=useContext(yt),f=c==null?void 0:c.scopeRef;I(()=>{let y=s.current.nextSibling,g=[];for(;y&&y!==a.current;)g.push(y),y=y.nextSibling;i.current=g;},[t,f]),I(()=>(ie.set(i,f),()=>{(i===D||Re(i,D))&&(!f||ie.has(f))&&(D=f),ie.delete(i);}),[i,f]),$o(i,r),mo(i,n,r),go(i,o);let b=fo(i);return H.createElement(yt.Provider,{value:{scopeRef:i,focusManager:b}},H.createElement("span",{"data-focus-scope-start":!0,hidden:!0,ref:s}),t,H.createElement("span",{"data-focus-scope-end":!0,hidden:!0,ref:a}))}function lo(){var e;return (e=useContext(yt))===null||e===void 0?void 0:e.focusManager}function fo(e){return {focusNext(t={}){let r=e.current,{from:n,tabbable:o,wrap:s}=t,a=n||document.activeElement,i=r[0].previousElementSibling,c=O(ae(r),{tabbable:o},r);c.currentNode=A(a,r)?a:i;let f=c.nextNode();return !f&&s&&(c.currentNode=i,f=c.nextNode()),f&&K(f,!0),f},focusPrevious(t={}){let r=e.current,{from:n,tabbable:o,wrap:s}=t,a=n||document.activeElement,i=r[r.length-1].nextElementSibling,c=O(ae(r),{tabbable:o},r);c.currentNode=A(a,r)?a:i;let f=c.previousNode();return !f&&s&&(c.currentNode=i,f=c.previousNode()),f&&K(f,!0),f},focusFirst(t={}){let r=e.current,{tabbable:n}=t,o=O(ae(r),{tabbable:n},r);o.currentNode=r[0].previousElementSibling;let s=o.nextNode();return s&&K(s,!0),s},focusLast(t={}){let r=e.current,{tabbable:n}=t,o=O(ae(r),{tabbable:n},r);o.currentNode=r[r.length-1].nextElementSibling;let s=o.previousNode();return s&&K(s,!0),s}}}var wt=["input:not([disabled]):not([type=hidden])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[contenteditable]"],po=wt.join(":not([hidden]),")+",[tabindex]:not([disabled]):not([hidden])";wt.push('[tabindex]:not([tabindex="-1"]):not([disabled])');var bo=wt.join(':not([hidden]):not([tabindex="-1"]),');function ae(e){return e[0].parentElement}function $o(e,t){let r=useRef(),n=useRef(null);I(()=>{let o=e.current;if(!t)return;let s=c=>{if(c.key!=="Tab"||c.altKey||c.ctrlKey||c.metaKey||e!==D)return;let f=document.activeElement,b=e.current;if(!A(f,b))return;let y=O(ae(b),{tabbable:!0},b);y.currentNode=f;let g=c.shiftKey?y.previousNode():y.nextNode();g||(y.currentNode=c.shiftKey?b[b.length-1].nextElementSibling:b[0].previousElementSibling,g=c.shiftKey?y.previousNode():y.nextNode()),c.preventDefault(),g&&K(g,!0);},a=c=>{!D||Re(D,e)?(D=e,r.current=c.target):e===D&&!rr(c.target,e)?r.current?r.current.focus():D&&or(D.current):e===D&&(r.current=c.target);},i=c=>{n.current=requestAnimationFrame(()=>{e===D&&!rr(document.activeElement,e)&&(D=e,r.current=c.target,r.current.focus());});};return document.addEventListener("keydown",s,!1),document.addEventListener("focusin",a,!1),o.forEach(c=>c.addEventListener("focusin",a,!1)),o.forEach(c=>c.addEventListener("focusout",i,!1)),()=>{document.removeEventListener("keydown",s,!1),document.removeEventListener("focusin",a,!1),o.forEach(c=>c.removeEventListener("focusin",a,!1)),o.forEach(c=>c.removeEventListener("focusout",i,!1));}},[e,t]),useEffect(()=>()=>cancelAnimationFrame(n.current),[n]);}function vo(e){for(let t of ie.keys())if(A(e,t.current))return !0;return !1}function A(e,t){return t.some(r=>r.contains(e))}function rr(e,t){for(let r of ie.keys())if((r===t||Re(t,r))&&A(e,r.current))return !0;return !1}function Re(e,t){let r=ie.get(t);return r?r===e?!0:Re(e,r):!1}function K(e,t=!1){if(e!=null&&!t)try{xt(e);}catch{}else if(e!=null)try{e.focus();}catch{}}function or(e){let t=e[0].previousElementSibling,r=O(ae(e),{tabbable:!0},e);r.currentNode=t,K(r.nextNode());}function go(e,t){let r=H.useRef(t);useEffect(()=>{r.current&&(D=e,A(document.activeElement,D.current)||or(e.current)),r.current=!1;},[]);}function mo(e,t,r){let n=useRef(typeof document<"u"?document.activeElement:null);I(()=>{let o=n.current;if(!t)return;let s=a=>{if(a.key!=="Tab"||a.altKey||a.ctrlKey||a.metaKey)return;let i=document.activeElement;if(!A(i,e.current))return;let c=O(document.body,{tabbable:!0});c.currentNode=i;let f=a.shiftKey?c.previousNode():c.nextNode();if((!document.body.contains(o)||o===document.body)&&(o=null),(!f||!A(f,e.current))&&o){c.currentNode=o;do f=a.shiftKey?c.previousNode():c.nextNode();while(A(f,e.current));a.preventDefault(),a.stopPropagation(),f?K(f,!0):vo(o)?K(o,!0):i.blur();}};return r||document.addEventListener("keydown",s,!0),()=>{r||document.removeEventListener("keydown",s,!0),t&&o&&A(document.activeElement,e.current)&&requestAnimationFrame(()=>{document.body.contains(o)&&K(o);});}},[e,t,r]);}function O(e,t,r){let n=t!=null&&t.tabbable?bo:po,o=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode(s){var a;return !(t==null||(a=t.from)===null||a===void 0)&&a.contains(s)?NodeFilter.FILTER_REJECT:s.matches(n)&&nr(s)&&(!r||A(s,r))&&(!(t!=null&&t.accept)||t.accept(s))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});return t!=null&&t.from&&(o.currentNode=t.from),o}function ho(e,t={}){return {focusNext(r={}){let n=e.current;if(!n)return;let{from:o,tabbable:s=t.tabbable,wrap:a=t.wrap,accept:i=t.accept}=r,c=o||document.activeElement,f=O(n,{tabbable:s,accept:i});n.contains(c)&&(f.currentNode=c);let b=f.nextNode();return !b&&a&&(f.currentNode=n,b=f.nextNode()),b&&K(b,!0),b},focusPrevious(r=t){let n=e.current;if(!n)return;let{from:o,tabbable:s=t.tabbable,wrap:a=t.wrap,accept:i=t.accept}=r,c=o||document.activeElement,f=O(n,{tabbable:s,accept:i});if(n.contains(c))f.currentNode=c;else {let y=ht(f);return y&&K(y,!0),y}let b=f.previousNode();return !b&&a&&(f.currentNode=n,b=ht(f)),b&&K(b,!0),b},focusFirst(r=t){let n=e.current;if(!n)return;let{tabbable:o=t.tabbable,accept:s=t.accept}=r,i=O(n,{tabbable:o,accept:s}).nextNode();return i&&K(i,!0),i},focusLast(r=t){let n=e.current;if(!n)return;let{tabbable:o=t.tabbable,accept:s=t.accept}=r,a=O(n,{tabbable:o,accept:s}),i=ht(a);return i&&K(i,!0),i}}}function ht(e){let t,r;do r=e.lastChild(),r&&(t=r);while(r);return t}var yo={};z(yo,"FocusRing",()=>Eo);var Po={};z(Po,"useFocusRing",()=>sr);function sr(e={}){let{autoFocus:t=!1,isTextInput:r,within:n}=e,o=useRef({isFocused:!1,isFocusVisible:t||ve()}),[s,a]=useState(!1),[i,c]=useState(()=>o.current.isFocused&&o.current.isFocusVisible),f=useCallback(()=>c(o.current.isFocused&&o.current.isFocusVisible),[]),b=useCallback(l=>{o.current.isFocused=l,a(l),f();},[f]);Oe(l=>{o.current.isFocusVisible=l,f();},[],{isTextInput:r});let{focusProps:y}=Ke({isDisabled:n,onFocusChange:b}),{focusWithinProps:g}=vt({isDisabled:!n,onFocusWithinChange:b});return {isFocused:s,isFocusVisible:o.current.isFocused&&i,focusProps:n?g:y}}function Eo(e){let{children:t,focusClass:r,focusRingClass:n}=e,{isFocused:o,isFocusVisible:s,focusProps:a}=sr(e),i=H.Children.only(t);return H.cloneElement(i,M(i.props,{...a,className:ye({[r||""]:o,[n||""]:s})}))}var ar={};z(ar,"FocusableProvider",()=>To);z(ar,"useFocusable",()=>Tt);var ir=H.createContext(null);function xo(e){let t=useContext(ir)||{};Z(t,e);let{ref:r,...n}=t;return n}function wo(e,t){let{children:r,...n}=e,o={...n,ref:t};return H.createElement(ir.Provider,{value:o},r)}var To=H.forwardRef(wo);function Tt(e,t){let{focusProps:r}=Ke(e),{keyboardProps:n}=mt(e),o=M(r,n),s=xo(t),a=e.isDisabled?{}:s,i=useRef(e.autoFocus);return useEffect(()=>{i.current&&t.current&&xt(t.current),i.current=!1;},[t]),{focusableProps:M({...o,tabIndex:e.excludeFromTabOrder&&!e.isDisabled?-1:void 0},a)}}function ur(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0});}var So={};ur(So,"useButton",()=>Ae);function Ae(e,t){let{elementType:r="button",isDisabled:n,onPress:o,onPressStart:s,onPressEnd:a,onPressChange:i,preventFocusOnPress:c,allowFocusWhenDisabled:f,onClick:b,href:y,target:g,rel:l,type:m="button"}=e,v;r==="button"?v={type:m,disabled:n}:v={role:"button",tabIndex:n?void 0:0,href:r==="a"&&n?void 0:y,target:r==="a"?g:void 0,type:r==="input"?m:void 0,disabled:r==="input"?n:void 0,"aria-disabled":!n||r==="input"?void 0:n,rel:r==="a"?l:void 0};let{pressProps:x,isPressed:h}=$e({onPressStart:s,onPressEnd:a,onPressChange:i,onPress:o,isDisabled:n,preventFocusOnPress:c,ref:t}),{focusableProps:S}=Tt(e,t);f&&(S.tabIndex=n?-1:S.tabIndex);let L=M(S,x,et(e,{labelable:!0}));return {isPressed:h,buttonProps:M(v,L,{"aria-haspopup":e["aria-haspopup"],"aria-expanded":e["aria-expanded"],"aria-controls":e["aria-controls"],"aria-pressed":e["aria-pressed"],onClick:u=>{b&&(b(u),console.warn("onClick is deprecated, please use onPress"));}})}}var Lo={};ur(Lo,"useToggleButton",()=>Fo);function Fo(e,t,r){let{isSelected:n}=t,{isPressed:o,buttonProps:s}=Ae({...e,onPress:Se(t.toggle,e.onPress)},r);return {isPressed:o,buttonProps:M(s,{"aria-pressed":n})}}var St=He(Ve());var cr=He(Ve()),lr=({variant:e,type:t,size:r,disabled:n,loading:o,rounded:s})=>{let a={solid:"btn-solid",ghost:"btn-ghost"},i={success:"btn-success",secondary:"btn-secondary",warning:"btn-warning",error:"btn-error",alert:"btn-alert"},c={block:"btn-block",xs:"btn-xs",sm:"btn-sm",md:"btn-md",lg:"btn-lg"};return (0, cr.default)(["btn",e&&a[e],t&&i[t],r&&c[r],n&&"btn-disabled",o&&"btn-loading",s&&"btn-rounded"])};var fr=forwardRef((e,t)=>{let{size:r,rounded:n,variant:o="solid",type:s,block:a,color:i,focusafterclick:c=!0,icon:f,notification:b,className:y,children:g,disabled:l,loading:m,onClick:v,...x}=e,h=useRef(null),[S,L]=useState(!1),{hoverProps:u,isHovered:k}=gt({isDisabled:l||m}),{buttonProps:C,isPressed:w}=Ae({type:"submit",isDisabled:l||m,onFocusChange:L,onKeyDown:P=>((P.key==="Enter"||P.key===" ")&&(v==null||v(P),L(!0)),P),onPressEnd:P=>(P.pointerType,P.pointerType==="mouse"&&(c||P.target.blur()),P),onPressStart:P=>(P.pointerType==="mouse"&&L(!0),P),onPress:P=>{v==null||v(P);}},h),T=lr({variant:o,size:r,type:s,disabled:l,loading:m,rounded:n});return H.createElement("button",{...C,...u,"data-focus":S?"":null,"data-active":w?"":null,"data-hover":k?"":null,"data-loading":m?"":null,"data-color":i,className:(0, St.default)([T,f?g?"":"icononly":""],y),...x,ref:Ze(h,t)},m&&H.createElement("span",null,H.createElement("div",{className:`btn-spinner ${m?"opacity-100":"opacity-0"}`})),H.createElement("span",{className:`btn-content ${m?"opacity-0":"opacity-100"}`},f&&H.createElement("span",{className:(0, St.default)("btn-icon")},f),g),b&&H.createElement("div",{className:"btn-notification"}))});fr.displayName="Button";var dr=fr;var $r=He(Ve());function Lt(e){return H.Children.toArray(e).filter(t=>H.isValidElement(t))}var vr=forwardRef((e,t)=>{let{size:r,color:n,variant:o,attached:s,rounded:a,disabled:i,children:c,className:f,...b}=e,g=Lt(c).map(l=>H.cloneElement(l,{size:r||l.props.size,color:l.props.color||n,variant:l.props.variant||o,disabled:l.props.disabled||i,rounded:l.props.rounded||a,focusafterclick:!0}));return H.createElement("div",{ref:t,role:"group",className:(0, $r.default)("btn-group",s&&"btn-group-attached",a&&"btn-group-rounded",f),...b},g)});vr.displayName="ButtonGroup";var gr=vr;var Ko=dr;Ko.Group=gr;/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/

export { Ko as Button, gr as ButtonGroup };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9jbGFzc25hbWVzQDIuMy4xL25vZGVfbW9kdWxlcy9jbGFzc25hbWVzL2luZGV4LmpzIiwiLi4vLi4vc3JjL2J1dHRvbi50c3giLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vQHJlYWN0LWFyaWErc3NyQDMuMi4wX3JlYWN0QDE4LjIuMC9ub2RlX21vZHVsZXMvQHJlYWN0LWFyaWEvc3NyL2Rpc3QvcGFja2FnZXMvQHJlYWN0LWFyaWEvc3NyL3NyYy9TU1JQcm92aWRlci50c3giLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vY2xzeEAxLjIuMS9ub2RlX21vZHVsZXMvY2xzeC9kaXN0L2Nsc3gubS5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9AcmVhY3Qtc3RhdGVseSt1dGlsc0AzLjUuMF9yZWFjdEAxOC4yLjAvbm9kZV9tb2R1bGVzL0ByZWFjdC1zdGF0ZWx5L3V0aWxzL2Rpc3QvcGFja2FnZXMvQHJlYWN0LXN0YXRlbHkvdXRpbHMvc3JjL3VzZUNvbnRyb2xsZWRTdGF0ZS50cyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9AcmVhY3Qtc3RhdGVseSt1dGlsc0AzLjUuMF9yZWFjdEAxOC4yLjAvbm9kZV9tb2R1bGVzL0ByZWFjdC1zdGF0ZWx5L3V0aWxzL2Rpc3QvcGFja2FnZXMvQHJlYWN0LXN0YXRlbHkvdXRpbHMvc3JjL251bWJlci50cyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9AcmVhY3QtYXJpYSt1dGlsc0AzLjEzLjFfcmVhY3RAMTguMi4wL25vZGVfbW9kdWxlcy9AcmVhY3QtYXJpYS91dGlscy9kaXN0L3BhY2thZ2VzL0ByZWFjdC1hcmlhL3V0aWxzL3NyYy91c2VMYXlvdXRFZmZlY3QudHMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vQHJlYWN0LWFyaWErdXRpbHNAMy4xMy4xX3JlYWN0QDE4LjIuMC9ub2RlX21vZHVsZXMvQHJlYWN0LWFyaWEvdXRpbHMvZGlzdC9wYWNrYWdlcy9AcmVhY3QtYXJpYS91dGlscy9zcmMvdXNlSWQudHMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vQHJlYWN0LWFyaWErdXRpbHNAMy4xMy4xX3JlYWN0QDE4LjIuMC9ub2RlX21vZHVsZXMvQHJlYWN0LWFyaWEvdXRpbHMvZGlzdC9wYWNrYWdlcy9AcmVhY3QtYXJpYS91dGlscy9zcmMvY2hhaW4udHMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vQHJlYWN0LWFyaWErdXRpbHNAMy4xMy4xX3JlYWN0QDE4LjIuMC9ub2RlX21vZHVsZXMvQHJlYWN0LWFyaWEvdXRpbHMvZGlzdC9wYWNrYWdlcy9AcmVhY3QtYXJpYS91dGlscy9zcmMvbWVyZ2VQcm9wcy50cyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9AcmVhY3QtYXJpYSt1dGlsc0AzLjEzLjFfcmVhY3RAMTguMi4wL25vZGVfbW9kdWxlcy9AcmVhY3QtYXJpYS91dGlscy9kaXN0L3BhY2thZ2VzL0ByZWFjdC1hcmlhL3V0aWxzL3NyYy9tZXJnZVJlZnMudHMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vQHJlYWN0LWFyaWErdXRpbHNAMy4xMy4xX3JlYWN0QDE4LjIuMC9ub2RlX21vZHVsZXMvQHJlYWN0LWFyaWEvdXRpbHMvZGlzdC9wYWNrYWdlcy9AcmVhY3QtYXJpYS91dGlscy9zcmMvZmlsdGVyRE9NUHJvcHMudHMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vQHJlYWN0LWFyaWErdXRpbHNAMy4xMy4xX3JlYWN0QDE4LjIuMC9ub2RlX21vZHVsZXMvQHJlYWN0LWFyaWEvdXRpbHMvZGlzdC9wYWNrYWdlcy9AcmVhY3QtYXJpYS91dGlscy9zcmMvZm9jdXNXaXRob3V0U2Nyb2xsaW5nLnRzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0ByZWFjdC1hcmlhK3V0aWxzQDMuMTMuMV9yZWFjdEAxOC4yLjAvbm9kZV9tb2R1bGVzL0ByZWFjdC1hcmlhL3V0aWxzL2Rpc3QvcGFja2FnZXMvQHJlYWN0LWFyaWEvdXRpbHMvc3JjL2dldE9mZnNldC50cyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9AcmVhY3QtYXJpYSt1dGlsc0AzLjEzLjFfcmVhY3RAMTguMi4wL25vZGVfbW9kdWxlcy9AcmVhY3QtYXJpYS91dGlscy9kaXN0L3BhY2thZ2VzL0ByZWFjdC1hcmlhL3V0aWxzL3NyYy9ydW5BZnRlclRyYW5zaXRpb24udHMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vQHJlYWN0LWFyaWErdXRpbHNAMy4xMy4xX3JlYWN0QDE4LjIuMC9ub2RlX21vZHVsZXMvQHJlYWN0LWFyaWEvdXRpbHMvZGlzdC9wYWNrYWdlcy9AcmVhY3QtYXJpYS91dGlscy9zcmMvdXNlRHJhZzFELnRzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0ByZWFjdC1hcmlhK3V0aWxzQDMuMTMuMV9yZWFjdEAxOC4yLjAvbm9kZV9tb2R1bGVzL0ByZWFjdC1hcmlhL3V0aWxzL2Rpc3QvcGFja2FnZXMvQHJlYWN0LWFyaWEvdXRpbHMvc3JjL3VzZUdsb2JhbExpc3RlbmVycy50cyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9AcmVhY3QtYXJpYSt1dGlsc0AzLjEzLjFfcmVhY3RAMTguMi4wL25vZGVfbW9kdWxlcy9AcmVhY3QtYXJpYS91dGlscy9kaXN0L3BhY2thZ2VzL0ByZWFjdC1hcmlhL3V0aWxzL3NyYy91c2VMYWJlbHMudHMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vQHJlYWN0LWFyaWErdXRpbHNAMy4xMy4xX3JlYWN0QDE4LjIuMC9ub2RlX21vZHVsZXMvQHJlYWN0LWFyaWEvdXRpbHMvZGlzdC9wYWNrYWdlcy9AcmVhY3QtYXJpYS91dGlscy9zcmMvdXNlT2JqZWN0UmVmLnRzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0ByZWFjdC1hcmlhK3V0aWxzQDMuMTMuMV9yZWFjdEAxOC4yLjAvbm9kZV9tb2R1bGVzL0ByZWFjdC1hcmlhL3V0aWxzL2Rpc3QvcGFja2FnZXMvQHJlYWN0LWFyaWEvdXRpbHMvc3JjL3VzZVVwZGF0ZUVmZmVjdC50cyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9AcmVhY3QtYXJpYSt1dGlsc0AzLjEzLjFfcmVhY3RAMTguMi4wL25vZGVfbW9kdWxlcy9AcmVhY3QtYXJpYS91dGlscy9kaXN0L3BhY2thZ2VzL0ByZWFjdC1hcmlhL3V0aWxzL3NyYy91c2VSZXNpemVPYnNlcnZlci50cyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9AcmVhY3QtYXJpYSt1dGlsc0AzLjEzLjFfcmVhY3RAMTguMi4wL25vZGVfbW9kdWxlcy9AcmVhY3QtYXJpYS91dGlscy9kaXN0L3BhY2thZ2VzL0ByZWFjdC1hcmlhL3V0aWxzL3NyYy91c2VTeW5jUmVmLnRzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0ByZWFjdC1hcmlhK3V0aWxzQDMuMTMuMV9yZWFjdEAxOC4yLjAvbm9kZV9tb2R1bGVzL0ByZWFjdC1hcmlhL3V0aWxzL2Rpc3QvcGFja2FnZXMvQHJlYWN0LWFyaWEvdXRpbHMvc3JjL2dldFNjcm9sbFBhcmVudC50cyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9AcmVhY3QtYXJpYSt1dGlsc0AzLjEzLjFfcmVhY3RAMTguMi4wL25vZGVfbW9kdWxlcy9AcmVhY3QtYXJpYS91dGlscy9kaXN0L3BhY2thZ2VzL0ByZWFjdC1hcmlhL3V0aWxzL3NyYy91c2VWaWV3cG9ydFNpemUudHMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vQHJlYWN0LWFyaWErdXRpbHNAMy4xMy4xX3JlYWN0QDE4LjIuMC9ub2RlX21vZHVsZXMvQHJlYWN0LWFyaWEvdXRpbHMvZGlzdC9wYWNrYWdlcy9AcmVhY3QtYXJpYS91dGlscy9zcmMvdXNlRGVzY3JpcHRpb24udHMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vQHJlYWN0LWFyaWErdXRpbHNAMy4xMy4xX3JlYWN0QDE4LjIuMC9ub2RlX21vZHVsZXMvQHJlYWN0LWFyaWEvdXRpbHMvZGlzdC9wYWNrYWdlcy9AcmVhY3QtYXJpYS91dGlscy9zcmMvcGxhdGZvcm0udHMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vQHJlYWN0LWFyaWErdXRpbHNAMy4xMy4xX3JlYWN0QDE4LjIuMC9ub2RlX21vZHVsZXMvQHJlYWN0LWFyaWEvdXRpbHMvZGlzdC9wYWNrYWdlcy9AcmVhY3QtYXJpYS91dGlscy9zcmMvdXNlRXZlbnQudHMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vQHJlYWN0LWFyaWErdXRpbHNAMy4xMy4xX3JlYWN0QDE4LjIuMC9ub2RlX21vZHVsZXMvQHJlYWN0LWFyaWEvdXRpbHMvZGlzdC9wYWNrYWdlcy9AcmVhY3QtYXJpYS91dGlscy9zcmMvdXNlVmFsdWVFZmZlY3QudHMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vQHJlYWN0LWFyaWErdXRpbHNAMy4xMy4xX3JlYWN0QDE4LjIuMC9ub2RlX21vZHVsZXMvQHJlYWN0LWFyaWEvdXRpbHMvZGlzdC9wYWNrYWdlcy9AcmVhY3QtYXJpYS91dGlscy9zcmMvc2Nyb2xsSW50b1ZpZXcudHMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vQHJlYWN0LWFyaWEraW50ZXJhY3Rpb25zQDMuOS4xX3JlYWN0QDE4LjIuMC9ub2RlX21vZHVsZXMvQHJlYWN0LWFyaWEvaW50ZXJhY3Rpb25zL2Rpc3QvcGFja2FnZXMvQHJlYWN0LWFyaWEvaW50ZXJhY3Rpb25zL3NyYy90ZXh0U2VsZWN0aW9uLnRzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0ByZWFjdC1hcmlhK2ludGVyYWN0aW9uc0AzLjkuMV9yZWFjdEAxOC4yLjAvbm9kZV9tb2R1bGVzL0ByZWFjdC1hcmlhL2ludGVyYWN0aW9ucy9kaXN0L3BhY2thZ2VzL0ByZWFjdC1hcmlhL2ludGVyYWN0aW9ucy9zcmMvdXRpbHMudHMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vQHJlYWN0LWFyaWEraW50ZXJhY3Rpb25zQDMuOS4xX3JlYWN0QDE4LjIuMC9ub2RlX21vZHVsZXMvQHJlYWN0LWFyaWEvaW50ZXJhY3Rpb25zL2Rpc3QvcGFja2FnZXMvQHJlYWN0LWFyaWEvaW50ZXJhY3Rpb25zL3NyYy9jb250ZXh0LnRzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0ByZWFjdC1hcmlhK2ludGVyYWN0aW9uc0AzLjkuMV9yZWFjdEAxOC4yLjAvbm9kZV9tb2R1bGVzL0ByZWFjdC1hcmlhL2ludGVyYWN0aW9ucy9kaXN0L3BhY2thZ2VzL0ByZWFjdC1hcmlhL2ludGVyYWN0aW9ucy9zcmMvdXNlUHJlc3MudHMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vQHJlYWN0LWFyaWEraW50ZXJhY3Rpb25zQDMuOS4xX3JlYWN0QDE4LjIuMC9ub2RlX21vZHVsZXMvQHJlYWN0LWFyaWEvaW50ZXJhY3Rpb25zL2Rpc3QvcGFja2FnZXMvQHJlYWN0LWFyaWEvaW50ZXJhY3Rpb25zL3NyYy9QcmVzc2FibGUudHN4IiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0ByZWFjdC1hcmlhK2ludGVyYWN0aW9uc0AzLjkuMV9yZWFjdEAxOC4yLjAvbm9kZV9tb2R1bGVzL0ByZWFjdC1hcmlhL2ludGVyYWN0aW9ucy9kaXN0L3BhY2thZ2VzL0ByZWFjdC1hcmlhL2ludGVyYWN0aW9ucy9zcmMvUHJlc3NSZXNwb25kZXIudHN4IiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0ByZWFjdC1hcmlhK2ludGVyYWN0aW9uc0AzLjkuMV9yZWFjdEAxOC4yLjAvbm9kZV9tb2R1bGVzL0ByZWFjdC1hcmlhL2ludGVyYWN0aW9ucy9kaXN0L3BhY2thZ2VzL0ByZWFjdC1hcmlhL2ludGVyYWN0aW9ucy9zcmMvdXNlRm9jdXMudHMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vQHJlYWN0LWFyaWEraW50ZXJhY3Rpb25zQDMuOS4xX3JlYWN0QDE4LjIuMC9ub2RlX21vZHVsZXMvQHJlYWN0LWFyaWEvaW50ZXJhY3Rpb25zL2Rpc3QvcGFja2FnZXMvQHJlYWN0LWFyaWEvaW50ZXJhY3Rpb25zL3NyYy91c2VGb2N1c1Zpc2libGUudHMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vQHJlYWN0LWFyaWEraW50ZXJhY3Rpb25zQDMuOS4xX3JlYWN0QDE4LjIuMC9ub2RlX21vZHVsZXMvQHJlYWN0LWFyaWEvaW50ZXJhY3Rpb25zL2Rpc3QvcGFja2FnZXMvQHJlYWN0LWFyaWEvaW50ZXJhY3Rpb25zL3NyYy91c2VGb2N1c1dpdGhpbi50cyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9AcmVhY3QtYXJpYStpbnRlcmFjdGlvbnNAMy45LjFfcmVhY3RAMTguMi4wL25vZGVfbW9kdWxlcy9AcmVhY3QtYXJpYS9pbnRlcmFjdGlvbnMvZGlzdC9wYWNrYWdlcy9AcmVhY3QtYXJpYS9pbnRlcmFjdGlvbnMvc3JjL3VzZUhvdmVyLnRzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0ByZWFjdC1hcmlhK2ludGVyYWN0aW9uc0AzLjkuMV9yZWFjdEAxOC4yLjAvbm9kZV9tb2R1bGVzL0ByZWFjdC1hcmlhL2ludGVyYWN0aW9ucy9kaXN0L3BhY2thZ2VzL0ByZWFjdC1hcmlhL2ludGVyYWN0aW9ucy9zcmMvdXNlSW50ZXJhY3RPdXRzaWRlLnRzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0ByZWFjdC1hcmlhK2ludGVyYWN0aW9uc0AzLjkuMV9yZWFjdEAxOC4yLjAvbm9kZV9tb2R1bGVzL0ByZWFjdC1hcmlhL2ludGVyYWN0aW9ucy9kaXN0L3BhY2thZ2VzL0ByZWFjdC1hcmlhL2ludGVyYWN0aW9ucy9zcmMvY3JlYXRlRXZlbnRIYW5kbGVyLnRzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0ByZWFjdC1hcmlhK2ludGVyYWN0aW9uc0AzLjkuMV9yZWFjdEAxOC4yLjAvbm9kZV9tb2R1bGVzL0ByZWFjdC1hcmlhL2ludGVyYWN0aW9ucy9kaXN0L3BhY2thZ2VzL0ByZWFjdC1hcmlhL2ludGVyYWN0aW9ucy9zcmMvdXNlS2V5Ym9hcmQudHMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vQHJlYWN0LWFyaWEraW50ZXJhY3Rpb25zQDMuOS4xX3JlYWN0QDE4LjIuMC9ub2RlX21vZHVsZXMvQHJlYWN0LWFyaWEvaW50ZXJhY3Rpb25zL2Rpc3QvcGFja2FnZXMvQHJlYWN0LWFyaWEvaW50ZXJhY3Rpb25zL3NyYy91c2VNb3ZlLnRzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0ByZWFjdC1hcmlhK2ludGVyYWN0aW9uc0AzLjkuMV9yZWFjdEAxOC4yLjAvbm9kZV9tb2R1bGVzL0ByZWFjdC1hcmlhL2ludGVyYWN0aW9ucy9kaXN0L3BhY2thZ2VzL0ByZWFjdC1hcmlhL2ludGVyYWN0aW9ucy9zcmMvdXNlU2Nyb2xsV2hlZWwudHMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vQHJlYWN0LWFyaWEraW50ZXJhY3Rpb25zQDMuOS4xX3JlYWN0QDE4LjIuMC9ub2RlX21vZHVsZXMvQHJlYWN0LWFyaWEvaW50ZXJhY3Rpb25zL2Rpc3QvcGFja2FnZXMvQHJlYWN0LWFyaWEvaW50ZXJhY3Rpb25zL3NyYy91c2VMb25nUHJlc3MudHMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vQHJlYWN0LWFyaWErZm9jdXNAMy42LjFfcmVhY3RAMTguMi4wL25vZGVfbW9kdWxlcy9AcmVhY3QtYXJpYS9mb2N1cy9kaXN0L3BhY2thZ2VzL0ByZWFjdC1hcmlhL2ZvY3VzL3NyYy9mb2N1c1NhZmVseS50cyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9AcmVhY3QtYXJpYStmb2N1c0AzLjYuMV9yZWFjdEAxOC4yLjAvbm9kZV9tb2R1bGVzL0ByZWFjdC1hcmlhL2ZvY3VzL2Rpc3QvcGFja2FnZXMvQHJlYWN0LWFyaWEvZm9jdXMvc3JjL2lzRWxlbWVudFZpc2libGUudHMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vQHJlYWN0LWFyaWErZm9jdXNAMy42LjFfcmVhY3RAMTguMi4wL25vZGVfbW9kdWxlcy9AcmVhY3QtYXJpYS9mb2N1cy9kaXN0L3BhY2thZ2VzL0ByZWFjdC1hcmlhL2ZvY3VzL3NyYy9Gb2N1c1Njb3BlLnRzeCIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9AcmVhY3QtYXJpYStmb2N1c0AzLjYuMV9yZWFjdEAxOC4yLjAvbm9kZV9tb2R1bGVzL0ByZWFjdC1hcmlhL2ZvY3VzL2Rpc3QvcGFja2FnZXMvQHJlYWN0LWFyaWEvZm9jdXMvc3JjL3VzZUZvY3VzUmluZy50cyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9AcmVhY3QtYXJpYStmb2N1c0AzLjYuMV9yZWFjdEAxOC4yLjAvbm9kZV9tb2R1bGVzL0ByZWFjdC1hcmlhL2ZvY3VzL2Rpc3QvcGFja2FnZXMvQHJlYWN0LWFyaWEvZm9jdXMvc3JjL0ZvY3VzUmluZy50c3giLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vQHJlYWN0LWFyaWErZm9jdXNAMy42LjFfcmVhY3RAMTguMi4wL25vZGVfbW9kdWxlcy9AcmVhY3QtYXJpYS9mb2N1cy9kaXN0L3BhY2thZ2VzL0ByZWFjdC1hcmlhL2ZvY3VzL3NyYy91c2VGb2N1c2FibGUudHN4IiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0ByZWFjdC1hcmlhK2J1dHRvbkAzLjUuMV9yZWFjdEAxOC4yLjAvbm9kZV9tb2R1bGVzL0ByZWFjdC1hcmlhL2J1dHRvbi9kaXN0L3BhY2thZ2VzL0ByZWFjdC1hcmlhL2J1dHRvbi9zcmMvdXNlQnV0dG9uLnRzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0ByZWFjdC1hcmlhK2J1dHRvbkAzLjUuMV9yZWFjdEAxOC4yLjAvbm9kZV9tb2R1bGVzL0ByZWFjdC1hcmlhL2J1dHRvbi9kaXN0L3BhY2thZ2VzL0ByZWFjdC1hcmlhL2J1dHRvbi9zcmMvdXNlVG9nZ2xlQnV0dG9uLnRzIiwiLi4vLi4vc3JjL3N0eWxlcy50cyIsIi4uLy4uL3NyYy9idXR0b25Hcm91cC50c3giLCIuLi8uLi8uLi9za2F1aS11dGlscy9zcmMvZ2V0VmFsaWRDaGlsZHJlbi50cyIsIi4uLy4uL3NyYy9pbmRleC50cyJdLCJuYW1lcyI6WyJyZXF1aXJlX2NsYXNzbmFtZXMiLCJfX2NvbW1vbkpTTWluIiwiZXhwb3J0cyIsIm1vZHVsZSIsImhhc093biIsImNsYXNzTmFtZXMiLCJjbGFzc2VzIiwiaSIsImFyZyIsImFyZ1R5cGUiLCJpbm5lciIsImtleSIsIlJlYWN0IiwiZm9yd2FyZFJlZiIsInVzZVN0YXRlIiwidXNlUmVmIiwiJDcwNGNmMWQzYjY4NGNjNWMkdmFyJGRlZmF1bHRDb250ZXh0IiwiJDcwNGNmMWQzYjY4NGNjNWMkdmFyJFNTUkNvbnRleHQiLCIkODl5RTIkcmVhY3QiLCIkNzA0Y2YxZDNiNjg0Y2M1YyRleHBvcnQkOWY4YWM5NmFmNGIxYjJhZSIsInByb3BzIiwiY3VyIiwiJDg5eUUyJHVzZUNvbnRleHQiLCJ2YWx1ZSIsIiQ4OXlFMiR1c2VNZW1vIiwiJDcwNGNmMWQzYjY4NGNjNWMkdmFyJGNhblVzZURPTSIsIiQ3MDRjZjFkM2I2ODRjYzVjJGV4cG9ydCQ2MTk1MDA5NTlmYzQ4YjI2IiwiZGVmYXVsdElkIiwiY3R4IiwiJDcwNGNmMWQzYjY4NGNjNWMkZXhwb3J0JDUzNWJkNmNhN2Y5MGEyNzMiLCJpc0luU1NSQ29udGV4dCIsImlzU1NSIiwic2V0SXNTU1IiLCIkODl5RTIkdXNlU3RhdGUiLCIkODl5RTIkdXNlTGF5b3V0RWZmZWN0IiwiciIsImYiLCJjbHN4IiwiY2xzeF9tX2RlZmF1bHQiLCIkNDU4YjBhNTUzNmMxYTdjZiRleHBvcnQkNDBiZmE4YzdiMDgzMjcxNSIsInZhbHVlMSIsImRlZmF1bHRWYWx1ZSIsIm9uQ2hhbmdlIiwic3RhdGVWYWx1ZSIsInNldFN0YXRlVmFsdWUiLCIkNmltdWgkdXNlU3RhdGUiLCJyZWYiLCIkNmltdWgkdXNlUmVmIiwid2FzQ29udHJvbGxlZCIsImlzQ29udHJvbGxlZCIsInN0YXRlUmVmIiwic2V0VmFsdWUiLCIkNmltdWgkdXNlQ2FsbGJhY2siLCJ2YWx1ZTIiLCJhcmdzIiwib25DaGFuZ2VDYWxsZXIiLCJvbkNoYW5nZUFyZ3MiLCJvbGRWYWx1ZSIsImZ1bmN0aW9uQXJncyIsImludGVyY2VwdGVkVmFsdWUiLCIkOTQ0NmNjYTlhMzg3NTE0NiRleHBvcnQkN2QxNWI2NGNmNWEzYTRjNCIsIm1pbiIsIm1heCIsIiQ5NDQ2Y2NhOWEzODc1MTQ2JGV4cG9ydCRjYjZlMGJiNTBiYzE5NDYzIiwic3RlcCIsInJlbWFpbmRlciIsInNuYXBwZWRWYWx1ZSIsInN0cmluZyIsImluZGV4IiwicHJlY2lzaW9uIiwicG93IiwiJDk0NDZjY2E5YTM4NzUxNDYkZXhwb3J0JGI2MjY4NTU0ZmJhNDUxZiIsImRpZ2l0cyIsImJhc2UiLCIkZjBhMDRjY2Q4ZGJkZDgzYiRleHBvcnQkZTVjNWE1ZjkxN2E1ODcxYyIsIiQxMnVHcCRyZWFjdCIsIiRiZGIxMTAxMGNlZjcwMjM2JHZhciRpZHNVcGRhdGVyTWFwIiwiJGJkYjExMDEwY2VmNzAyMzYkZXhwb3J0JGY2ODA4NzdhMzQ3MTFlMzciLCIkMTJ1R3AkdXNlU3RhdGUiLCJuZXh0SWQiLCIkMTJ1R3AkdXNlUmVmIiwicmVzIiwidXBkYXRlVmFsdWUiLCIkMTJ1R3AkdXNlQ2FsbGJhY2siLCJ2YWwiLCIkMTJ1R3AkdXNlRWZmZWN0IiwibmV3SWQiLCIkYmRiMTEwMTBjZWY3MDIzNiRleHBvcnQkY2Q4YzljYjY4Zjg0MjYyOSIsImlkQSIsImlkQiIsInNldElkQSIsInNldElkQiIsIiRiZGIxMTAxMGNlZjcwMjM2JGV4cG9ydCRiNGNjMDljNTkyZThmZGI4IiwiZGVwQXJyYXkiLCJpZCIsInJlc29sdmVkSWQiLCJzZXRSZXNvbHZlZElkIiwiJDFkYmVjYmUyN2EwNGY5YWYkZXhwb3J0JDE0ZDIzOGYzNDI3MjNmMjUiLCJ1cGRhdGVJZCIsIiRmZjU5NjNlYjFmY2NmNTUyJGV4cG9ydCRlMDhlM2I2N2UzOTIxMDFlIiwiY2FsbGJhY2tzIiwiY2FsbGJhY2siLCIkM2VmNDI1NzVkZjg0YjMwYiRleHBvcnQkOWQxNjExYzc3YzJmZTkyOCIsInJlc3VsdCIsImEiLCJiIiwiJDVkYzk1ODk5YjMwNmY2MzAkZXhwb3J0JGM5MDU4MzE2NzY0YzE0MGUiLCJyZWZzIiwiJDY1NDg0ZDAyZGNiN2ViM2UkdmFyJERPTVByb3BOYW1lcyIsIiQ2NTQ4NGQwMmRjYjdlYjNlJHZhciRsYWJlbGFibGVQcm9wTmFtZXMiLCIkNjU0ODRkMDJkY2I3ZWIzZSR2YXIkcHJvcFJlIiwiJDY1NDg0ZDAyZGNiN2ViM2UkZXhwb3J0JDQ1N2MzZDY1MThkZDRjNmYiLCJvcHRzIiwibGFiZWxhYmxlIiwicHJvcE5hbWVzIiwiZmlsdGVyZWRQcm9wcyIsInByb3AiLCIkNzIxNWFmYzZkZTYwNmQ2YiRleHBvcnQkZGU3OWUyYzY5NWUwNTJmMyIsImVsZW1lbnQiLCIkNzIxNWFmYzZkZTYwNmQ2YiR2YXIkc3VwcG9ydHNQcmV2ZW50U2Nyb2xsIiwic2Nyb2xsYWJsZUVsZW1lbnRzIiwiJDcyMTVhZmM2ZGU2MDZkNmIkdmFyJGdldFNjcm9sbGFibGVFbGVtZW50cyIsIiQ3MjE1YWZjNmRlNjA2ZDZiJHZhciRyZXN0b3JlU2Nyb2xsUG9zaXRpb24iLCIkNzIxNWFmYzZkZTYwNmQ2YiR2YXIkc3VwcG9ydHNQcmV2ZW50U2Nyb2xsQ2FjaGVkIiwiZm9jdXNFbGVtIiwicGFyZW50Iiwicm9vdFNjcm9sbGluZ0VsZW1lbnQiLCJzY3JvbGxUb3AiLCJzY3JvbGxMZWZ0IiwiJGFiNzFkYWRiMDNhNmZiMmUkZXhwb3J0JDYyMmNlYTQ0NWExYzViN2QiLCJyZXZlcnNlIiwib3JpZW50YXRpb24iLCJyZWN0IiwiJGJiZWQ4YjQxZjg1N2JjYzAkdmFyJHRyYW5zaXRpb25zQnlFbGVtZW50IiwiJGJiZWQ4YjQxZjg1N2JjYzAkdmFyJHRyYW5zaXRpb25DYWxsYmFja3MiLCIkYmJlZDhiNDFmODU3YmNjMCR2YXIkc2V0dXBHbG9iYWxFdmVudHMiLCJvblRyYW5zaXRpb25TdGFydCIsImUiLCJ0cmFuc2l0aW9ucyIsIm9uVHJhbnNpdGlvbkVuZCIsInByb3BlcnRpZXMiLCJjYiIsIiRiYmVkOGI0MWY4NTdiY2MwJGV4cG9ydCQyNDQ5MDMxNmY3NjRjNDMwIiwiZm4iLCIkOWNjMDlkZjlmZDc2NzZiZSR2YXIkZHJhZ2dpbmdFbGVtZW50cyIsIiQ5Y2MwOWRmOWZkNzY3NmJlJGV4cG9ydCQ3YmJlZDc1ZmViYTM5NzA2IiwiY29udGFpbmVyUmVmIiwib25Ib3ZlciIsIm9uRHJhZyIsIm9uUG9zaXRpb25DaGFuZ2UiLCJvbkluY3JlbWVudCIsIm9uRGVjcmVtZW50Iiwib25JbmNyZW1lbnRUb01heCIsIm9uRGVjcmVtZW50VG9NaW4iLCJvbkNvbGxhcHNlVG9nZ2xlIiwiZ2V0UG9zaXRpb24iLCJnZXROZXh0T2Zmc2V0IiwiY29udGFpbmVyT2Zmc2V0IiwibW91c2VPZmZzZXQiLCJkcmFnZ2luZyIsInByZXZQb3NpdGlvbiIsImhhbmRsZXJzIiwib25Nb3VzZURyYWdnZWQiLCJuZXh0T2Zmc2V0Iiwib25Nb3VzZVVwIiwidGFyZ2V0IiwiZWx0IiwiJDAzZGViMjNmZjE0OTIwYzQkZXhwb3J0JDRlYWYwNGU1NGFhOGVlZDYiLCJnbG9iYWxMaXN0ZW5lcnMiLCJhZGRHbG9iYWxMaXN0ZW5lciIsImV2ZW50VGFyZ2V0IiwidHlwZSIsImxpc3RlbmVyIiwib3B0aW9ucyIsInJlbW92ZUdsb2JhbExpc3RlbmVyIiwicmVtb3ZlQWxsR2xvYmFsTGlzdGVuZXJzIiwiJDMxM2I5ODg2MWVlNWRkNmMkZXhwb3J0JGQ2ODc1MTIyMTk0YzdiNDQiLCJkZWZhdWx0TGFiZWwiLCJsYWJlbCIsImxhYmVsbGVkQnkiLCIkZGY1NjE2NGRmZjU3ODVlMiRleHBvcnQkNDMzOGI1MzMxNWFiZjY2NiIsImZvcndhcmRlZFJlZiIsIm9ialJlZiIsIiQ0ZjU4YzVmNzJiY2Y3OWY3JGV4cG9ydCQ0OTYzMTVhMTYwOGQ5NjAyIiwiZWZmZWN0IiwiZGVwZW5kZW5jaWVzIiwiaXNJbml0aWFsTW91bnQiLCIkOWRhYWIwMmQ0NjE4MDlkYiR2YXIkaGFzUmVzaXplT2JzZXJ2ZXIiLCIkOWRhYWIwMmQ0NjE4MDlkYiRleHBvcnQkNjgzNDgwZjE5MWMwZTNlYSIsIm9uUmVzaXplIiwicmVzaXplT2JzZXJ2ZXJJbnN0YW5jZSIsImVudHJpZXMiLCIkZTc4MDFiZTgyYjRiMmE1MyRleHBvcnQkNGRlYmRiMWEzZjBmYTc5ZSIsImNvbnRleHQiLCIkNjJkOGRlZDkyOTZmMzg3MiRleHBvcnQkY2ZhMjIyNWU4NzkzODc4MSIsIm5vZGUiLCIkNjJkOGRlZDkyOTZmMzg3MiR2YXIkaXNTY3JvbGxhYmxlIiwic3R5bGUiLCIkNWRmNjRiMzgwN2RjMTVlZSR2YXIkdmlzdWFsVmlld3BvcnQiLCIkNWRmNjRiMzgwN2RjMTVlZSRleHBvcnQkZDY5OTkwNWRkNTdjNzNjYSIsInNpemUxIiwic2V0U2l6ZSIsIiQ1ZGY2NGIzODA3ZGMxNWVlJHZhciRnZXRWaWV3cG9ydFNpemUiLCJzaXplIiwibmV3U2l6ZSIsIiRlZjA2MjU2MDc5Njg2YmEwJHZhciRkZXNjcmlwdGlvbklkIiwiJGVmMDYyNTYwNzk2ODZiYTAkdmFyJGRlc2NyaXB0aW9uTm9kZXMiLCIkZWYwNjI1NjA3OTY4NmJhMCRleHBvcnQkZjhhZWRhN2IxMDc1M2ZhMSIsImRlc2NyaXB0aW9uIiwiaWQxIiwic2V0SWQiLCJkZXNjIiwiJGM4NzMxMTQyNGVhMzBhMDUkdmFyJHRlc3RVc2VyQWdlbnQiLCJyZSIsImJyYW5kIiwiJGM4NzMxMTQyNGVhMzBhMDUkdmFyJHRlc3RQbGF0Zm9ybSIsIiRjODczMTE0MjRlYTMwYTA1JGV4cG9ydCQ5YWMxMDBlNDA2MTNlYTEwIiwiJGM4NzMxMTQyNGVhMzBhMDUkZXhwb3J0JDE4NmM2OTY0Y2ExN2Q5OSIsIiRjODczMTE0MjRlYTMwYTA1JGV4cG9ydCQ3YmVmMDQ5Y2U5MmU0MjI0IiwiJGM4NzMxMTQyNGVhMzBhMDUkZXhwb3J0JGZlZGIzNjljYjcwMjA3ZjEiLCIkYzg3MzExNDI0ZWEzMGEwNSRleHBvcnQkZTE4NjVjM2JlZGNkODIyYiIsIiRjODczMTE0MjRlYTMwYTA1JGV4cG9ydCQ3ODU1MTA0MzU4MmE2YTk4IiwiJGM4NzMxMTQyNGVhMzBhMDUkZXhwb3J0JDY0NDZhMTg2ZDA5ZTM3OWUiLCIkYzg3MzExNDI0ZWEzMGEwNSRleHBvcnQkYTExYjAwNTk5MDBjZWVjOCIsIiRlOWZhYWZiNjQxZTE2N2RiJGV4cG9ydCQ5MGZjM2ExN2Q5M2Y3MDRjIiwiZXZlbnQiLCJoYW5kbGVyMSIsImhhbmRsZXJSZWYiLCJpc0Rpc2FibGVkIiwiaGFuZGxlciIsInZhbHVlUmVmIiwibmV4dFJlZiIsIm5ld1ZhbHVlIiwicXVldWUiLCIkMmYwNGNiYzQ0ZWUzMGNlMCRleHBvcnQkNTNhMDkxMGYwMzgzMzdiZCIsInNjcm9sbFZpZXciLCJvZmZzZXRYIiwiJDJmMDRjYmM0NGVlMzBjZTAkdmFyJHJlbGF0aXZlT2Zmc2V0Iiwib2Zmc2V0WSIsIndpZHRoIiwiaGVpZ2h0IiwieCIsInkiLCJtYXhYIiwibWF4WSIsImFuY2VzdG9yIiwiY2hpbGQiLCJheGlzIiwic3VtIiwiJDE0YzBiNzI1MDlkNzAyMjUkdmFyJHN0YXRlIiwiJDE0YzBiNzI1MDlkNzAyMjUkdmFyJHNhdmVkVXNlclNlbGVjdCIsIiQxNGMwYjcyNTA5ZDcwMjI1JHZhciRtb2RpZmllZEVsZW1lbnRNYXAiLCIkMTRjMGI3MjUwOWQ3MDIyNSRleHBvcnQkMTZhNDY5NzQ2NzE3NTQ4NyIsIiQxNGMwYjcyNTA5ZDcwMjI1JGV4cG9ydCRiMGQ2ZmExYWIzMmUzMjk1IiwidGFyZ2V0T2xkVXNlclNlbGVjdCIsIiQ4YTljYjI3OWRjODdlMTMwJGV4cG9ydCQ2MDI3ODg3MTQ1NzYyMmRlIiwiJDhhOWNiMjc5ZGM4N2UxMzAkZXhwb3J0JDkwNWU3ZmM1NDRhNzFmMzYiLCJuYXRpdmVFdmVudCIsIiQ4YTljYjI3OWRjODdlMTMwJGV4cG9ydCQ3MTVjNjgyZDA5ZDYzOWNjIiwib25CbHVyIiwiJGJ4N1NMJHVzZVJlZiIsInN0YXRlIiwiJGJ4N1NMJHVzZUNhbGxiYWNrIiwiZTEiLCJvbkJsdXJIYW5kbGVyIiwiX2N1cnJlbnQiLCIkYWUxZWViYThiOWVhZmQwOCRleHBvcnQkNTE2NWVjY2IzNWFhYWRiNSIsIiRieDdTTCRyZWFjdCIsIiRmNmMzMWNjZTJhZGY2NTRmJHZhciR1c2VQcmVzc1Jlc3BvbmRlckNvbnRleHQiLCIkYng3U0wkdXNlQ29udGV4dCIsInJlZ2lzdGVyIiwiY29udGV4dFByb3BzIiwiJGY2YzMxY2NlMmFkZjY1NGYkZXhwb3J0JDQ1NzEyZWNlZGE2ZmFkMjEiLCJvblByZXNzMSIsIm9uUHJlc3NDaGFuZ2UxIiwib25QcmVzc1N0YXJ0MSIsIm9uUHJlc3NFbmQxIiwib25QcmVzc1VwMSIsImlzRGlzYWJsZWQxIiwiaXNQcmVzc2VkUHJvcCIsInByZXZlbnRGb2N1c09uUHJlc3MiLCJzaG91bGRDYW5jZWxPblBvaW50ZXJFeGl0IiwiYWxsb3dUZXh0U2VsZWN0aW9uT25QcmVzcyIsIl8iLCJkb21Qcm9wcyIsInByb3BzUmVmIiwiaXNQcmVzc2VkIiwic2V0UHJlc3NlZCIsIiRieDdTTCR1c2VTdGF0ZSIsInByZXNzUHJvcHMxIiwiJGJ4N1NMJHVzZU1lbW8iLCJ0cmlnZ2VyUHJlc3NTdGFydCIsIm9yaWdpbmFsRXZlbnQiLCJwb2ludGVyVHlwZSIsIm9uUHJlc3NTdGFydCIsIm9uUHJlc3NDaGFuZ2UiLCJ0cmlnZ2VyUHJlc3NFbmQiLCJ3YXNQcmVzc2VkIiwib25QcmVzc0VuZCIsIm9uUHJlc3MiLCJ0cmlnZ2VyUHJlc3NVcCIsIm9uUHJlc3NVcCIsImNhbmNlbCIsIiRmNmMzMWNjZTJhZGY2NTRmJHZhciRjcmVhdGVFdmVudCIsInByZXNzUHJvcHMiLCIkZjZjMzFjY2UyYWRmNjU0ZiR2YXIkaXNWYWxpZEtleWJvYXJkRXZlbnQiLCIkZjZjMzFjY2UyYWRmNjU0ZiR2YXIkc2hvdWxkUHJldmVudERlZmF1bHRLZXlib2FyZCIsIm9uS2V5VXAiLCIkZjZjMzFjY2UyYWRmNjU0ZiR2YXIkaXNIVE1MQW5jaG9yTGluayIsIiRmNmMzMWNjZTJhZGY2NTRmJHZhciRpc1ZpcnR1YWxQb2ludGVyRXZlbnQiLCIkZjZjMzFjY2UyYWRmNjU0ZiR2YXIkc2hvdWxkUHJldmVudERlZmF1bHQiLCJvblBvaW50ZXJNb3ZlIiwib25Qb2ludGVyVXAiLCJvblBvaW50ZXJDYW5jZWwiLCIkZjZjMzFjY2UyYWRmNjU0ZiR2YXIkaXNPdmVyVGFyZ2V0IiwidG91Y2giLCIkZjZjMzFjY2UyYWRmNjU0ZiR2YXIkZ2V0VG91Y2hGcm9tRXZlbnQiLCJvblNjcm9sbCIsIiRmNmMzMWNjZTJhZGY2NTRmJHZhciRnZXRUb3VjaEJ5SWQiLCIkYng3U0wkdXNlRWZmZWN0IiwiY29kZSIsInRhZ05hbWUiLCJpc0NvbnRlbnRFZGl0YWJsZSIsInJvbGUiLCJ0YXJnZXRUb3VjaGVzIiwicG9pbnRlcklkIiwiY2hhbmdlZFRvdWNoZXMiLCIkZjZjMzFjY2UyYWRmNjU0ZiR2YXIkZ2V0UG9pbnRDbGllbnRSZWN0IiwicG9pbnQiLCIkZjZjMzFjY2UyYWRmNjU0ZiR2YXIkYXJlUmVjdGFuZ2xlc092ZXJsYXBwaW5nIiwicG9pbnRSZWN0IiwiJDNiMTE3ZTQzZGMwY2E5NWQkZXhwb3J0JDI3YzcwMWVkOWU0NDllOTkiLCJjaGlsZHJlbiIsIm5ld1JlZiIsIiRmMWFiOGM3NTQ3OGM2ZjczJGV4cG9ydCQzMzUxODcxZWU0YjI4OGI4IiwiaXNSZWdpc3RlcmVkIiwicHJldkNvbnRleHQiLCIkYTFlYTU5ZDY4MjcwZjBkZCRleHBvcnQkZjgxNjhkOGRkOGZkNjZlNiIsIm9uRm9jdXNQcm9wIiwib25CbHVyUHJvcCIsIm9uRm9jdXNDaGFuZ2UiLCJvblN5bnRoZXRpY0ZvY3VzIiwib25Gb2N1cyIsIiQ1MDdmYWJlMTBlNzFjNmZiJHZhciRjdXJyZW50TW9kYWxpdHkiLCIkNTA3ZmFiZTEwZTcxYzZmYiR2YXIkY2hhbmdlSGFuZGxlcnMiLCIkNTA3ZmFiZTEwZTcxYzZmYiR2YXIkaGFzU2V0dXBHbG9iYWxMaXN0ZW5lcnMiLCIkNTA3ZmFiZTEwZTcxYzZmYiR2YXIkaGFzRXZlbnRCZWZvcmVGb2N1cyIsIiQ1MDdmYWJlMTBlNzFjNmZiJHZhciRoYXNCbHVycmVkV2luZG93UmVjZW50bHkiLCIkNTA3ZmFiZTEwZTcxYzZmYiR2YXIkRk9DVVNfVklTSUJMRV9JTlBVVF9LRVlTIiwiJDUwN2ZhYmUxMGU3MWM2ZmIkdmFyJHRyaWdnZXJDaGFuZ2VIYW5kbGVycyIsIm1vZGFsaXR5IiwiJDUwN2ZhYmUxMGU3MWM2ZmIkdmFyJGlzVmFsaWRLZXkiLCIkNTA3ZmFiZTEwZTcxYzZmYiR2YXIkaGFuZGxlS2V5Ym9hcmRFdmVudCIsIiQ1MDdmYWJlMTBlNzFjNmZiJHZhciRoYW5kbGVQb2ludGVyRXZlbnQiLCIkNTA3ZmFiZTEwZTcxYzZmYiR2YXIkaGFuZGxlQ2xpY2tFdmVudCIsIiQ1MDdmYWJlMTBlNzFjNmZiJHZhciRoYW5kbGVGb2N1c0V2ZW50IiwiJDUwN2ZhYmUxMGU3MWM2ZmIkdmFyJGhhbmRsZVdpbmRvd0JsdXIiLCIkNTA3ZmFiZTEwZTcxYzZmYiR2YXIkc2V0dXBHbG9iYWxGb2N1c0V2ZW50cyIsImZvY3VzIiwiJDUwN2ZhYmUxMGU3MWM2ZmIkZXhwb3J0JGI5YjNkZmRkYWIxN2RiMjciLCIkNTA3ZmFiZTEwZTcxYzZmYiRleHBvcnQkNjMwZmY2NTNjNWFkYTZhOSIsIiQ1MDdmYWJlMTBlNzFjNmZiJGV4cG9ydCQ4Mzk3ZGRmYzUwNGZkYjlhIiwiJDUwN2ZhYmUxMGU3MWM2ZmIkZXhwb3J0JDk4ZTIwZWM5MmY2MTRjZmUiLCJzZXRNb2RhbGl0eSIsIiQ1MDdmYWJlMTBlNzFjNmZiJHZhciRpc0tleWJvYXJkRm9jdXNFdmVudCIsImlzVGV4dElucHV0IiwiJDUwN2ZhYmUxMGU3MWM2ZmIkZXhwb3J0JGZmZDllNTAyMWMxZmIyZDYiLCJhdXRvRm9jdXMiLCJpc0ZvY3VzVmlzaWJsZVN0YXRlIiwic2V0Rm9jdXNWaXNpYmxlIiwiJDUwN2ZhYmUxMGU3MWM2ZmIkZXhwb3J0JGVjNzFiNGI4M2FjMDhlYzMiLCJkZXBzIiwiJDlhYjk0MjYyYmQwMDQ3YzckZXhwb3J0JDQyMGU2ODI3MzE2NWY0ZWMiLCJvbkJsdXJXaXRoaW4iLCJvbkZvY3VzV2l0aGluIiwib25Gb2N1c1dpdGhpbkNoYW5nZSIsIiQ2MTc5YjkzNjcwNWU3NmQzJHZhciRnbG9iYWxJZ25vcmVFbXVsYXRlZE1vdXNlRXZlbnRzIiwiJDYxNzliOTM2NzA1ZTc2ZDMkdmFyJGhvdmVyQ291bnQiLCIkNjE3OWI5MzY3MDVlNzZkMyR2YXIkc2V0R2xvYmFsSWdub3JlRW11bGF0ZWRNb3VzZUV2ZW50cyIsIiQ2MTc5YjkzNjcwNWU3NmQzJHZhciRoYW5kbGVHbG9iYWxQb2ludGVyRXZlbnQiLCIkNjE3OWI5MzY3MDVlNzZkMyR2YXIkc2V0dXBHbG9iYWxUb3VjaEV2ZW50cyIsIiQ2MTc5YjkzNjcwNWU3NmQzJGV4cG9ydCRhZTc4MGRhZjI5ZTZkNDU2Iiwib25Ib3ZlclN0YXJ0Iiwib25Ib3ZlckNoYW5nZSIsIm9uSG92ZXJFbmQiLCJpc0hvdmVyZWQiLCJzZXRIb3ZlcmVkIiwiaG92ZXJQcm9wczEiLCJ0cmlnZ2VySG92ZXJFbmQxIiwidHJpZ2dlckhvdmVyU3RhcnQiLCJ0cmlnZ2VySG92ZXJFbmQiLCJob3ZlclByb3BzIiwiJGUwYjZlMGI2OGVjN2Y1MGYkZXhwb3J0JDg3MmI2NjBhYzVhMWZmOTgiLCJvbkludGVyYWN0T3V0c2lkZSIsIm9uSW50ZXJhY3RPdXRzaWRlU3RhcnQiLCJvblBvaW50ZXJEb3duIiwiJGUwYjZlMGI2OGVjN2Y1MGYkdmFyJGlzVmFsaWRFdmVudCIsIm9uVG91Y2hFbmQiLCJvd25lckRvY3VtZW50IiwiJDkzOTI1MDgzZWNiYjM1OGMkZXhwb3J0JDQ4ZDFlYTYzMjA4MzAyNjAiLCJzaG91bGRTdG9wUHJvcGFnYXRpb24iLCIkNDZkODE5ZmNiYWYzNTY1NCRleHBvcnQkOGY3MTY1NDgwMWMyZjdjZCIsIiRlOGE3MDIyY2Y4N2NiYTJhJGV4cG9ydCQzNmRhOTYzNzlmNzlmMjQ1Iiwib25Nb3ZlU3RhcnQiLCJvbk1vdmUiLCJvbk1vdmVFbmQiLCJtb3ZlUHJvcHMiLCJzdGFydCIsIm1vdmUiLCJkZWx0YVgiLCJkZWx0YVkiLCJlbmQiLCJvbk1vdXNlTW92ZSIsIm9uVG91Y2hNb3ZlIiwiaWRlbnRpZmllciIsInBhZ2VYIiwicGFnZVkiLCJ0cmlnZ2VyS2V5Ym9hcmRNb3ZlIiwiJDdkMGE2MzZkN2E0ZGNlZmQkZXhwb3J0JDIxMjNmZjJiODdjODFjYSIsIm9uU2Nyb2xsSGFuZGxlciIsIiQ4YTI2NTYxZDI4NzcyMzZlJHZhciRERUZBVUxUX1RIUkVTSE9MRCIsIiQ4YTI2NTYxZDI4NzcyMzZlJGV4cG9ydCRjMjRlZDAxMDRkMDdlYWI5Iiwib25Mb25nUHJlc3NTdGFydCIsIm9uTG9uZ1ByZXNzRW5kIiwib25Mb25nUHJlc3MiLCJ0aHJlc2hvbGQiLCJhY2Nlc3NpYmlsaXR5RGVzY3JpcHRpb24iLCJ0aW1lUmVmIiwib25Db250ZXh0TWVudSIsImRlc2NyaXB0aW9uUHJvcHMiLCIkNmE5OTE5NTMzMmVkZWM4YiRleHBvcnQkODBmM2UxNDdkNzgxNTcxYyIsImxhc3RGb2N1c2VkRWxlbWVudCIsIiQ2NDVmMmU2N2I4NWEyNGM5JHZhciRpc1N0eWxlVmlzaWJsZSIsImRpc3BsYXkiLCJ2aXNpYmlsaXR5IiwiaXNWaXNpYmxlIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImNvbXB1dGVkRGlzcGxheSIsImNvbXB1dGVkVmlzaWJpbGl0eSIsIiQ2NDVmMmU2N2I4NWEyNGM5JHZhciRpc0F0dHJpYnV0ZVZpc2libGUiLCJjaGlsZEVsZW1lbnQiLCIkNjQ1ZjJlNjdiODVhMjRjOSRleHBvcnQkZTk4OWMwZmZmYWE2YjI3YSIsIiQ5YmY3MWVhMjg3OTNlNzM4JHZhciRGb2N1c0NvbnRleHQiLCIkNm5mRkMkcmVhY3QiLCIkOWJmNzFlYTI4NzkzZTczOCR2YXIkYWN0aXZlU2NvcGUiLCIkOWJmNzFlYTI4NzkzZTczOCR2YXIkc2NvcGVzIiwiJDliZjcxZWEyODc5M2U3MzgkZXhwb3J0JDIwZTQwMjg5NjQxZmJiYjYiLCJjb250YWluIiwicmVzdG9yZUZvY3VzIiwic3RhcnRSZWYiLCIkNm5mRkMkdXNlUmVmIiwiZW5kUmVmIiwic2NvcGVSZWYiLCIkNm5mRkMkdXNlQ29udGV4dCIsInBhcmVudFNjb3BlIiwibm9kZXMiLCIkOWJmNzFlYTI4NzkzZTczOCR2YXIkaXNBbmNlc3RvclNjb3BlIiwiJDliZjcxZWEyODc5M2U3MzgkdmFyJHVzZUZvY3VzQ29udGFpbm1lbnQiLCIkOWJmNzFlYTI4NzkzZTczOCR2YXIkdXNlUmVzdG9yZUZvY3VzIiwiJDliZjcxZWEyODc5M2U3MzgkdmFyJHVzZUF1dG9Gb2N1cyIsImZvY3VzTWFuYWdlciIsIiQ5YmY3MWVhMjg3OTNlNzM4JHZhciRjcmVhdGVGb2N1c01hbmFnZXJGb3JTY29wZSIsIiQ5YmY3MWVhMjg3OTNlNzM4JGV4cG9ydCQxMGM1MTY5NzU1Y2U3YmQ3Iiwic2NvcGUiLCJmcm9tIiwidGFiYmFibGUiLCJ3cmFwIiwic2VudGluZWwiLCJ3YWxrZXIiLCIkOWJmNzFlYTI4NzkzZTczOCRleHBvcnQkMmQ2ZWM4ZmMzNzVjZWFmYSIsIiQ5YmY3MWVhMjg3OTNlNzM4JHZhciRnZXRTY29wZVJvb3QiLCIkOWJmNzFlYTI4NzkzZTczOCR2YXIkaXNFbGVtZW50SW5TY29wZSIsIm5leHROb2RlIiwiJDliZjcxZWEyODc5M2U3MzgkdmFyJGZvY3VzRWxlbWVudCIsInByZXZpb3VzTm9kZSIsIiQ5YmY3MWVhMjg3OTNlNzM4JHZhciRmb2N1c2FibGVFbGVtZW50cyIsIiQ5YmY3MWVhMjg3OTNlNzM4JHZhciRGT0NVU0FCTEVfRUxFTUVOVF9TRUxFQ1RPUiIsIiQ5YmY3MWVhMjg3OTNlNzM4JHZhciRUQUJCQUJMRV9FTEVNRU5UX1NFTEVDVE9SIiwiZm9jdXNlZE5vZGUiLCJyYWYiLCJzY29wZTEiLCJvbktleURvd24iLCJmb2N1c2VkRWxlbWVudCIsIm5leHRFbGVtZW50IiwiJDliZjcxZWEyODc5M2U3MzgkdmFyJGlzRWxlbWVudEluQ2hpbGRTY29wZSIsIiQ5YmY3MWVhMjg3OTNlNzM4JHZhciRmb2N1c0ZpcnN0SW5TY29wZSIsIiQ2bmZGQyR1c2VFZmZlY3QiLCIkOWJmNzFlYTI4NzkzZTczOCR2YXIkaXNFbGVtZW50SW5BbnlTY29wZSIsInMiLCJzY3JvbGwiLCJhdXRvRm9jdXNSZWYiLCJub2RlVG9SZXN0b3JlUmVmIiwibm9kZVRvUmVzdG9yZSIsInJvb3QiLCJzZWxlY3RvciIsIiQ5YmY3MWVhMjg3OTNlNzM4JGV4cG9ydCRjNTI1MWI5ZTEyNGJmMjkiLCJkZWZhdWx0T3B0aW9ucyIsImFjY2VwdCIsIm5leHQiLCIkOWJmNzFlYTI4NzkzZTczOCR2YXIkbGFzdCIsImxhc3QiLCIkZjdkY2VmZmM1YWQ3NzY4YiRleHBvcnQkNGUzMjhmNjFjNTM4Njg3ZiIsIndpdGhpbiIsImlzRm9jdXNlZDEiLCJzZXRGb2N1c2VkIiwiJDZuZkZDJHVzZVN0YXRlIiwidXBkYXRlU3RhdGUiLCIkNm5mRkMkdXNlQ2FsbGJhY2siLCJpc0ZvY3VzZWQiLCJpc0ZvY3VzVmlzaWJsZSIsImZvY3VzUHJvcHMiLCJmb2N1c1dpdGhpblByb3BzIiwiJDkwNzcxODcwOGVhYjY4YWYkZXhwb3J0JDFhMzhiNGFkN2Y1NzhlMWQiLCJmb2N1c0NsYXNzIiwiZm9jdXNSaW5nQ2xhc3MiLCIkZTZhZmJkODNmZTZlYmJkMiR2YXIkRm9jdXNhYmxlQ29udGV4dCIsIiRlNmFmYmQ4M2ZlNmViYmQyJHZhciR1c2VGb2N1c2FibGVDb250ZXh0Iiwib3RoZXJQcm9wcyIsIiRlNmFmYmQ4M2ZlNmViYmQyJHZhciRGb2N1c2FibGVQcm92aWRlciIsIiRlNmFmYmQ4M2ZlNmViYmQyJGV4cG9ydCQxM2YzMjAyYTNlNWRkZDUiLCIkZTZhZmJkODNmZTZlYmJkMiRleHBvcnQkNGMwMTRkZTdjODk0MGI0YyIsImRvbVJlZiIsImtleWJvYXJkUHJvcHMiLCJpbnRlcmFjdGlvbnMiLCJpbnRlcmFjdGlvblByb3BzIiwiJDcwMWEyNGFhMGRhNWIwNjIkZXhwb3J0JGVhMThjMjI3ZDQ0MTdjYzMiLCJlbGVtZW50VHlwZSIsImFsbG93Rm9jdXNXaGVuRGlzYWJsZWQiLCJkZXByZWNhdGVkT25DbGljayIsImhyZWYiLCJyZWwiLCJhZGRpdGlvbmFsUHJvcHMiLCJmb2N1c2FibGVQcm9wcyIsImJ1dHRvblByb3BzIiwiJDU1ZjU0Zjc4ODc0NzFiNTgkZXhwb3J0JDUxZTg0ZDQ2Y2EwYmM0NTEiLCJpc1NlbGVjdGVkIiwiaW1wb3J0X2NsYXNzbmFtZXMiLCJ1c2VCdXR0b25DbGFzcyIsInZhcmlhbnQiLCJkaXNhYmxlZCIsImxvYWRpbmciLCJyb3VuZGVkIiwidmFyaWFudHMiLCJ0eXBlcyIsInNpemVzIiwiY3giLCJCdXR0b24iLCJleHRSZWYiLCJibG9jayIsImNvbG9yIiwiZm9jdXNhZnRlcmNsaWNrIiwiaWNvbiIsIm5vdGlmaWNhdGlvbiIsImNsYXNzTmFtZSIsIm9uQ2xpY2siLCJyZXN0IiwiYnV0dG9uUmVmIiwiYnV0dG9uX2RlZmF1bHQiLCJnZXRWYWxpZENoaWxkcmVuIiwiQnV0dG9uR3JvdXAiLCJhdHRhY2hlZCIsImNvcGllcyIsImJ1dHRvbkdyb3VwX2RlZmF1bHQiXSwibWFwcGluZ3MiOiIwaEJBQUEsSUFBQUEsR0FBQUMsR0FBQSxDQUFBQyxHQUFBQyxLQUFBLEVBT0MsVUFBWSxDQUNaLGFBRUEsSUFBSUMsRUFBUyxDQUFDLEVBQUUsZUFFaEIsU0FBU0MsR0FBYSxDQUdyQixRQUZJQyxFQUFVLENBQUMsRUFFTkMsRUFBSSxFQUFHQSxFQUFJLFVBQVUsT0FBUUEsSUFBSyxDQUMxQyxJQUFJQyxFQUFNLFVBQVVELEdBQ3BCLEdBQUksRUFBQ0MsRUFFTCxLQUFJQyxFQUFVLE9BQU9ELEVBRXJCLEdBQUlDLElBQVksVUFBWUEsSUFBWSxTQUN2Q0gsRUFBUSxLQUFLRSxDQUFHLFVBQ04sTUFBTSxRQUFRQSxDQUFHLEdBQzNCLEdBQUlBLEVBQUksT0FBUSxDQUNmLElBQUlFLEVBQVFMLEVBQVcsTUFBTSxLQUFNRyxDQUFHLEVBQ2xDRSxHQUNISixFQUFRLEtBQUtJLENB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QUF6QyxTQUNWLFlBQ0EyaUIsR0FBWSxxQkFDWm5CLEdBQVcsb0JBQ1hZLENBQ0QsRUFDQyxHQUFHRSxHQUNITSxDQUNGLENBRUYsQ0FDRCxFQUNBRixHQUFZLFlBQWMsY0FFMUIsSUFBT0csR0FBUUgsR0V4Q2YsSUFBTWIsR0FBU1csR0FFZlgsR0FBTyxNQUFRZ0IiLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAgQ29weXJpZ2h0IChjKSAyMDE4IEplZCBXYXRzb24uXG4gIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZSAoTUlUKSwgc2VlXG4gIGh0dHA6Ly9qZWR3YXRzb24uZ2l0aHViLmlvL2NsYXNzbmFtZXNcbiovXG4vKiBnbG9iYWwgZGVmaW5lICovXG5cbihmdW5jdGlvbiAoKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHR2YXIgaGFzT3duID0ge30uaGFzT3duUHJvcGVydHk7XG5cblx0ZnVuY3Rpb24gY2xhc3NOYW1lcygpIHtcblx0XHR2YXIgY2xhc3NlcyA9IFtdO1xuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBhcmcgPSBhcmd1bWVudHNbaV07XG5cdFx0XHRpZiAoIWFyZykgY29udGludWU7XG5cblx0XHRcdHZhciBhcmdUeXBlID0gdHlwZW9mIGFyZztcblxuXHRcdFx0aWYgKGFyZ1R5cGUgPT09ICdzdHJpbmcnIHx8IGFyZ1R5cGUgPT09ICdudW1iZXInKSB7XG5cdFx0XHRcdGNsYXNzZXMucHVzaChhcmcpO1xuXHRcdFx0fSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGFyZykpIHtcblx0XHRcdFx0aWYgKGFyZy5sZW5ndGgpIHtcblx0XHRcdFx0XHR2YXIgaW5uZXIgPSBjbGFzc05hbWVzLmFwcGx5KG51bGwsIGFyZyk7XG5cdFx0XHRcdFx0aWYgKGlubmVyKSB7XG5cdFx0XHRcdFx0XHRjbGFzc2VzLnB1c2goaW5uZXIpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmIChhcmdUeXBlID09PSAnb2JqZWN0Jykge1xuXHRcdFx0XHRpZiAoYXJnLnRvU3RyaW5nID09PSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nKSB7XG5cdFx0XHRcdFx0Zm9yICh2YXIga2V5IGluIGFyZykge1xuXHRcdFx0XHRcdFx0aWYgKGhhc093bi5jYWxsKGFyZywga2V5KSAmJiBhcmdba2V5XSkge1xuXHRcdFx0XHRcdFx0XHRjbGFzc2VzLnB1c2goa2V5KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y2xhc3Nlcy5wdXNoKGFyZy50b1N0cmluZygpKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBjbGFzc2VzLmpvaW4oJyAnKTtcblx0fVxuXG5cdGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuXHRcdGNsYXNzTmFtZXMuZGVmYXVsdCA9IGNsYXNzTmFtZXM7XG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBjbGFzc05hbWVzO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGRlZmluZS5hbWQgPT09ICdvYmplY3QnICYmIGRlZmluZS5hbWQpIHtcblx0XHQvLyByZWdpc3RlciBhcyAnY2xhc3NuYW1lcycsIGNvbnNpc3RlbnQgd2l0aCBucG0gcGFja2FnZSBuYW1lXG5cdFx0ZGVmaW5lKCdjbGFzc25hbWVzJywgW10sIGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBjbGFzc05hbWVzO1xuXHRcdH0pO1xuXHR9IGVsc2Uge1xuXHRcdHdpbmRvdy5jbGFzc05hbWVzID0gY2xhc3NOYW1lcztcblx0fVxufSgpKTtcbiIsImltcG9ydCBSZWFjdCwgeyBQcm9wc1dpdGhDaGlsZHJlbiB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgZm9yd2FyZFJlZiwgdXNlU3RhdGUsIHVzZVJlZiwgdXNlQ29udGV4dCB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgdXNlQnV0dG9uIH0gZnJvbSAnQHJlYWN0LWFyaWEvYnV0dG9uJ1xuaW1wb3J0IHsgdXNlSG92ZXIsIHVzZVByZXNzIH0gZnJvbSAnQHJlYWN0LWFyaWEvaW50ZXJhY3Rpb25zJ1xuaW1wb3J0IHsgQnV0dG9uUHJvcHMgfSBmcm9tICcuL2J1dHRvbi50eXBlcydcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gJ2NsYXNzbmFtZXMnXG5pbXBvcnQgeyB1c2VCdXR0b25DbGFzcyB9IGZyb20gJy4vc3R5bGVzJ1xuaW1wb3J0IHsgbWVyZ2VSZWZzIH0gZnJvbSAnQHJlYWN0LWFyaWEvdXRpbHMnXG5cbmNvbnN0IEJ1dHRvbiA9IGZvcndhcmRSZWY8SFRNTEJ1dHRvbkVsZW1lbnQsIFByb3BzV2l0aENoaWxkcmVuPEJ1dHRvblByb3BzPj4oXG5cdChwcm9wczogQnV0dG9uUHJvcHMsIGV4dFJlZjogUmVhY3QuUmVmPEhUTUxCdXR0b25FbGVtZW50IHwgbnVsbD4pID0+IHtcblx0XHRjb25zdCB7XG5cdFx0XHRzaXplLFxuXHRcdFx0cm91bmRlZCxcblx0XHRcdHZhcmlhbnQgPSAnc29saWQnLFxuXHRcdFx0dHlwZSxcblx0XHRcdGJsb2NrLFxuXHRcdFx0Y29sb3IsXG5cdFx0XHRmb2N1c2FmdGVyY2xpY2sgPSB0cnVlLFxuXHRcdFx0aWNvbixcblx0XHRcdG5vdGlmaWNhdGlvbixcblx0XHRcdGNsYXNzTmFtZSxcblx0XHRcdGNoaWxkcmVuLFxuXHRcdFx0ZGlzYWJsZWQsXG5cdFx0XHRsb2FkaW5nLFxuXHRcdFx0b25DbGljayxcblx0XHRcdC4uLnJlc3Rcblx0XHR9ID0gcHJvcHNcblx0XHRjb25zdCBidXR0b25SZWYgPSB1c2VSZWY8SFRNTEJ1dHRvbkVsZW1lbnQ+KG51bGwpXG5cblx0XHRjb25zdCBbaXNGb2N1c2VkLCBzZXRGb2N1c2VkXSA9IHVzZVN0YXRlKGZhbHNlKVxuXHRcdGNvbnN0IHsgaG92ZXJQcm9wcywgaXNIb3ZlcmVkIH0gPSB1c2VIb3Zlcih7XG5cdFx0XHRpc0Rpc2FibGVkOiBkaXNhYmxlZCB8fCBsb2FkaW5nLFxuXHRcdH0pXG5cdFx0Y29uc3QgeyBidXR0b25Qcm9wcywgaXNQcmVzc2VkIH0gPSB1c2VCdXR0b24oXG5cdFx0XHR7XG5cdFx0XHRcdHR5cGU6ICdzdWJtaXQnLFxuXHRcdFx0XHRpc0Rpc2FibGVkOiBkaXNhYmxlZCB8fCBsb2FkaW5nLFxuXHRcdFx0XHRvbkZvY3VzQ2hhbmdlOiBzZXRGb2N1c2VkLFxuXHRcdFx0XHRvbktleURvd246IChlKSA9PiB7XG5cdFx0XHRcdFx0aWYgKGUua2V5ID09PSAnRW50ZXInIHx8IGUua2V5ID09PSAnICcpIHtcblx0XHRcdFx0XHRcdG9uQ2xpY2s/LihlIGFzIGFueSlcblx0XHRcdFx0XHRcdHNldEZvY3VzZWQodHJ1ZSlcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIGVcblx0XHRcdFx0fSxcblx0XHRcdFx0b25QcmVzc0VuZDogKGUpID0+IHtcblx0XHRcdFx0XHRpZiAoZS5wb2ludGVyVHlwZSA9PT0gJ3RvdWNoJykge1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoZS5wb2ludGVyVHlwZSA9PT0gJ21vdXNlJykge1xuXHRcdFx0XHRcdFx0Zm9jdXNhZnRlcmNsaWNrID8gJycgOiBlLnRhcmdldC5ibHVyKClcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIGVcblx0XHRcdFx0fSxcblx0XHRcdFx0b25QcmVzc1N0YXJ0OiAoZSkgPT4ge1xuXHRcdFx0XHRcdGlmIChlLnBvaW50ZXJUeXBlID09PSAnbW91c2UnKSB7XG5cdFx0XHRcdFx0XHRzZXRGb2N1c2VkKHRydWUpXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiBlXG5cdFx0XHRcdH0sXG5cdFx0XHRcdG9uUHJlc3M6IChlKSA9PiB7XG5cdFx0XHRcdFx0b25DbGljaz8uKGUgYXMgYW55KVxuXHRcdFx0XHR9LFxuXHRcdFx0fSxcblx0XHRcdGJ1dHRvblJlZlxuXHRcdClcblxuXHRcdGNvbnN0IGNsYXNzZXMgPSB1c2VCdXR0b25DbGFzcyh7XG5cdFx0XHR2YXJpYW50LFxuXHRcdFx0c2l6ZSxcblx0XHRcdHR5cGUsXG5cdFx0XHRkaXNhYmxlZCxcblx0XHRcdGxvYWRpbmcsXG5cdFx0XHRyb3VuZGVkLFxuXHRcdH0pXG5cblx0XHRyZXR1cm4gKFxuXHRcdFx0PGJ1dHRvblxuXHRcdFx0XHR7Li4uYnV0dG9uUHJvcHN9XG5cdFx0XHRcdHsuLi5ob3ZlclByb3BzfVxuXHRcdFx0XHRkYXRhLWZvY3VzPXtpc0ZvY3VzZWQgPyAnJyA6IG51bGx9XG5cdFx0XHRcdGRhdGEtYWN0aXZlPXtpc1ByZXNzZWQgPyAnJyA6IG51bGx9XG5cdFx0XHRcdGRhdGEtaG92ZXI9e2lzSG92ZXJlZCA/ICcnIDogbnVsbH1cblx0XHRcdFx0ZGF0YS1sb2FkaW5nPXtsb2FkaW5nID8gJycgOiBudWxsfVxuXHRcdFx0XHRkYXRhLWNvbG9yPXtjb2xvcn1cblx0XHRcdFx0Y2xhc3NOYW1lPXtjbGFzc05hbWVzKFxuXHRcdFx0XHRcdFtjbGFzc2VzLCAhIWljb24gPyAoISFjaGlsZHJlbiA/ICcnIDogJ2ljb25vbmx5JykgOiAnJ10sXG5cdFx0XHRcdFx0Y2xhc3NOYW1lXG5cdFx0XHRcdCl9XG5cdFx0XHRcdHsuLi5yZXN0fVxuXHRcdFx0XHRyZWY9e21lcmdlUmVmcyhidXR0b25SZWYsIGV4dFJlZil9PlxuXHRcdFx0XHR7bG9hZGluZyAmJiAoXG5cdFx0XHRcdFx0PHNwYW4+XG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdDxkaXZcblx0XHRcdFx0XHRcdFx0XHRjbGFzc05hbWU9e2BidG4tc3Bpbm5lciAke1xuXHRcdFx0XHRcdFx0XHRcdFx0bG9hZGluZyA/ICdvcGFjaXR5LTEwMCcgOiAnb3BhY2l0eS0wJ1xuXHRcdFx0XHRcdFx0XHRcdH1gfT48L2Rpdj5cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHQ8L3NwYW4+XG5cdFx0XHRcdCl9XG5cdFx0XHRcdDxzcGFuXG5cdFx0XHRcdFx0Y2xhc3NOYW1lPXtgYnRuLWNvbnRlbnQgJHtcblx0XHRcdFx0XHRcdGxvYWRpbmcgPyAnb3BhY2l0eS0wJyA6ICdvcGFjaXR5LTEwMCdcblx0XHRcdFx0XHR9YH0+XG5cdFx0XHRcdFx0e2ljb24gJiYgKFxuXHRcdFx0XHRcdFx0PHNwYW4gY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdidG4taWNvbicpfT57aWNvbn08L3NwYW4+XG5cdFx0XHRcdFx0KX1cblx0XHRcdFx0XHR7Y2hpbGRyZW59XG5cdFx0XHRcdDwvc3Bhbj5cblx0XHRcdFx0e25vdGlmaWNhdGlvbiAmJiA8ZGl2IGNsYXNzTmFtZT0nYnRuLW5vdGlmaWNhdGlvbicgLz59XG5cdFx0XHQ8L2J1dHRvbj5cblx0XHQpXG5cdH1cbilcblxuQnV0dG9uLmRpc3BsYXlOYW1lID0gJ0J1dHRvbidcbmV4cG9ydCBkZWZhdWx0IEJ1dHRvblxuIiwiLypcbiAqIENvcHlyaWdodCAyMDIwIEFkb2JlLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHlcbiAqIG9mIHRoZSBMaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXJcbiAqIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIFJFUFJFU0VOVEFUSU9OU1xuICogT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlXG4gKiBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8vIFdlIG11c3QgYXZvaWQgYSBjaXJjdWxhciBkZXBlbmRlbmN5IHdpdGggQHJlYWN0LWFyaWEvdXRpbHMsIGFuZCB0aGlzIHVzZUxheW91dEVmZmVjdCBpc1xuLy8gZ3VhcmRlZCBieSBhIGNoZWNrIHRoYXQgaXQgb25seSBydW5zIG9uIHRoZSBjbGllbnQgc2lkZS5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBydWxlc2Rpci91c2VMYXlvdXRFZmZlY3RSdWxlXG5pbXBvcnQgUmVhY3QsIHtSZWFjdE5vZGUsIHVzZUNvbnRleHQsIHVzZUxheW91dEVmZmVjdCwgdXNlTWVtbywgdXNlU3RhdGV9IGZyb20gJ3JlYWN0JztcblxuLy8gVG8gc3VwcG9ydCBTU1IsIHRoZSBhdXRvIGluY3JlbWVudGluZyBpZCBjb3VudGVyIGlzIHN0b3JlZCBpbiBhIGNvbnRleHQuIFRoaXMgYWxsb3dzXG4vLyBpdCB0byBiZSByZXNldCBvbiBldmVyeSByZXF1ZXN0IHRvIGVuc3VyZSB0aGUgY2xpZW50IGFuZCBzZXJ2ZXIgYXJlIGNvbnNpc3RlbnQuXG4vLyBUaGVyZSBpcyBhbHNvIGEgcHJlZml4IHN0cmluZyB0aGF0IGlzIHVzZWQgdG8gc3VwcG9ydCBhc3luYyBsb2FkaW5nIGNvbXBvbmVudHNcbi8vIEVhY2ggYXN5bmMgYm91bmRhcnkgbXVzdCBiZSB3cmFwcGVkIGluIGFuIFNTUiBwcm92aWRlciwgd2hpY2ggYXBwZW5kcyB0byB0aGUgcHJlZml4XG4vLyBhbmQgcmVzZXRzIHRoZSBjdXJyZW50IGlkIGNvdW50ZXIuIFRoaXMgZW5zdXJlcyB0aGF0IGFzeW5jIGxvYWRlZCBjb21wb25lbnRzIGhhdmVcbi8vIGNvbnNpc3RlbnQgaWRzIHJlZ2FyZGxlc3Mgb2YgdGhlIGxvYWRpbmcgb3JkZXIuXG5pbnRlcmZhY2UgU1NSQ29udGV4dFZhbHVlIHtcbiAgcHJlZml4OiBzdHJpbmcsXG4gIGN1cnJlbnQ6IG51bWJlclxufVxuXG4vLyBEZWZhdWx0IGNvbnRleHQgdmFsdWUgdG8gdXNlIGluIGNhc2UgdGhlcmUgaXMgbm8gU1NSUHJvdmlkZXIuIFRoaXMgaXMgZmluZSBmb3Jcbi8vIGNsaWVudC1vbmx5IGFwcHMuIEluIG9yZGVyIHRvIHN1cHBvcnQgbXVsdGlwbGUgY29waWVzIG9mIFJlYWN0IEFyaWEgcG90ZW50aWFsbHlcbi8vIGJlaW5nIG9uIHRoZSBwYWdlIGF0IG9uY2UsIHRoZSBwcmVmaXggaXMgc2V0IHRvIGEgcmFuZG9tIG51bWJlci4gU1NSUHJvdmlkZXJcbi8vIHdpbGwgcmVzZXQgdGhpcyB0byB6ZXJvIGZvciBjb25zaXN0ZW5jeSBiZXR3ZWVuIHNlcnZlciBhbmQgY2xpZW50LCBzbyBpbiB0aGVcbi8vIFNTUiBjYXNlIG11bHRpcGxlIGNvcGllcyBvZiBSZWFjdCBBcmlhIGlzIG5vdCBzdXBwb3J0ZWQuXG5jb25zdCBkZWZhdWx0Q29udGV4dDogU1NSQ29udGV4dFZhbHVlID0ge1xuICBwcmVmaXg6IFN0cmluZyhNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAxMDAwMDAwMDAwMCkpLFxuICBjdXJyZW50OiAwXG59O1xuXG5jb25zdCBTU1JDb250ZXh0ID0gUmVhY3QuY3JlYXRlQ29udGV4dDxTU1JDb250ZXh0VmFsdWU+KGRlZmF1bHRDb250ZXh0KTtcblxuaW50ZXJmYWNlIFNTUlByb3ZpZGVyUHJvcHMge1xuICAvKiogWW91ciBhcHBsaWNhdGlvbiBoZXJlLiAqL1xuICBjaGlsZHJlbjogUmVhY3ROb2RlXG59XG5cbi8qKlxuICogV2hlbiB1c2luZyBTU1Igd2l0aCBSZWFjdCBBcmlhLCBhcHBsaWNhdGlvbnMgbXVzdCBiZSB3cmFwcGVkIGluIGFuIFNTUlByb3ZpZGVyLlxuICogVGhpcyBlbnN1cmVzIHRoYXQgYXV0byBnZW5lcmF0ZWQgaWRzIGFyZSBjb25zaXN0ZW50IGJldHdlZW4gdGhlIGNsaWVudCBhbmQgc2VydmVyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gU1NSUHJvdmlkZXIocHJvcHM6IFNTUlByb3ZpZGVyUHJvcHMpOiBKU1guRWxlbWVudCB7XG4gIGxldCBjdXIgPSB1c2VDb250ZXh0KFNTUkNvbnRleHQpO1xuICBsZXQgdmFsdWU6IFNTUkNvbnRleHRWYWx1ZSA9IHVzZU1lbW8oKCkgPT4gKHtcbiAgICAvLyBJZiB0aGlzIGlzIHRoZSBmaXJzdCBTU1JQcm92aWRlciwgc3RhcnQgd2l0aCBhbiBlbXB0eSBzdHJpbmcgcHJlZml4LCBvdGhlcndpc2VcbiAgICAvLyBhcHBlbmQgYW5kIGluY3JlbWVudCB0aGUgY291bnRlci5cbiAgICBwcmVmaXg6IGN1ciA9PT0gZGVmYXVsdENvbnRleHQgPyAnJyA6IGAke2N1ci5wcmVmaXh9LSR7KytjdXIuY3VycmVudH1gLFxuICAgIGN1cnJlbnQ6IDBcbiAgfSksIFtjdXJdKTtcblxuICByZXR1cm4gKFxuICAgIDxTU1JDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXt2YWx1ZX0+XG4gICAgICB7cHJvcHMuY2hpbGRyZW59XG4gICAgPC9TU1JDb250ZXh0LlByb3ZpZGVyPlxuICApO1xufVxuXG5sZXQgY2FuVXNlRE9NID0gQm9vbGVhbihcbiAgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgd2luZG93LmRvY3VtZW50ICYmXG4gIHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50XG4pO1xuXG4vKiogQHByaXZhdGUgKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VTU1JTYWZlSWQoZGVmYXVsdElkPzogc3RyaW5nKTogc3RyaW5nIHtcbiAgbGV0IGN0eCA9IHVzZUNvbnRleHQoU1NSQ29udGV4dCk7XG5cbiAgLy8gSWYgd2UgYXJlIHJlbmRlcmluZyBpbiBhIG5vbi1ET00gZW52aXJvbm1lbnQsIGFuZCB0aGVyZSdzIG5vIFNTUlByb3ZpZGVyLFxuICAvLyBwcm92aWRlIGEgd2FybmluZyB0byBoaW50IHRvIHRoZSBkZXZlbG9wZXIgdG8gYWRkIG9uZS5cbiAgaWYgKGN0eCA9PT0gZGVmYXVsdENvbnRleHQgJiYgIWNhblVzZURPTSkge1xuICAgIGNvbnNvbGUud2FybignV2hlbiBzZXJ2ZXIgcmVuZGVyaW5nLCB5b3UgbXVzdCB3cmFwIHlvdXIgYXBwbGljYXRpb24gaW4gYW4gPFNTUlByb3ZpZGVyPiB0byBlbnN1cmUgY29uc2lzdGVudCBpZHMgYXJlIGdlbmVyYXRlZCBiZXR3ZWVuIHRoZSBjbGllbnQgYW5kIHNlcnZlci4nKTtcbiAgfVxuXG4gIHJldHVybiB1c2VNZW1vKCgpID0+IGRlZmF1bHRJZCB8fCBgcmVhY3QtYXJpYSR7Y3R4LnByZWZpeH0tJHsrK2N0eC5jdXJyZW50fWAsIFtkZWZhdWx0SWRdKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgdGhlIGNvbXBvbmVudCBpcyBjdXJyZW50bHkgYmVpbmcgc2VydmVyIHNpZGUgcmVuZGVyZWQgb3JcbiAqIGh5ZHJhdGVkIG9uIHRoZSBjbGllbnQuIENhbiBiZSB1c2VkIHRvIGRlbGF5IGJyb3dzZXItc3BlY2lmaWMgcmVuZGVyaW5nXG4gKiB1bnRpbCBhZnRlciBoeWRyYXRpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VJc1NTUigpOiBib29sZWFuIHtcbiAgbGV0IGN1ciA9IHVzZUNvbnRleHQoU1NSQ29udGV4dCk7XG4gIGxldCBpc0luU1NSQ29udGV4dCA9IGN1ciAhPT0gZGVmYXVsdENvbnRleHQ7XG4gIGxldCBbaXNTU1IsIHNldElzU1NSXSA9IHVzZVN0YXRlKGlzSW5TU1JDb250ZXh0KTtcblxuICAvLyBJZiBvbiB0aGUgY2xpZW50LCBhbmQgdGhlIGNvbXBvbmVudCB3YXMgaW5pdGlhbGx5IHNlcnZlciByZW5kZXJlZCxcbiAgLy8gdGhlbiBzY2hlZHVsZSBhIGxheW91dCBlZmZlY3QgdG8gdXBkYXRlIHRoZSBjb21wb25lbnQgYWZ0ZXIgaHlkcmF0aW9uLlxuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgaXNJblNTUkNvbnRleHQpIHtcbiAgICAvLyBUaGlzIGlmIHN0YXRlbWVudCB0ZWNobmljYWxseSBicmVha3MgdGhlIHJ1bGVzIG9mIGhvb2tzLCBidXQgaXMgc2FmZVxuICAgIC8vIGJlY2F1c2UgdGhlIGNvbmRpdGlvbiBuZXZlciBjaGFuZ2VzIGFmdGVyIG1vdW50aW5nLlxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9ydWxlcy1vZi1ob29rc1xuICAgIHVzZUxheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgICBzZXRJc1NTUihmYWxzZSk7XG4gICAgfSwgW10pO1xuICB9XG5cbiAgcmV0dXJuIGlzU1NSO1xufVxuIiwiZnVuY3Rpb24gcihlKXt2YXIgdCxmLG49XCJcIjtpZihcInN0cmluZ1wiPT10eXBlb2YgZXx8XCJudW1iZXJcIj09dHlwZW9mIGUpbis9ZTtlbHNlIGlmKFwib2JqZWN0XCI9PXR5cGVvZiBlKWlmKEFycmF5LmlzQXJyYXkoZSkpZm9yKHQ9MDt0PGUubGVuZ3RoO3QrKyllW3RdJiYoZj1yKGVbdF0pKSYmKG4mJihuKz1cIiBcIiksbis9Zik7ZWxzZSBmb3IodCBpbiBlKWVbdF0mJihuJiYobis9XCIgXCIpLG4rPXQpO3JldHVybiBufWV4cG9ydCBmdW5jdGlvbiBjbHN4KCl7Zm9yKHZhciBlLHQsZj0wLG49XCJcIjtmPGFyZ3VtZW50cy5sZW5ndGg7KShlPWFyZ3VtZW50c1tmKytdKSYmKHQ9cihlKSkmJihuJiYobis9XCIgXCIpLG4rPXQpO3JldHVybiBufWV4cG9ydCBkZWZhdWx0IGNsc3g7IiwiLypcbiAqIENvcHlyaWdodCAyMDIwIEFkb2JlLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHlcbiAqIG9mIHRoZSBMaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXJcbiAqIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIFJFUFJFU0VOVEFUSU9OU1xuICogT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlXG4gKiBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7dXNlQ2FsbGJhY2ssIHVzZVJlZiwgdXNlU3RhdGV9IGZyb20gJ3JlYWN0JztcblxuZXhwb3J0IGZ1bmN0aW9uIHVzZUNvbnRyb2xsZWRTdGF0ZTxUPihcbiAgdmFsdWU6IFQsXG4gIGRlZmF1bHRWYWx1ZTogVCxcbiAgb25DaGFuZ2U6ICh2YWx1ZTogVCwgLi4uYXJnczogYW55W10pID0+IHZvaWRcbik6IFtULCAodmFsdWU6IFQsIC4uLmFyZ3M6IGFueVtdKSA9PiB2b2lkXSAge1xuICBsZXQgW3N0YXRlVmFsdWUsIHNldFN0YXRlVmFsdWVdID0gdXNlU3RhdGUodmFsdWUgfHwgZGVmYXVsdFZhbHVlKTtcbiAgbGV0IHJlZiA9IHVzZVJlZih2YWx1ZSAhPT0gdW5kZWZpbmVkKTtcbiAgbGV0IHdhc0NvbnRyb2xsZWQgPSByZWYuY3VycmVudDtcbiAgbGV0IGlzQ29udHJvbGxlZCA9IHZhbHVlICE9PSB1bmRlZmluZWQ7XG4gIC8vIEludGVybmFsIHN0YXRlIHJlZmVyZW5jZSBmb3IgdXNlQ2FsbGJhY2tcbiAgbGV0IHN0YXRlUmVmID0gdXNlUmVmKHN0YXRlVmFsdWUpO1xuICBpZiAod2FzQ29udHJvbGxlZCAhPT0gaXNDb250cm9sbGVkKSB7XG4gICAgY29uc29sZS53YXJuKGBXQVJOOiBBIGNvbXBvbmVudCBjaGFuZ2VkIGZyb20gJHt3YXNDb250cm9sbGVkID8gJ2NvbnRyb2xsZWQnIDogJ3VuY29udHJvbGxlZCd9IHRvICR7aXNDb250cm9sbGVkID8gJ2NvbnRyb2xsZWQnIDogJ3VuY29udHJvbGxlZCd9LmApO1xuICB9XG5cbiAgcmVmLmN1cnJlbnQgPSBpc0NvbnRyb2xsZWQ7XG5cbiAgbGV0IHNldFZhbHVlID0gdXNlQ2FsbGJhY2soKHZhbHVlLCAuLi5hcmdzKSA9PiB7XG4gICAgbGV0IG9uQ2hhbmdlQ2FsbGVyID0gKHZhbHVlLCAuLi5vbkNoYW5nZUFyZ3MpID0+IHtcbiAgICAgIGlmIChvbkNoYW5nZSkge1xuICAgICAgICBpZiAoIU9iamVjdC5pcyhzdGF0ZVJlZi5jdXJyZW50LCB2YWx1ZSkpIHtcbiAgICAgICAgICBvbkNoYW5nZSh2YWx1ZSwgLi4ub25DaGFuZ2VBcmdzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCFpc0NvbnRyb2xsZWQpIHtcbiAgICAgICAgc3RhdGVSZWYuY3VycmVudCA9IHZhbHVlO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ1dlIGNhbiBub3Qgc3VwcG9ydCBhIGZ1bmN0aW9uIGNhbGxiYWNrLiBTZWUgR2l0aHViIElzc3VlcyBmb3IgZGV0YWlscyBodHRwczovL2dpdGh1Yi5jb20vYWRvYmUvcmVhY3Qtc3BlY3RydW0vaXNzdWVzLzIzMjAnKTtcbiAgICAgIC8vIHRoaXMgc3VwcG9ydHMgZnVuY3Rpb25hbCB1cGRhdGVzIGh0dHBzOi8vcmVhY3Rqcy5vcmcvZG9jcy9ob29rcy1yZWZlcmVuY2UuaHRtbCNmdW5jdGlvbmFsLXVwZGF0ZXNcbiAgICAgIC8vIHdoZW4gc29tZW9uZSB1c2luZyB1c2VDb250cm9sbGVkU3RhdGUgY2FsbHMgc2V0Q29udHJvbGxlZFN0YXRlKG15RnVuYylcbiAgICAgIC8vIHRoaXMgd2lsbCBjYWxsIG91ciB1c2VTdGF0ZSBzZXRTdGF0ZSB3aXRoIGEgZnVuY3Rpb24gYXMgd2VsbCB3aGljaCBpbnZva2VzIG15RnVuYyBhbmQgY2FsbHMgb25DaGFuZ2Ugd2l0aCB0aGUgdmFsdWUgZnJvbSBteUZ1bmNcbiAgICAgIC8vIGlmIHdlJ3JlIGluIGFuIHVuY29udHJvbGxlZCBzdGF0ZSwgdGhlbiB3ZSBhbHNvIHJldHVybiB0aGUgdmFsdWUgb2YgbXlGdW5jIHdoaWNoIHRvIHNldFN0YXRlIGxvb2tzIGFzIHRob3VnaCBpdCB3YXMganVzdCBjYWxsZWQgd2l0aCBteUZ1bmMgZnJvbSB0aGUgYmVnaW5uaW5nXG4gICAgICAvLyBvdGhlcndpc2Ugd2UganVzdCByZXR1cm4gdGhlIGNvbnRyb2xsZWQgdmFsdWUsIHdoaWNoIHdvbid0IGNhdXNlIGEgcmVyZW5kZXIgYmVjYXVzZSBSZWFjdCBrbm93cyB0byBiYWlsIG91dCB3aGVuIHRoZSB2YWx1ZSBpcyB0aGUgc2FtZVxuICAgICAgbGV0IHVwZGF0ZUZ1bmN0aW9uID0gKG9sZFZhbHVlLCAuLi5mdW5jdGlvbkFyZ3MpID0+IHtcbiAgICAgICAgbGV0IGludGVyY2VwdGVkVmFsdWUgPSB2YWx1ZShpc0NvbnRyb2xsZWQgPyBzdGF0ZVJlZi5jdXJyZW50IDogb2xkVmFsdWUsIC4uLmZ1bmN0aW9uQXJncyk7XG4gICAgICAgIG9uQ2hhbmdlQ2FsbGVyKGludGVyY2VwdGVkVmFsdWUsIC4uLmFyZ3MpO1xuICAgICAgICBpZiAoIWlzQ29udHJvbGxlZCkge1xuICAgICAgICAgIHJldHVybiBpbnRlcmNlcHRlZFZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvbGRWYWx1ZTtcbiAgICAgIH07XG4gICAgICBzZXRTdGF0ZVZhbHVlKHVwZGF0ZUZ1bmN0aW9uKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKCFpc0NvbnRyb2xsZWQpIHtcbiAgICAgICAgc2V0U3RhdGVWYWx1ZSh2YWx1ZSk7XG4gICAgICB9XG4gICAgICBvbkNoYW5nZUNhbGxlcih2YWx1ZSwgLi4uYXJncyk7XG4gICAgfVxuICB9LCBbaXNDb250cm9sbGVkLCBvbkNoYW5nZV0pO1xuXG4gIC8vIElmIGEgY29udHJvbGxlZCBjb21wb25lbnQncyB2YWx1ZSBwcm9wIGNoYW5nZXMsIHdlIG5lZWQgdG8gdXBkYXRlIHN0YXRlUmVmXG4gIGlmIChpc0NvbnRyb2xsZWQpIHtcbiAgICBzdGF0ZVJlZi5jdXJyZW50ID0gdmFsdWU7XG4gIH0gZWxzZSB7XG4gICAgdmFsdWUgPSBzdGF0ZVZhbHVlO1xuICB9XG5cbiAgcmV0dXJuIFt2YWx1ZSwgc2V0VmFsdWVdO1xufVxuIiwiLypcbiAqIENvcHlyaWdodCAyMDIwIEFkb2JlLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHlcbiAqIG9mIHRoZSBMaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXJcbiAqIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIFJFUFJFU0VOVEFUSU9OU1xuICogT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlXG4gKiBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogVGFrZXMgYSB2YWx1ZSBhbmQgZm9yY2VzIGl0IHRvIHRoZSBjbG9zZXN0IG1pbi9tYXggaWYgaXQncyBvdXRzaWRlLiBBbHNvIGZvcmNlcyBpdCB0byB0aGUgY2xvc2VzdCB2YWxpZCBzdGVwLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xhbXAodmFsdWU6IG51bWJlciwgbWluOiBudW1iZXIgPSAtSW5maW5pdHksIG1heDogbnVtYmVyID0gSW5maW5pdHkpOiBudW1iZXIge1xuICBsZXQgbmV3VmFsdWUgPSBNYXRoLm1pbihNYXRoLm1heCh2YWx1ZSwgbWluKSwgbWF4KTtcbiAgcmV0dXJuIG5ld1ZhbHVlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc25hcFZhbHVlVG9TdGVwKHZhbHVlOiBudW1iZXIsIG1pbjogbnVtYmVyLCBtYXg6IG51bWJlciwgc3RlcDogbnVtYmVyKTogbnVtYmVyIHtcbiAgbGV0IHJlbWFpbmRlciA9ICgodmFsdWUgLSAoaXNOYU4obWluKSA/IDAgOiBtaW4pKSAlIHN0ZXApO1xuICBsZXQgc25hcHBlZFZhbHVlID0gTWF0aC5hYnMocmVtYWluZGVyKSAqIDIgPj0gc3RlcFxuICAgID8gdmFsdWUgKyBNYXRoLnNpZ24ocmVtYWluZGVyKSAqIChzdGVwIC0gTWF0aC5hYnMocmVtYWluZGVyKSlcbiAgICA6IHZhbHVlIC0gcmVtYWluZGVyO1xuXG4gIGlmICghaXNOYU4obWluKSkge1xuICAgIGlmIChzbmFwcGVkVmFsdWUgPCBtaW4pIHtcbiAgICAgIHNuYXBwZWRWYWx1ZSA9IG1pbjtcbiAgICB9IGVsc2UgaWYgKCFpc05hTihtYXgpICYmIHNuYXBwZWRWYWx1ZSA+IG1heCkge1xuICAgICAgc25hcHBlZFZhbHVlID0gbWluICsgTWF0aC5mbG9vcigobWF4IC0gbWluKSAvIHN0ZXApICogc3RlcDtcbiAgICB9XG4gIH0gZWxzZSBpZiAoIWlzTmFOKG1heCkgJiYgc25hcHBlZFZhbHVlID4gbWF4KSB7XG4gICAgc25hcHBlZFZhbHVlID0gTWF0aC5mbG9vcihtYXggLyBzdGVwKSAqIHN0ZXA7XG4gIH1cblxuICAvLyBjb3JyZWN0IGZsb2F0aW5nIHBvaW50IGJlaGF2aW9yIGJ5IHJvdW5kaW5nIHRvIHN0ZXAgcHJlY2lzaW9uXG4gIGxldCBzdHJpbmcgPSBzdGVwLnRvU3RyaW5nKCk7XG4gIGxldCBpbmRleCA9IHN0cmluZy5pbmRleE9mKCcuJyk7XG4gIGxldCBwcmVjaXNpb24gPSBpbmRleCA+PSAwID8gc3RyaW5nLmxlbmd0aCAtIGluZGV4IDogMDtcblxuICBpZiAocHJlY2lzaW9uID4gMCkge1xuICAgIGxldCBwb3cgPSBNYXRoLnBvdygxMCwgcHJlY2lzaW9uKTtcbiAgICBzbmFwcGVkVmFsdWUgPSBNYXRoLnJvdW5kKHNuYXBwZWRWYWx1ZSAqIHBvdykgLyBwb3c7XG4gIH1cblxuICByZXR1cm4gc25hcHBlZFZhbHVlO1xufVxuXG4vKiBUYWtlcyBhIHZhbHVlIGFuZCByb3VuZHMgb2ZmIHRvIHRoZSBudW1iZXIgb2YgZGlnaXRzLiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvRml4ZWROdW1iZXIodmFsdWU6IG51bWJlciwgZGlnaXRzOiBudW1iZXIsIGJhc2U6IG51bWJlciA9IDEwKTogbnVtYmVyIHtcbiAgY29uc3QgcG93ID0gTWF0aC5wb3coYmFzZSwgZGlnaXRzKTtcblxuICByZXR1cm4gTWF0aC5yb3VuZCh2YWx1ZSAqIHBvdykgLyBwb3c7XG59XG4iLCIvKlxuICogQ29weXJpZ2h0IDIwMjAgQWRvYmUuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weVxuICogb2YgdGhlIExpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlclxuICogdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgUkVQUkVTRU5UQVRJT05TXG4gKiBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2VcbiAqIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcblxuLy8gRHVyaW5nIFNTUiwgUmVhY3QgZW1pdHMgYSB3YXJuaW5nIHdoZW4gY2FsbGluZyB1c2VMYXlvdXRFZmZlY3QuXG4vLyBTaW5jZSBuZWl0aGVyIHVzZUxheW91dEVmZmVjdCBub3IgdXNlRWZmZWN0IHJ1biBvbiB0aGUgc2VydmVyLFxuLy8gd2UgY2FuIHN1cHByZXNzIHRoaXMgYnkgcmVwbGFjZSBpdCB3aXRoIGEgbm9vcCBvbiB0aGUgc2VydmVyLlxuZXhwb3J0IGNvbnN0IHVzZUxheW91dEVmZmVjdCA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnXG4gID8gUmVhY3QudXNlTGF5b3V0RWZmZWN0XG4gIDogKCkgPT4ge307XG4iLCIvKlxuICogQ29weXJpZ2h0IDIwMjAgQWRvYmUuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weVxuICogb2YgdGhlIExpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlclxuICogdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgUkVQUkVTRU5UQVRJT05TXG4gKiBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2VcbiAqIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHt1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZVN0YXRlfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQge3VzZUxheW91dEVmZmVjdH0gZnJvbSAnLi91c2VMYXlvdXRFZmZlY3QnO1xuaW1wb3J0IHt1c2VTU1JTYWZlSWR9IGZyb20gJ0ByZWFjdC1hcmlhL3Nzcic7XG5pbXBvcnQge3VzZVZhbHVlRWZmZWN0fSBmcm9tICcuLyc7XG5cbmxldCBpZHNVcGRhdGVyTWFwOiBNYXA8c3RyaW5nLCAodjogc3RyaW5nKSA9PiB2b2lkPiA9IG5ldyBNYXAoKTtcblxuLyoqXG4gKiBJZiBhIGRlZmF1bHQgaXMgbm90IHByb3ZpZGVkLCBnZW5lcmF0ZSBhbiBpZC5cbiAqIEBwYXJhbSBkZWZhdWx0SWQgLSBEZWZhdWx0IGNvbXBvbmVudCBpZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZUlkKGRlZmF1bHRJZD86IHN0cmluZyk6IHN0cmluZyB7XG4gIGxldCBbdmFsdWUsIHNldFZhbHVlXSA9IHVzZVN0YXRlKGRlZmF1bHRJZCk7XG4gIGxldCBuZXh0SWQgPSB1c2VSZWYobnVsbCk7XG5cbiAgbGV0IHJlcyA9IHVzZVNTUlNhZmVJZCh2YWx1ZSk7XG5cbiAgbGV0IHVwZGF0ZVZhbHVlID0gdXNlQ2FsbGJhY2soKHZhbCkgPT4ge1xuICAgIG5leHRJZC5jdXJyZW50ID0gdmFsO1xuICB9LCBbXSk7XG5cbiAgaWRzVXBkYXRlck1hcC5zZXQocmVzLCB1cGRhdGVWYWx1ZSk7XG5cbiAgdXNlTGF5b3V0RWZmZWN0KCgpID0+IHtcbiAgICBsZXQgciA9IHJlcztcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWRzVXBkYXRlck1hcC5kZWxldGUocik7XG4gICAgfTtcbiAgfSwgW3Jlc10pO1xuXG4gIC8vIFRoaXMgY2Fubm90IGNhdXNlIGFuIGluZmluaXRlIGxvb3AgYmVjYXVzZSB0aGUgcmVmIGlzIHVwZGF0ZWQgZmlyc3QuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGxldCBuZXdJZCA9IG5leHRJZC5jdXJyZW50O1xuICAgIGlmIChuZXdJZCkge1xuICAgICAgbmV4dElkLmN1cnJlbnQgPSBudWxsO1xuICAgICAgc2V0VmFsdWUobmV3SWQpO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIHJlcztcbn1cblxuLyoqXG4gKiBNZXJnZXMgdHdvIGlkcy5cbiAqIERpZmZlcmVudCBpZHMgd2lsbCB0cmlnZ2VyIGEgc2lkZS1lZmZlY3QgYW5kIHJlLXJlbmRlciBjb21wb25lbnRzIGhvb2tlZCB1cCB3aXRoIGB1c2VJZGAuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtZXJnZUlkcyhpZEE6IHN0cmluZywgaWRCOiBzdHJpbmcpOiBzdHJpbmcge1xuICBpZiAoaWRBID09PSBpZEIpIHtcbiAgICByZXR1cm4gaWRBO1xuICB9XG5cbiAgbGV0IHNldElkQSA9IGlkc1VwZGF0ZXJNYXAuZ2V0KGlkQSk7XG4gIGlmIChzZXRJZEEpIHtcbiAgICBzZXRJZEEoaWRCKTtcbiAgICByZXR1cm4gaWRCO1xuICB9XG5cbiAgbGV0IHNldElkQiA9IGlkc1VwZGF0ZXJNYXAuZ2V0KGlkQik7XG4gIGlmIChzZXRJZEIpIHtcbiAgICBzZXRJZEIoaWRBKTtcbiAgICByZXR1cm4gaWRBO1xuICB9XG5cbiAgcmV0dXJuIGlkQjtcbn1cblxuLyoqXG4gKiBVc2VkIHRvIGdlbmVyYXRlIGFuIGlkLCBhbmQgYWZ0ZXIgcmVuZGVyLCBjaGVjayBpZiB0aGF0IGlkIGlzIHJlbmRlcmVkIHNvIHdlIGtub3dcbiAqIGlmIHdlIGNhbiB1c2UgaXQgaW4gcGxhY2VzIHN1Y2ggYXMgbGFiZWxsZWRieS5cbiAqIEBwYXJhbSBkZXBBcnJheSAtIFdoZW4gdG8gcmVjYWxjdWxhdGUgaWYgdGhlIGlkIGlzIGluIHRoZSBET00uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VTbG90SWQoZGVwQXJyYXk6IFJlYWRvbmx5QXJyYXk8YW55PiA9IFtdKTogc3RyaW5nIHtcbiAgbGV0IGlkID0gdXNlSWQoKTtcbiAgbGV0IFtyZXNvbHZlZElkLCBzZXRSZXNvbHZlZElkXSA9IHVzZVZhbHVlRWZmZWN0KGlkKTtcbiAgbGV0IHVwZGF0ZUlkID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldFJlc29sdmVkSWQoZnVuY3Rpb24gKigpIHtcbiAgICAgIHlpZWxkIGlkO1xuXG4gICAgICB5aWVsZCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkgPyBpZCA6IG51bGw7XG4gICAgfSk7XG4gIH0sIFtpZCwgc2V0UmVzb2x2ZWRJZF0pO1xuXG4gIHVzZUxheW91dEVmZmVjdCh1cGRhdGVJZCwgW2lkLCB1cGRhdGVJZCwgLi4uZGVwQXJyYXldKTtcblxuICByZXR1cm4gcmVzb2x2ZWRJZDtcbn1cbiIsIi8qXG4gKiBDb3B5cmlnaHQgMjAyMCBBZG9iZS4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5XG4gKiBvZiB0aGUgTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyXG4gKiB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBSRVBSRVNFTlRBVElPTlNcbiAqIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZVxuICogZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIENhbGxzIGFsbCBmdW5jdGlvbnMgaW4gdGhlIG9yZGVyIHRoZXkgd2VyZSBjaGFpbmVkIHdpdGggdGhlIHNhbWUgYXJndW1lbnRzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2hhaW4oLi4uY2FsbGJhY2tzOiBhbnlbXSk6ICguLi5hcmdzOiBhbnlbXSkgPT4gdm9pZCB7XG4gIHJldHVybiAoLi4uYXJnczogYW55W10pID0+IHtcbiAgICBmb3IgKGxldCBjYWxsYmFjayBvZiBjYWxsYmFja3MpIHtcbiAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgY2FsbGJhY2soLi4uYXJncyk7XG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuIiwiLypcbiAqIENvcHlyaWdodCAyMDIwIEFkb2JlLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHlcbiAqIG9mIHRoZSBMaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXJcbiAqIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIFJFUFJFU0VOVEFUSU9OU1xuICogT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlXG4gKiBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7Y2hhaW59IGZyb20gJy4vY2hhaW4nO1xuaW1wb3J0IGNsc3ggZnJvbSAnY2xzeCc7XG5pbXBvcnQge21lcmdlSWRzfSBmcm9tICcuL3VzZUlkJztcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgW2tleTogc3RyaW5nXTogYW55XG59XG5cbi8vIHRha2VuIGZyb206IGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzUxNjAzMjUwL3R5cGVzY3JpcHQtMy1wYXJhbWV0ZXItbGlzdC1pbnRlcnNlY3Rpb24tdHlwZS81MTYwNDM3OSM1MTYwNDM3OVxudHlwZSBUdXBsZVR5cGVzPFQ+ID0geyBbUCBpbiBrZXlvZiBUXTogVFtQXSB9IGV4dGVuZHMgeyBba2V5OiBudW1iZXJdOiBpbmZlciBWIH0gPyBWIDogbmV2ZXI7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWYsIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFyc1xudHlwZSBVbmlvblRvSW50ZXJzZWN0aW9uPFU+ID0gKFUgZXh0ZW5kcyBhbnkgPyAoazogVSkgPT4gdm9pZCA6IG5ldmVyKSBleHRlbmRzICgoazogaW5mZXIgSSkgPT4gdm9pZCkgPyBJIDogbmV2ZXI7XG5cbi8qKlxuICogTWVyZ2VzIG11bHRpcGxlIHByb3BzIG9iamVjdHMgdG9nZXRoZXIuIEV2ZW50IGhhbmRsZXJzIGFyZSBjaGFpbmVkLFxuICogY2xhc3NOYW1lcyBhcmUgY29tYmluZWQsIGFuZCBpZHMgYXJlIGRlZHVwbGljYXRlZCAtIGRpZmZlcmVudCBpZHNcbiAqIHdpbGwgdHJpZ2dlciBhIHNpZGUtZWZmZWN0IGFuZCByZS1yZW5kZXIgY29tcG9uZW50cyBob29rZWQgdXAgd2l0aCBgdXNlSWRgLlxuICogRm9yIGFsbCBvdGhlciBwcm9wcywgdGhlIGxhc3QgcHJvcCBvYmplY3Qgb3ZlcnJpZGVzIGFsbCBwcmV2aW91cyBvbmVzLlxuICogQHBhcmFtIGFyZ3MgLSBNdWx0aXBsZSBzZXRzIG9mIHByb3BzIHRvIG1lcmdlIHRvZ2V0aGVyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbWVyZ2VQcm9wczxUIGV4dGVuZHMgUHJvcHNbXT4oLi4uYXJnczogVCk6IFVuaW9uVG9JbnRlcnNlY3Rpb248VHVwbGVUeXBlczxUPj4ge1xuICAvLyBTdGFydCB3aXRoIGEgYmFzZSBjbG9uZSBvZiB0aGUgZmlyc3QgYXJndW1lbnQuIFRoaXMgaXMgYSBsb3QgZmFzdGVyIHRoYW4gc3RhcnRpbmdcbiAgLy8gd2l0aCBhbiBlbXB0eSBvYmplY3QgYW5kIGFkZGluZyBwcm9wZXJ0aWVzIGFzIHdlIGdvLlxuICBsZXQgcmVzdWx0OiBQcm9wcyA9IHsuLi5hcmdzWzBdfTtcbiAgZm9yIChsZXQgaSA9IDE7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgbGV0IHByb3BzID0gYXJnc1tpXTtcbiAgICBmb3IgKGxldCBrZXkgaW4gcHJvcHMpIHtcbiAgICAgIGxldCBhID0gcmVzdWx0W2tleV07XG4gICAgICBsZXQgYiA9IHByb3BzW2tleV07XG5cbiAgICAgIC8vIENoYWluIGV2ZW50c1xuICAgICAgaWYgKFxuICAgICAgICB0eXBlb2YgYSA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgICAgICB0eXBlb2YgYiA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgICAgICAvLyBUaGlzIGlzIGEgbG90IGZhc3RlciB0aGFuIGEgcmVnZXguXG4gICAgICAgIGtleVswXSA9PT0gJ28nICYmXG4gICAgICAgIGtleVsxXSA9PT0gJ24nICYmXG4gICAgICAgIGtleS5jaGFyQ29kZUF0KDIpID49IC8qICdBJyAqLyA2NSAmJlxuICAgICAgICBrZXkuY2hhckNvZGVBdCgyKSA8PSAvKiAnWicgKi8gOTBcbiAgICAgICkge1xuICAgICAgICByZXN1bHRba2V5XSA9IGNoYWluKGEsIGIpO1xuXG4gICAgICAgIC8vIE1lcmdlIGNsYXNzbmFtZXMsIHNvbWV0aW1lcyBjbGFzc05hbWVzIGFyZSBlbXB0eSBzdHJpbmcgd2hpY2ggZXZhbCB0byBmYWxzZSwgc28gd2UganVzdCBuZWVkIHRvIGRvIGEgdHlwZSBjaGVja1xuICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgKGtleSA9PT0gJ2NsYXNzTmFtZScgfHwga2V5ID09PSAnVU5TQUZFX2NsYXNzTmFtZScpICYmXG4gICAgICAgIHR5cGVvZiBhID09PSAnc3RyaW5nJyAmJlxuICAgICAgICB0eXBlb2YgYiA9PT0gJ3N0cmluZydcbiAgICAgICkge1xuICAgICAgICByZXN1bHRba2V5XSA9IGNsc3goYSwgYik7XG4gICAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ2lkJyAmJiBhICYmIGIpIHtcbiAgICAgICAgcmVzdWx0LmlkID0gbWVyZ2VJZHMoYSwgYik7XG4gICAgICAgIC8vIE92ZXJyaWRlIG90aGVyc1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0W2tleV0gPSBiICE9PSB1bmRlZmluZWQgPyBiIDogYTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzdWx0IGFzIFVuaW9uVG9JbnRlcnNlY3Rpb248VHVwbGVUeXBlczxUPj47XG59XG4iLCIvKlxuICogQ29weXJpZ2h0IDIwMjAgQWRvYmUuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weVxuICogb2YgdGhlIExpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlclxuICogdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgUkVQUkVTRU5UQVRJT05TXG4gKiBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2VcbiAqIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtGb3J3YXJkZWRSZWZ9IGZyb20gJ3JlYWN0JztcblxuLyoqXG4gKiBNZXJnZXMgbXVsdGlwbGUgcmVmcyBpbnRvIG9uZS4gV29ya3Mgd2l0aCBlaXRoZXIgY2FsbGJhY2sgb3Igb2JqZWN0IHJlZnMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtZXJnZVJlZnM8VD4oLi4ucmVmczogRm9yd2FyZGVkUmVmPFQ+W10pOiBGb3J3YXJkZWRSZWY8VD4ge1xuICByZXR1cm4gKHZhbHVlOiBUKSA9PiB7XG4gICAgZm9yIChsZXQgcmVmIG9mIHJlZnMpIHtcbiAgICAgIGlmICh0eXBlb2YgcmVmID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJlZih2YWx1ZSk7XG4gICAgICB9IGVsc2UgaWYgKHJlZiAhPSBudWxsKSB7XG4gICAgICAgIHJlZi5jdXJyZW50ID0gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuIiwiLypcbiAqIENvcHlyaWdodCAyMDIwIEFkb2JlLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHlcbiAqIG9mIHRoZSBMaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXJcbiAqIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIFJFUFJFU0VOVEFUSU9OU1xuICogT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlXG4gKiBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7QXJpYUxhYmVsaW5nUHJvcHMsIERPTVByb3BzfSBmcm9tICdAcmVhY3QtdHlwZXMvc2hhcmVkJztcbmltcG9ydCB7SFRNTEF0dHJpYnV0ZXN9IGZyb20gJ3JlYWN0JztcblxuY29uc3QgRE9NUHJvcE5hbWVzID0gbmV3IFNldChbXG4gICdpZCdcbl0pO1xuXG5jb25zdCBsYWJlbGFibGVQcm9wTmFtZXMgPSBuZXcgU2V0KFtcbiAgJ2FyaWEtbGFiZWwnLFxuICAnYXJpYS1sYWJlbGxlZGJ5JyxcbiAgJ2FyaWEtZGVzY3JpYmVkYnknLFxuICAnYXJpYS1kZXRhaWxzJ1xuXSk7XG5cbmludGVyZmFjZSBPcHRpb25zIHtcbiAgLyoqXG4gICAqIElmIGxhYmVsbGluZyBhc3NvY2lhdGVkIGFyaWEgcHJvcGVydGllcyBzaG91bGQgYmUgaW5jbHVkZWQgaW4gdGhlIGZpbHRlci5cbiAgICovXG4gIGxhYmVsYWJsZT86IGJvb2xlYW4sXG4gIC8qKlxuICAgKiBBIFNldCBvZiBvdGhlciBwcm9wZXJ0eSBuYW1lcyB0aGF0IHNob3VsZCBiZSBpbmNsdWRlZCBpbiB0aGUgZmlsdGVyLlxuICAgKi9cbiAgcHJvcE5hbWVzPzogU2V0PHN0cmluZz5cbn1cblxuY29uc3QgcHJvcFJlID0gL14oZGF0YS0uKikkLztcblxuLyoqXG4gKiBGaWx0ZXJzIG91dCBhbGwgcHJvcHMgdGhhdCBhcmVuJ3QgdmFsaWQgRE9NIHByb3BzIG9yIGRlZmluZWQgdmlhIG92ZXJyaWRlIHByb3Agb2JqLlxuICogQHBhcmFtIHByb3BzIC0gVGhlIGNvbXBvbmVudCBwcm9wcyB0byBiZSBmaWx0ZXJlZC5cbiAqIEBwYXJhbSBvcHRzIC0gUHJvcHMgdG8gb3ZlcnJpZGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXJET01Qcm9wcyhwcm9wczogRE9NUHJvcHMgJiBBcmlhTGFiZWxpbmdQcm9wcywgb3B0czogT3B0aW9ucyA9IHt9KTogRE9NUHJvcHMgJiBBcmlhTGFiZWxpbmdQcm9wcyB7XG4gIGxldCB7bGFiZWxhYmxlLCBwcm9wTmFtZXN9ID0gb3B0cztcbiAgbGV0IGZpbHRlcmVkUHJvcHM6IEhUTUxBdHRyaWJ1dGVzPEhUTUxFbGVtZW50PiA9IHt9O1xuXG4gIGZvciAoY29uc3QgcHJvcCBpbiBwcm9wcykge1xuICAgIGlmIChcbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChwcm9wcywgcHJvcCkgJiYgKFxuICAgICAgICBET01Qcm9wTmFtZXMuaGFzKHByb3ApIHx8XG4gICAgICAgIChsYWJlbGFibGUgJiYgbGFiZWxhYmxlUHJvcE5hbWVzLmhhcyhwcm9wKSkgfHxcbiAgICAgICAgcHJvcE5hbWVzPy5oYXMocHJvcCkgfHxcbiAgICAgICAgcHJvcFJlLnRlc3QocHJvcClcbiAgICAgIClcbiAgICApIHtcbiAgICAgIGZpbHRlcmVkUHJvcHNbcHJvcF0gPSBwcm9wc1twcm9wXTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZmlsdGVyZWRQcm9wcztcbn1cbiIsIi8qXG4gKiBDb3B5cmlnaHQgMjAyMCBBZG9iZS4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5XG4gKiBvZiB0aGUgTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyXG4gKiB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBSRVBSRVNFTlRBVElPTlNcbiAqIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZVxuICogZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vLyBUaGlzIGlzIGEgcG9seWZpbGwgZm9yIGVsZW1lbnQuZm9jdXMoe3ByZXZlbnRTY3JvbGw6IHRydWV9KTtcbi8vIEN1cnJlbnRseSBuZWNlc3NhcnkgZm9yIFNhZmFyaSBhbmQgb2xkIEVkZ2U6XG4vLyBodHRwczovL2Nhbml1c2UuY29tLyNmZWF0PW1kbi1hcGlfaHRtbGVsZW1lbnRfZm9jdXNfcHJldmVudHNjcm9sbF9vcHRpb25cbi8vIFNlZSBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTc4NTgzXG4vL1xuXG4vLyBPcmlnaW5hbCBsaWNlbnNpbmcgZm9yIHRoZSBmb2xsb3dpbmcgbWV0aG9kcyBjYW4gYmUgZm91bmQgaW4gdGhlXG4vLyBOT1RJQ0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbi8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vY2FsdmVsbGlkby9mb2N1cy1vcHRpb25zLXBvbHlmaWxsXG5cbmludGVyZmFjZSBTY3JvbGxhYmxlRWxlbWVudCB7XG4gIGVsZW1lbnQ6IEhUTUxFbGVtZW50LFxuICBzY3JvbGxUb3A6IG51bWJlcixcbiAgc2Nyb2xsTGVmdDogbnVtYmVyXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb2N1c1dpdGhvdXRTY3JvbGxpbmcoZWxlbWVudDogSFRNTEVsZW1lbnQpIHtcbiAgaWYgKHN1cHBvcnRzUHJldmVudFNjcm9sbCgpKSB7XG4gICAgZWxlbWVudC5mb2N1cyh7cHJldmVudFNjcm9sbDogdHJ1ZX0pO1xuICB9IGVsc2Uge1xuICAgIGxldCBzY3JvbGxhYmxlRWxlbWVudHMgPSBnZXRTY3JvbGxhYmxlRWxlbWVudHMoZWxlbWVudCk7XG4gICAgZWxlbWVudC5mb2N1cygpO1xuICAgIHJlc3RvcmVTY3JvbGxQb3NpdGlvbihzY3JvbGxhYmxlRWxlbWVudHMpO1xuICB9XG59XG5cbmxldCBzdXBwb3J0c1ByZXZlbnRTY3JvbGxDYWNoZWQ6IGJvb2xlYW4gPSBudWxsO1xuZnVuY3Rpb24gc3VwcG9ydHNQcmV2ZW50U2Nyb2xsKCkge1xuICBpZiAoc3VwcG9ydHNQcmV2ZW50U2Nyb2xsQ2FjaGVkID09IG51bGwpIHtcbiAgICBzdXBwb3J0c1ByZXZlbnRTY3JvbGxDYWNoZWQgPSBmYWxzZTtcbiAgICB0cnkge1xuICAgICAgdmFyIGZvY3VzRWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgZm9jdXNFbGVtLmZvY3VzKHtcbiAgICAgICAgZ2V0IHByZXZlbnRTY3JvbGwoKSB7XG4gICAgICAgICAgc3VwcG9ydHNQcmV2ZW50U2Nyb2xsQ2FjaGVkID0gdHJ1ZTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gSWdub3JlXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHN1cHBvcnRzUHJldmVudFNjcm9sbENhY2hlZDtcbn1cblxuZnVuY3Rpb24gZ2V0U2Nyb2xsYWJsZUVsZW1lbnRzKGVsZW1lbnQ6IEhUTUxFbGVtZW50KTogU2Nyb2xsYWJsZUVsZW1lbnRbXSB7XG4gIHZhciBwYXJlbnQgPSBlbGVtZW50LnBhcmVudE5vZGU7XG4gIHZhciBzY3JvbGxhYmxlRWxlbWVudHM6IFNjcm9sbGFibGVFbGVtZW50W10gPSBbXTtcbiAgdmFyIHJvb3RTY3JvbGxpbmdFbGVtZW50ID0gZG9jdW1lbnQuc2Nyb2xsaW5nRWxlbWVudCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG5cbiAgd2hpbGUgKHBhcmVudCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50ICYmIHBhcmVudCAhPT0gcm9vdFNjcm9sbGluZ0VsZW1lbnQpIHtcbiAgICBpZiAoXG4gICAgICBwYXJlbnQub2Zmc2V0SGVpZ2h0IDwgcGFyZW50LnNjcm9sbEhlaWdodCB8fFxuICAgICAgcGFyZW50Lm9mZnNldFdpZHRoIDwgcGFyZW50LnNjcm9sbFdpZHRoXG4gICAgKSB7XG4gICAgICBzY3JvbGxhYmxlRWxlbWVudHMucHVzaCh7XG4gICAgICAgIGVsZW1lbnQ6IHBhcmVudCxcbiAgICAgICAgc2Nyb2xsVG9wOiBwYXJlbnQuc2Nyb2xsVG9wLFxuICAgICAgICBzY3JvbGxMZWZ0OiBwYXJlbnQuc2Nyb2xsTGVmdFxuICAgICAgfSk7XG4gICAgfVxuICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnROb2RlO1xuICB9XG5cbiAgaWYgKHJvb3RTY3JvbGxpbmdFbGVtZW50IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcbiAgICBzY3JvbGxhYmxlRWxlbWVudHMucHVzaCh7XG4gICAgICBlbGVtZW50OiByb290U2Nyb2xsaW5nRWxlbWVudCxcbiAgICAgIHNjcm9sbFRvcDogcm9vdFNjcm9sbGluZ0VsZW1lbnQuc2Nyb2xsVG9wLFxuICAgICAgc2Nyb2xsTGVmdDogcm9vdFNjcm9sbGluZ0VsZW1lbnQuc2Nyb2xsTGVmdFxuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHNjcm9sbGFibGVFbGVtZW50cztcbn1cblxuZnVuY3Rpb24gcmVzdG9yZVNjcm9sbFBvc2l0aW9uKHNjcm9sbGFibGVFbGVtZW50czogU2Nyb2xsYWJsZUVsZW1lbnRbXSkge1xuICBmb3IgKGxldCB7ZWxlbWVudCwgc2Nyb2xsVG9wLCBzY3JvbGxMZWZ0fSBvZiBzY3JvbGxhYmxlRWxlbWVudHMpIHtcbiAgICBlbGVtZW50LnNjcm9sbFRvcCA9IHNjcm9sbFRvcDtcbiAgICBlbGVtZW50LnNjcm9sbExlZnQgPSBzY3JvbGxMZWZ0O1xuICB9XG59XG4iLCIvKlxuICogQ29weXJpZ2h0IDIwMjAgQWRvYmUuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weVxuICogb2YgdGhlIExpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlclxuICogdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgUkVQUkVTRU5UQVRJT05TXG4gKiBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2VcbiAqIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGdldE9mZnNldChlbGVtZW50LCByZXZlcnNlLCBvcmllbnRhdGlvbiA9ICdob3Jpem9udGFsJykge1xuICBsZXQgcmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIGlmIChyZXZlcnNlKSB7XG4gICAgcmV0dXJuIG9yaWVudGF0aW9uID09PSAnaG9yaXpvbnRhbCcgPyByZWN0LnJpZ2h0IDogcmVjdC5ib3R0b207XG4gIH1cbiAgcmV0dXJuIG9yaWVudGF0aW9uID09PSAnaG9yaXpvbnRhbCcgPyByZWN0LmxlZnQgOiByZWN0LnRvcDtcbn1cbiIsIi8qXG4gKiBDb3B5cmlnaHQgMjAyMCBBZG9iZS4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5XG4gKiBvZiB0aGUgTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyXG4gKiB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBSRVBSRVNFTlRBVElPTlNcbiAqIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZVxuICogZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vLyBXZSBzdG9yZSBhIGdsb2JhbCBsaXN0IG9mIGVsZW1lbnRzIHRoYXQgYXJlIGN1cnJlbnRseSB0cmFuc2l0aW9uaW5nLFxuLy8gbWFwcGVkIHRvIGEgc2V0IG9mIENTUyBwcm9wZXJ0aWVzIHRoYXQgYXJlIHRyYW5zaXRpb25pbmcgZm9yIHRoYXQgZWxlbWVudC5cbi8vIFRoaXMgaXMgbmVjZXNzYXJ5IHJhdGhlciB0aGFuIGEgc2ltcGxlIGNvdW50IG9mIHRyYW5zaXRpb25zIGJlY2F1c2Ugb2YgYnJvd3NlclxuLy8gYnVncywgZS5nLiBDaHJvbWUgc29tZXRpbWVzIGZpcmVzIGJvdGggdHJhbnNpdGlvbmVuZCBhbmQgdHJhbnNpdGlvbmNhbmNlbCByYXRoZXJcbi8vIHRoYW4gb25lIG9yIHRoZSBvdGhlci4gU28gd2UgbmVlZCB0byB0cmFjayB3aGF0J3MgYWN0dWFsbHkgdHJhbnNpdGlvbmluZyBzbyB0aGF0XG4vLyB3ZSBjYW4gaWdub3JlIHRoZXNlIGR1cGxpY2F0ZSBldmVudHMuXG5sZXQgdHJhbnNpdGlvbnNCeUVsZW1lbnQgPSBuZXcgTWFwPEV2ZW50VGFyZ2V0LCBTZXQ8c3RyaW5nPj4oKTtcblxuLy8gQSBsaXN0IG9mIGNhbGxiYWNrcyB0byBjYWxsIG9uY2UgdGhlcmUgYXJlIG5vIHRyYW5zaXRpb25pbmcgZWxlbWVudHMuXG5sZXQgdHJhbnNpdGlvbkNhbGxiYWNrcyA9IG5ldyBTZXQ8KCkgPT4gdm9pZD4oKTtcblxuZnVuY3Rpb24gc2V0dXBHbG9iYWxFdmVudHMoKSB7XG4gIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGxldCBvblRyYW5zaXRpb25TdGFydCA9IChlOiBUcmFuc2l0aW9uRXZlbnQpID0+IHtcbiAgICAvLyBBZGQgdGhlIHRyYW5zaXRpb25pbmcgcHJvcGVydHkgdG8gdGhlIGxpc3QgZm9yIHRoaXMgZWxlbWVudC5cbiAgICBsZXQgdHJhbnNpdGlvbnMgPSB0cmFuc2l0aW9uc0J5RWxlbWVudC5nZXQoZS50YXJnZXQpO1xuICAgIGlmICghdHJhbnNpdGlvbnMpIHtcbiAgICAgIHRyYW5zaXRpb25zID0gbmV3IFNldCgpO1xuICAgICAgdHJhbnNpdGlvbnNCeUVsZW1lbnQuc2V0KGUudGFyZ2V0LCB0cmFuc2l0aW9ucyk7XG5cbiAgICAgIC8vIFRoZSB0cmFuc2l0aW9uY2FuY2VsIGV2ZW50IG11c3QgYmUgcmVnaXN0ZXJlZCBvbiB0aGUgZWxlbWVudCBpdHNlbGYsIHJhdGhlciB0aGFuIGFzIGEgZ2xvYmFsXG4gICAgICAvLyBldmVudC4gVGhpcyBlbmFibGVzIHVzIHRvIGhhbmRsZSB3aGVuIHRoZSBub2RlIGlzIGRlbGV0ZWQgZnJvbSB0aGUgZG9jdW1lbnQgd2hpbGUgaXQgaXMgdHJhbnNpdGlvbmluZy5cbiAgICAgIC8vIEluIHRoYXQgY2FzZSwgdGhlIGNhbmNlbCBldmVudCB3b3VsZCBoYXZlIG5vd2hlcmUgdG8gYnViYmxlIHRvIHNvIHdlIG5lZWQgdG8gaGFuZGxlIGl0IGRpcmVjdGx5LlxuICAgICAgZS50YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmNhbmNlbCcsIG9uVHJhbnNpdGlvbkVuZCk7XG4gICAgfVxuXG4gICAgdHJhbnNpdGlvbnMuYWRkKGUucHJvcGVydHlOYW1lKTtcbiAgfTtcblxuICBsZXQgb25UcmFuc2l0aW9uRW5kID0gKGU6IFRyYW5zaXRpb25FdmVudCkgPT4ge1xuICAgIC8vIFJlbW92ZSBwcm9wZXJ0eSBmcm9tIGxpc3Qgb2YgdHJhbnNpdGlvbmluZyBwcm9wZXJ0aWVzLlxuICAgIGxldCBwcm9wZXJ0aWVzID0gdHJhbnNpdGlvbnNCeUVsZW1lbnQuZ2V0KGUudGFyZ2V0KTtcbiAgICBpZiAoIXByb3BlcnRpZXMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBwcm9wZXJ0aWVzLmRlbGV0ZShlLnByb3BlcnR5TmFtZSk7XG5cbiAgICAvLyBJZiBlbXB0eSwgcmVtb3ZlIHRyYW5zaXRpb25jYW5jZWwgZXZlbnQsIGFuZCByZW1vdmUgdGhlIGVsZW1lbnQgZnJvbSB0aGUgbGlzdCBvZiB0cmFuc2l0aW9uaW5nIGVsZW1lbnRzLlxuICAgIGlmIChwcm9wZXJ0aWVzLnNpemUgPT09IDApIHtcbiAgICAgIGUudGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25jYW5jZWwnLCBvblRyYW5zaXRpb25FbmQpO1xuICAgICAgdHJhbnNpdGlvbnNCeUVsZW1lbnQuZGVsZXRlKGUudGFyZ2V0KTtcbiAgICB9XG5cbiAgICAvLyBJZiBubyB0cmFuc2l0aW9uaW5nIGVsZW1lbnRzLCBjYWxsIGFsbCBvZiB0aGUgcXVldWVkIGNhbGxiYWNrcy5cbiAgICBpZiAodHJhbnNpdGlvbnNCeUVsZW1lbnQuc2l6ZSA9PT0gMCkge1xuICAgICAgZm9yIChsZXQgY2Igb2YgdHJhbnNpdGlvbkNhbGxiYWNrcykge1xuICAgICAgICBjYigpO1xuICAgICAgfVxuXG4gICAgICB0cmFuc2l0aW9uQ2FsbGJhY2tzLmNsZWFyKCk7XG4gICAgfVxuICB9O1xuXG4gIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbnJ1bicsIG9uVHJhbnNpdGlvblN0YXJ0KTtcbiAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgb25UcmFuc2l0aW9uRW5kKTtcbn1cblxuaWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgIT09ICdsb2FkaW5nJykge1xuICAgIHNldHVwR2xvYmFsRXZlbnRzKCk7XG4gIH0gZWxzZSB7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIHNldHVwR2xvYmFsRXZlbnRzKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcnVuQWZ0ZXJUcmFuc2l0aW9uKGZuOiAoKSA9PiB2b2lkKSB7XG4gIC8vIFdhaXQgb25lIGZyYW1lIHRvIHNlZSBpZiBhbiBhbmltYXRpb24gc3RhcnRzLCBlLmcuIGEgdHJhbnNpdGlvbiBvbiBtb3VudC5cbiAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAvLyBJZiBubyB0cmFuc2l0aW9ucyBhcmUgcnVubmluZywgY2FsbCB0aGUgZnVuY3Rpb24gaW1tZWRpYXRlbHkuXG4gICAgLy8gT3RoZXJ3aXNlLCBhZGQgaXQgdG8gYSBsaXN0IG9mIGNhbGxiYWNrcyB0byBydW4gYXQgdGhlIGVuZCBvZiB0aGUgYW5pbWF0aW9uLlxuICAgIGlmICh0cmFuc2l0aW9uc0J5RWxlbWVudC5zaXplID09PSAwKSB7XG4gICAgICBmbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0cmFuc2l0aW9uQ2FsbGJhY2tzLmFkZChmbik7XG4gICAgfVxuICB9KTtcbn1cbiIsIi8qXG4gKiBDb3B5cmlnaHQgMjAyMCBBZG9iZS4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5XG4gKiBvZiB0aGUgTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyXG4gKiB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBSRVBSRVNFTlRBVElPTlNcbiAqIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZVxuICogZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge2dldE9mZnNldH0gZnJvbSAnLi9nZXRPZmZzZXQnO1xuaW1wb3J0IHtPcmllbnRhdGlvbn0gZnJvbSAnQHJlYWN0LXR5cGVzL3NoYXJlZCc7XG5pbXBvcnQgUmVhY3QsIHtIVE1MQXR0cmlidXRlcywgTXV0YWJsZVJlZk9iamVjdCwgdXNlUmVmfSBmcm9tICdyZWFjdCc7XG5cbmludGVyZmFjZSBVc2VEcmFnMURQcm9wcyB7XG4gIGNvbnRhaW5lclJlZjogTXV0YWJsZVJlZk9iamVjdDxIVE1MRWxlbWVudD4sXG4gIHJldmVyc2U/OiBib29sZWFuLFxuICBvcmllbnRhdGlvbj86IE9yaWVudGF0aW9uLFxuICBvbkhvdmVyPzogKGhvdmVyZWQ6IGJvb2xlYW4pID0+IHZvaWQsXG4gIG9uRHJhZz86IChkcmFnZ2luZzogYm9vbGVhbikgPT4gdm9pZCxcbiAgb25Qb3NpdGlvbkNoYW5nZT86IChwb3NpdGlvbjogbnVtYmVyKSA9PiB2b2lkLFxuICBvbkluY3JlbWVudD86ICgpID0+IHZvaWQsXG4gIG9uRGVjcmVtZW50PzogKCkgPT4gdm9pZCxcbiAgb25JbmNyZW1lbnRUb01heD86ICgpID0+IHZvaWQsXG4gIG9uRGVjcmVtZW50VG9NaW4/OiAoKSA9PiB2b2lkLFxuICBvbkNvbGxhcHNlVG9nZ2xlPzogKCkgPT4gdm9pZFxufVxuXG4vLyBLZWVwIHRyYWNrIG9mIGVsZW1lbnRzIHRoYXQgd2UgYXJlIGN1cnJlbnRseSBoYW5kbGluZyBkcmFnZ2luZyBmb3IgdmlhIHVzZURyYWcxRC5cbi8vIElmIHRoZXJlJ3MgYW4gYW5jZXN0b3IgYW5kIGEgZGVzY2VuZGFudCBib3RoIHVzaW5nIHVzZURyYWcxRCgpLCBhbmQgdGhlIHVzZXIgc3RhcnRzXG4vLyBkcmFnZ2luZyB0aGUgZGVzY2VuZGFudCwgd2UgZG9uJ3Qgd2FudCB1c2VEcmFnMUQgZXZlbnRzIHRvIGZpcmUgZm9yIHRoZSBhbmNlc3Rvci5cbmNvbnN0IGRyYWdnaW5nRWxlbWVudHM6IEhUTUxFbGVtZW50W10gPSBbXTtcblxuLy8gY3JlYXRlZCBmb3Igc3BsaXR2aWV3LCB0aGlzIHNob3VsZCBiZSByZXVzYWJsZSBmb3IgdGhpbmdzIGxpa2Ugc2xpZGVycy9kaWFsc1xuLy8gSXQgYWxzbyBoYW5kbGVzIGtleWJvYXJkIGV2ZW50cyBvbiB0aGUgdGFyZ2V0IGFsbG93aW5nIGZvciBpbmNyZW1lbnQvZGVjcmVtZW50IGJ5IGEgZ2l2ZW4gc3RlcHNpemUgYXMgd2VsbCBhcyBtaW5pZnlpbmcvbWF4aW1pemluZyBhbmQgdG9nZ2xpbmcgYmV0d2VlbiBtaW5pZmllZCBhbmQgcHJldmlvdXMgc2l6ZVxuLy8gSXQgY2FuIGFsc28gdGFrZSBhICdyZXZlcnNlJyBwYXJhbSB0byBzYXkgaWYgd2Ugc2hvdWxkIG1lYXN1cmUgZnJvbSB0aGUgcmlnaHQvYm90dG9tIGluc3RlYWQgb2YgdGhlIHRvcC9sZWZ0XG4vLyBJdCBjYW4gYWxzbyBoYW5kbGUgZWl0aGVyIGEgdmVydGljYWwgb3IgaG9yaXpvbnRhbCBtb3ZlbWVudCwgYnV0IG5vdCBib3RoIGF0IHRoZSBzYW1lIHRpbWVcblxuZXhwb3J0IGZ1bmN0aW9uIHVzZURyYWcxRChwcm9wczogVXNlRHJhZzFEUHJvcHMpOiBIVE1MQXR0cmlidXRlczxIVE1MRWxlbWVudD4ge1xuICBjb25zb2xlLndhcm4oJ3VzZURyYWcxRCBpcyBkZXByZWNhdGVkLCBwbGVhc2UgdXNlIGB1c2VNb3ZlYCBpbnN0ZWFkIGh0dHBzOi8vcmVhY3Qtc3BlY3RydW0uYWRvYmUuY29tL3JlYWN0LWFyaWEvdXNlTW92ZS5odG1sJyk7XG4gIGxldCB7Y29udGFpbmVyUmVmLCByZXZlcnNlLCBvcmllbnRhdGlvbiwgb25Ib3Zlciwgb25EcmFnLCBvblBvc2l0aW9uQ2hhbmdlLCBvbkluY3JlbWVudCwgb25EZWNyZW1lbnQsIG9uSW5jcmVtZW50VG9NYXgsIG9uRGVjcmVtZW50VG9NaW4sIG9uQ29sbGFwc2VUb2dnbGV9ID0gcHJvcHM7XG4gIGxldCBnZXRQb3NpdGlvbiA9IChlKSA9PiBvcmllbnRhdGlvbiA9PT0gJ2hvcml6b250YWwnID8gZS5jbGllbnRYIDogZS5jbGllbnRZO1xuICBsZXQgZ2V0TmV4dE9mZnNldCA9IChlOiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgbGV0IGNvbnRhaW5lck9mZnNldCA9IGdldE9mZnNldChjb250YWluZXJSZWYuY3VycmVudCwgcmV2ZXJzZSwgb3JpZW50YXRpb24pO1xuICAgIGxldCBtb3VzZU9mZnNldCA9IGdldFBvc2l0aW9uKGUpO1xuICAgIGxldCBuZXh0T2Zmc2V0ID0gcmV2ZXJzZSA/IGNvbnRhaW5lck9mZnNldCAtIG1vdXNlT2Zmc2V0IDogbW91c2VPZmZzZXQgLSBjb250YWluZXJPZmZzZXQ7XG4gICAgcmV0dXJuIG5leHRPZmZzZXQ7XG4gIH07XG4gIGxldCBkcmFnZ2luZyA9IHVzZVJlZihmYWxzZSk7XG4gIGxldCBwcmV2UG9zaXRpb24gPSB1c2VSZWYoMCk7XG5cbiAgLy8gS2VlcCB0cmFjayBvZiB0aGUgY3VycmVudCBoYW5kbGVycyBpbiBhIHJlZiBzbyB0aGF0IHRoZSBldmVudHMgY2FuIGFjY2VzcyB0aGVtLlxuICBsZXQgaGFuZGxlcnMgPSB1c2VSZWYoe29uUG9zaXRpb25DaGFuZ2UsIG9uRHJhZ30pO1xuICBoYW5kbGVycy5jdXJyZW50Lm9uRHJhZyA9IG9uRHJhZztcbiAgaGFuZGxlcnMuY3VycmVudC5vblBvc2l0aW9uQ2hhbmdlID0gb25Qb3NpdGlvbkNoYW5nZTtcblxuICBsZXQgb25Nb3VzZURyYWdnZWQgPSAoZTogTW91c2VFdmVudCkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBsZXQgbmV4dE9mZnNldCA9IGdldE5leHRPZmZzZXQoZSk7XG4gICAgaWYgKCFkcmFnZ2luZy5jdXJyZW50KSB7XG4gICAgICBkcmFnZ2luZy5jdXJyZW50ID0gdHJ1ZTtcbiAgICAgIGlmIChoYW5kbGVycy5jdXJyZW50Lm9uRHJhZykge1xuICAgICAgICBoYW5kbGVycy5jdXJyZW50Lm9uRHJhZyh0cnVlKTtcbiAgICAgIH1cbiAgICAgIGlmIChoYW5kbGVycy5jdXJyZW50Lm9uUG9zaXRpb25DaGFuZ2UpIHtcbiAgICAgICAgaGFuZGxlcnMuY3VycmVudC5vblBvc2l0aW9uQ2hhbmdlKG5leHRPZmZzZXQpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAocHJldlBvc2l0aW9uLmN1cnJlbnQgPT09IG5leHRPZmZzZXQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcHJldlBvc2l0aW9uLmN1cnJlbnQgPSBuZXh0T2Zmc2V0O1xuICAgIGlmIChvblBvc2l0aW9uQ2hhbmdlKSB7XG4gICAgICBvblBvc2l0aW9uQ2hhbmdlKG5leHRPZmZzZXQpO1xuICAgIH1cbiAgfTtcblxuICBsZXQgb25Nb3VzZVVwID0gKGU6IE1vdXNlRXZlbnQpID0+IHtcbiAgICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldCBhcyBIVE1MRWxlbWVudDtcbiAgICBkcmFnZ2luZy5jdXJyZW50ID0gZmFsc2U7XG4gICAgbGV0IG5leHRPZmZzZXQgPSBnZXROZXh0T2Zmc2V0KGUpO1xuICAgIGlmIChoYW5kbGVycy5jdXJyZW50Lm9uRHJhZykge1xuICAgICAgaGFuZGxlcnMuY3VycmVudC5vbkRyYWcoZmFsc2UpO1xuICAgIH1cbiAgICBpZiAoaGFuZGxlcnMuY3VycmVudC5vblBvc2l0aW9uQ2hhbmdlKSB7XG4gICAgICBoYW5kbGVycy5jdXJyZW50Lm9uUG9zaXRpb25DaGFuZ2UobmV4dE9mZnNldCk7XG4gICAgfVxuXG4gICAgZHJhZ2dpbmdFbGVtZW50cy5zcGxpY2UoZHJhZ2dpbmdFbGVtZW50cy5pbmRleE9mKHRhcmdldCksIDEpO1xuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgb25Nb3VzZVVwLCBmYWxzZSk7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIG9uTW91c2VEcmFnZ2VkLCBmYWxzZSk7XG4gIH07XG5cbiAgbGV0IG9uTW91c2VEb3duID0gKGU6IFJlYWN0Lk1vdXNlRXZlbnQ8SFRNTEVsZW1lbnQ+KSA9PiB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZS5jdXJyZW50VGFyZ2V0O1xuICAgIC8vIElmIHdlJ3JlIGFscmVhZHkgaGFuZGxpbmcgZHJhZ2dpbmcgb24gYSBkZXNjZW5kYW50IHdpdGggdXNlRHJhZzFELCB0aGVuXG4gICAgLy8gd2UgZG9uJ3Qgd2FudCB0byBoYW5kbGUgdGhlIGRyYWcgbW90aW9uIG9uIHRoaXMgdGFyZ2V0IGFzIHdlbGwuXG4gICAgaWYgKGRyYWdnaW5nRWxlbWVudHMuc29tZShlbHQgPT4gdGFyZ2V0LmNvbnRhaW5zKGVsdCkpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWdnaW5nRWxlbWVudHMucHVzaCh0YXJnZXQpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBvbk1vdXNlRHJhZ2dlZCwgZmFsc2UpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgb25Nb3VzZVVwLCBmYWxzZSk7XG4gIH07XG5cbiAgbGV0IG9uTW91c2VFbnRlciA9ICgpID0+IHtcbiAgICBpZiAob25Ib3Zlcikge1xuICAgICAgb25Ib3Zlcih0cnVlKTtcbiAgICB9XG4gIH07XG5cbiAgbGV0IG9uTW91c2VPdXQgPSAoKSA9PiB7XG4gICAgaWYgKG9uSG92ZXIpIHtcbiAgICAgIG9uSG92ZXIoZmFsc2UpO1xuICAgIH1cbiAgfTtcblxuICBsZXQgb25LZXlEb3duID0gKGUpID0+IHtcbiAgICBzd2l0Y2ggKGUua2V5KSB7XG4gICAgICBjYXNlICdMZWZ0JzpcbiAgICAgIGNhc2UgJ0Fycm93TGVmdCc6XG4gICAgICAgIGlmIChvcmllbnRhdGlvbiA9PT0gJ2hvcml6b250YWwnKSB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIGlmIChvbkRlY3JlbWVudCAmJiAhcmV2ZXJzZSkge1xuICAgICAgICAgICAgb25EZWNyZW1lbnQoKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKG9uSW5jcmVtZW50ICYmIHJldmVyc2UpIHtcbiAgICAgICAgICAgIG9uSW5jcmVtZW50KCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnVXAnOlxuICAgICAgY2FzZSAnQXJyb3dVcCc6XG4gICAgICAgIGlmIChvcmllbnRhdGlvbiA9PT0gJ3ZlcnRpY2FsJykge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBpZiAob25EZWNyZW1lbnQgJiYgIXJldmVyc2UpIHtcbiAgICAgICAgICAgIG9uRGVjcmVtZW50KCk7XG4gICAgICAgICAgfSBlbHNlIGlmIChvbkluY3JlbWVudCAmJiByZXZlcnNlKSB7XG4gICAgICAgICAgICBvbkluY3JlbWVudCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ1JpZ2h0JzpcbiAgICAgIGNhc2UgJ0Fycm93UmlnaHQnOlxuICAgICAgICBpZiAob3JpZW50YXRpb24gPT09ICdob3Jpem9udGFsJykge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBpZiAob25JbmNyZW1lbnQgJiYgIXJldmVyc2UpIHtcbiAgICAgICAgICAgIG9uSW5jcmVtZW50KCk7XG4gICAgICAgICAgfSBlbHNlIGlmIChvbkRlY3JlbWVudCAmJiByZXZlcnNlKSB7XG4gICAgICAgICAgICBvbkRlY3JlbWVudCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0Rvd24nOlxuICAgICAgY2FzZSAnQXJyb3dEb3duJzpcbiAgICAgICAgaWYgKG9yaWVudGF0aW9uID09PSAndmVydGljYWwnKSB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIGlmIChvbkluY3JlbWVudCAmJiAhcmV2ZXJzZSkge1xuICAgICAgICAgICAgb25JbmNyZW1lbnQoKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKG9uRGVjcmVtZW50ICYmIHJldmVyc2UpIHtcbiAgICAgICAgICAgIG9uRGVjcmVtZW50KCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnSG9tZSc6XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaWYgKG9uRGVjcmVtZW50VG9NaW4pIHtcbiAgICAgICAgICBvbkRlY3JlbWVudFRvTWluKCk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdFbmQnOlxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGlmIChvbkluY3JlbWVudFRvTWF4KSB7XG4gICAgICAgICAgb25JbmNyZW1lbnRUb01heCgpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnRW50ZXInOlxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGlmIChvbkNvbGxhcHNlVG9nZ2xlKSB7XG4gICAgICAgICAgb25Db2xsYXBzZVRvZ2dsZSgpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4ge29uTW91c2VEb3duLCBvbk1vdXNlRW50ZXIsIG9uTW91c2VPdXQsIG9uS2V5RG93bn07XG59XG4iLCIvKlxuICogQ29weXJpZ2h0IDIwMjAgQWRvYmUuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weVxuICogb2YgdGhlIExpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlclxuICogdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgUkVQUkVTRU5UQVRJT05TXG4gKiBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2VcbiAqIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHt1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VSZWZ9IGZyb20gJ3JlYWN0JztcblxuaW50ZXJmYWNlIEdsb2JhbExpc3RlbmVycyB7XG4gIGFkZEdsb2JhbExpc3RlbmVyPEsgZXh0ZW5kcyBrZXlvZiBEb2N1bWVudEV2ZW50TWFwPihlbDogRXZlbnRUYXJnZXQsIHR5cGU6IEssIGxpc3RlbmVyOiAodGhpczogRG9jdW1lbnQsIGV2OiBEb2N1bWVudEV2ZW50TWFwW0tdKSA9PiBhbnksIG9wdGlvbnM/OiBib29sZWFuIHwgQWRkRXZlbnRMaXN0ZW5lck9wdGlvbnMpOiB2b2lkLFxuICBhZGRHbG9iYWxMaXN0ZW5lcihlbDogRXZlbnRUYXJnZXQsIHR5cGU6IHN0cmluZywgbGlzdGVuZXI6IEV2ZW50TGlzdGVuZXJPckV2ZW50TGlzdGVuZXJPYmplY3QsIG9wdGlvbnM/OiBib29sZWFuIHwgQWRkRXZlbnRMaXN0ZW5lck9wdGlvbnMpOiB2b2lkLFxuICByZW1vdmVHbG9iYWxMaXN0ZW5lcjxLIGV4dGVuZHMga2V5b2YgRG9jdW1lbnRFdmVudE1hcD4oZWw6IEV2ZW50VGFyZ2V0LCB0eXBlOiBLLCBsaXN0ZW5lcjogKHRoaXM6IERvY3VtZW50LCBldjogRG9jdW1lbnRFdmVudE1hcFtLXSkgPT4gYW55LCBvcHRpb25zPzogYm9vbGVhbiB8IEV2ZW50TGlzdGVuZXJPcHRpb25zKTogdm9pZCxcbiAgcmVtb3ZlR2xvYmFsTGlzdGVuZXIoZWw6IEV2ZW50VGFyZ2V0LCB0eXBlOiBzdHJpbmcsIGxpc3RlbmVyOiBFdmVudExpc3RlbmVyT3JFdmVudExpc3RlbmVyT2JqZWN0LCBvcHRpb25zPzogYm9vbGVhbiB8IEV2ZW50TGlzdGVuZXJPcHRpb25zKTogdm9pZCxcbiAgcmVtb3ZlQWxsR2xvYmFsTGlzdGVuZXJzKCk6IHZvaWRcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVzZUdsb2JhbExpc3RlbmVycygpOiBHbG9iYWxMaXN0ZW5lcnMge1xuICBsZXQgZ2xvYmFsTGlzdGVuZXJzID0gdXNlUmVmKG5ldyBNYXAoKSk7XG4gIGxldCBhZGRHbG9iYWxMaXN0ZW5lciA9IHVzZUNhbGxiYWNrKChldmVudFRhcmdldCwgdHlwZSwgbGlzdGVuZXIsIG9wdGlvbnMpID0+IHtcbiAgICAvLyBNYWtlIHN1cmUgd2UgcmVtb3ZlIHRoZSBsaXN0ZW5lciBhZnRlciBpdCBpcyBjYWxsZWQgd2l0aCB0aGUgYG9uY2VgIG9wdGlvbi5cbiAgICBsZXQgZm4gPSBvcHRpb25zPy5vbmNlID8gKC4uLmFyZ3MpID0+IHtcbiAgICAgIGdsb2JhbExpc3RlbmVycy5jdXJyZW50LmRlbGV0ZShsaXN0ZW5lcik7XG4gICAgICBsaXN0ZW5lciguLi5hcmdzKTtcbiAgICB9IDogbGlzdGVuZXI7XG4gICAgZ2xvYmFsTGlzdGVuZXJzLmN1cnJlbnQuc2V0KGxpc3RlbmVyLCB7dHlwZSwgZXZlbnRUYXJnZXQsIGZuLCBvcHRpb25zfSk7XG4gICAgZXZlbnRUYXJnZXQuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lciwgb3B0aW9ucyk7XG4gIH0sIFtdKTtcbiAgbGV0IHJlbW92ZUdsb2JhbExpc3RlbmVyID0gdXNlQ2FsbGJhY2soKGV2ZW50VGFyZ2V0LCB0eXBlLCBsaXN0ZW5lciwgb3B0aW9ucykgPT4ge1xuICAgIGxldCBmbiA9IGdsb2JhbExpc3RlbmVycy5jdXJyZW50LmdldChsaXN0ZW5lcik/LmZuIHx8IGxpc3RlbmVyO1xuICAgIGV2ZW50VGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgZm4sIG9wdGlvbnMpO1xuICAgIGdsb2JhbExpc3RlbmVycy5jdXJyZW50LmRlbGV0ZShsaXN0ZW5lcik7XG4gIH0sIFtdKTtcbiAgbGV0IHJlbW92ZUFsbEdsb2JhbExpc3RlbmVycyA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBnbG9iYWxMaXN0ZW5lcnMuY3VycmVudC5mb3JFYWNoKCh2YWx1ZSwga2V5KSA9PiB7XG4gICAgICByZW1vdmVHbG9iYWxMaXN0ZW5lcih2YWx1ZS5ldmVudFRhcmdldCwgdmFsdWUudHlwZSwga2V5LCB2YWx1ZS5vcHRpb25zKTtcbiAgICB9KTtcbiAgfSwgW3JlbW92ZUdsb2JhbExpc3RlbmVyXSk7XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGFycm93LWJvZHktc3R5bGVcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICByZXR1cm4gcmVtb3ZlQWxsR2xvYmFsTGlzdGVuZXJzO1xuICB9LCBbcmVtb3ZlQWxsR2xvYmFsTGlzdGVuZXJzXSk7XG5cbiAgcmV0dXJuIHthZGRHbG9iYWxMaXN0ZW5lciwgcmVtb3ZlR2xvYmFsTGlzdGVuZXIsIHJlbW92ZUFsbEdsb2JhbExpc3RlbmVyc307XG59XG4iLCIvKlxuICogQ29weXJpZ2h0IDIwMjAgQWRvYmUuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weVxuICogb2YgdGhlIExpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlclxuICogdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgUkVQUkVTRU5UQVRJT05TXG4gKiBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2VcbiAqIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtBcmlhTGFiZWxpbmdQcm9wcywgRE9NUHJvcHN9IGZyb20gJ0ByZWFjdC10eXBlcy9zaGFyZWQnO1xuaW1wb3J0IHt1c2VJZH0gZnJvbSAnLi91c2VJZCc7XG5cbi8qKlxuICogTWVyZ2VzIGFyaWEtbGFiZWwgYW5kIGFyaWEtbGFiZWxsZWRieSBpbnRvIGFyaWEtbGFiZWxsZWRieSB3aGVuIGJvdGggZXhpc3QuXG4gKiBAcGFyYW0gcHJvcHMgLSBBcmlhIGxhYmVsIHByb3BzLlxuICogQHBhcmFtIGRlZmF1bHRMYWJlbCAtIERlZmF1bHQgdmFsdWUgZm9yIGFyaWEtbGFiZWwgd2hlbiBub3QgcHJlc2VudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZUxhYmVscyhwcm9wczogRE9NUHJvcHMgJiBBcmlhTGFiZWxpbmdQcm9wcywgZGVmYXVsdExhYmVsPzogc3RyaW5nKTogRE9NUHJvcHMgJiBBcmlhTGFiZWxpbmdQcm9wcyB7XG4gIGxldCB7XG4gICAgaWQsXG4gICAgJ2FyaWEtbGFiZWwnOiBsYWJlbCxcbiAgICAnYXJpYS1sYWJlbGxlZGJ5JzogbGFiZWxsZWRCeVxuICB9ID0gcHJvcHM7XG5cbiAgLy8gSWYgdGhlcmUgaXMgYm90aCBhbiBhcmlhLWxhYmVsIGFuZCBhcmlhLWxhYmVsbGVkYnksXG4gIC8vIGNvbWJpbmUgdGhlbSBieSBwb2ludGluZyB0byB0aGUgZWxlbWVudCBpdHNlbGYuXG4gIGlkID0gdXNlSWQoaWQpO1xuICBpZiAobGFiZWxsZWRCeSAmJiBsYWJlbCkge1xuICAgIGxldCBpZHMgPSBuZXcgU2V0KFsuLi5sYWJlbGxlZEJ5LnRyaW0oKS5zcGxpdCgvXFxzKy8pLCBpZF0pO1xuICAgIGxhYmVsbGVkQnkgPSBbLi4uaWRzXS5qb2luKCcgJyk7XG4gIH0gZWxzZSBpZiAobGFiZWxsZWRCeSkge1xuICAgIGxhYmVsbGVkQnkgPSBsYWJlbGxlZEJ5LnRyaW0oKS5zcGxpdCgvXFxzKy8pLmpvaW4oJyAnKTtcbiAgfVxuXG4gIC8vIElmIG5vIGxhYmVscyBhcmUgcHJvdmlkZWQsIHVzZSB0aGUgZGVmYXVsdFxuICBpZiAoIWxhYmVsICYmICFsYWJlbGxlZEJ5ICYmIGRlZmF1bHRMYWJlbCkge1xuICAgIGxhYmVsID0gZGVmYXVsdExhYmVsO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBpZCxcbiAgICAnYXJpYS1sYWJlbCc6IGxhYmVsLFxuICAgICdhcmlhLWxhYmVsbGVkYnknOiBsYWJlbGxlZEJ5XG4gIH07XG59XG4iLCIvKlxuICogQ29weXJpZ2h0IDIwMjEgQWRvYmUuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weVxuICogb2YgdGhlIExpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlclxuICogdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgUkVQUkVTRU5UQVRJT05TXG4gKiBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2VcbiAqIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtNdXRhYmxlUmVmT2JqZWN0LCB1c2VSZWZ9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7dXNlTGF5b3V0RWZmZWN0fSBmcm9tICcuLyc7XG5cbi8qKlxuICogT2ZmZXJzIGFuIG9iamVjdCByZWYgZm9yIGEgZ2l2ZW4gY2FsbGJhY2sgcmVmIG9yIGFuIG9iamVjdCByZWYuIEVzcGVjaWFsbHlcbiAqIGhlbGZwdWwgd2hlbiBwYXNzaW5nIGZvcndhcmRlZCByZWZzIChjcmVhdGVkIHVzaW5nIGBSZWFjdC5mb3J3YXJkUmVmYCkgdG9cbiAqIFJlYWN0IEFyaWEgSG9va3MuXG4gKlxuICogQHBhcmFtIGZvcndhcmRlZFJlZiBUaGUgb3JpZ2luYWwgcmVmIGludGVuZGVkIHRvIGJlIHVzZWQuXG4gKiBAcmV0dXJucyBBbiBvYmplY3QgcmVmIHRoYXQgdXBkYXRlcyB0aGUgZ2l2ZW4gcmVmLlxuICogQHNlZSBodHRwczovL3JlYWN0anMub3JnL2RvY3MvZm9yd2FyZGluZy1yZWZzLmh0bWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZU9iamVjdFJlZjxUPihmb3J3YXJkZWRSZWY/OiAoKGluc3RhbmNlOiBUIHwgbnVsbCkgPT4gdm9pZCkgfCBNdXRhYmxlUmVmT2JqZWN0PFQgfCBudWxsPiB8IG51bGwpOiBNdXRhYmxlUmVmT2JqZWN0PFQ+IHtcbiAgY29uc3Qgb2JqUmVmID0gdXNlUmVmPFQ+KCk7XG5cbiAgLyoqXG4gICAqIFdlJ3JlIHVzaW5nIGB1c2VMYXlvdXRFZmZlY3RgIGhlcmUgaW5zdGVhZCBvZiBgdXNlRWZmZWN0YCBiZWNhdXNlIHdlIHdhbnRcbiAgICogdG8gbWFrZSBzdXJlIHRoYXQgdGhlIGByZWZgIHZhbHVlIGlzIHVwIHRvIGRhdGUgYmVmb3JlIG90aGVyIHBsYWNlcyBpbiB0aGVcbiAgICogdGhlIGV4ZWN1dGlvbiBjeWNsZSB0cnkgdG8gcmVhZCBpdC5cbiAgICovXG4gIHVzZUxheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFmb3J3YXJkZWRSZWYpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGZvcndhcmRlZFJlZiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgZm9yd2FyZGVkUmVmKG9ialJlZi5jdXJyZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yd2FyZGVkUmVmLmN1cnJlbnQgPSBvYmpSZWYuY3VycmVudDtcbiAgICB9XG4gIH0sIFtmb3J3YXJkZWRSZWZdKTtcblxuICByZXR1cm4gb2JqUmVmO1xufVxuIiwiLypcbiAqIENvcHlyaWdodCAyMDIwIEFkb2JlLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHlcbiAqIG9mIHRoZSBMaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXJcbiAqIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIFJFUFJFU0VOVEFUSU9OU1xuICogT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlXG4gKiBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7RWZmZWN0Q2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlUmVmfSBmcm9tICdyZWFjdCc7XG5cbi8vIExpa2UgdXNlRWZmZWN0LCBidXQgb25seSBjYWxsZWQgZm9yIHVwZGF0ZXMgYWZ0ZXIgdGhlIGluaXRpYWwgcmVuZGVyLlxuZXhwb3J0IGZ1bmN0aW9uIHVzZVVwZGF0ZUVmZmVjdChlZmZlY3Q6IEVmZmVjdENhbGxiYWNrLCBkZXBlbmRlbmNpZXM6IGFueVtdKSB7XG4gIGNvbnN0IGlzSW5pdGlhbE1vdW50ID0gdXNlUmVmKHRydWUpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGlzSW5pdGlhbE1vdW50LmN1cnJlbnQpIHtcbiAgICAgIGlzSW5pdGlhbE1vdW50LmN1cnJlbnQgPSBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgZWZmZWN0KCk7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcbiAgfSwgZGVwZW5kZW5jaWVzKTtcbn1cbiIsImltcG9ydCB7UmVmT2JqZWN0LCB1c2VFZmZlY3R9IGZyb20gJ3JlYWN0JztcblxuZnVuY3Rpb24gaGFzUmVzaXplT2JzZXJ2ZXIoKSB7XG4gIHJldHVybiB0eXBlb2Ygd2luZG93LlJlc2l6ZU9ic2VydmVyICE9PSAndW5kZWZpbmVkJztcbn1cblxudHlwZSB1c2VSZXNpemVPYnNlcnZlck9wdGlvbnNUeXBlPFQ+ID0ge1xuICByZWY6IFJlZk9iamVjdDxUPixcbiAgb25SZXNpemU6ICgpID0+IHZvaWRcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVzZVJlc2l6ZU9ic2VydmVyPFQgZXh0ZW5kcyBIVE1MRWxlbWVudD4ob3B0aW9uczogdXNlUmVzaXplT2JzZXJ2ZXJPcHRpb25zVHlwZTxUPikge1xuICBjb25zdCB7cmVmLCBvblJlc2l6ZX0gPSBvcHRpb25zO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbGV0IGVsZW1lbnQgPSByZWY/LmN1cnJlbnQ7XG4gICAgaWYgKCFlbGVtZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCFoYXNSZXNpemVPYnNlcnZlcigpKSB7XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgb25SZXNpemUsIGZhbHNlKTtcbiAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCBvblJlc2l6ZSwgZmFsc2UpO1xuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuXG4gICAgICBjb25zdCByZXNpemVPYnNlcnZlckluc3RhbmNlID0gbmV3IHdpbmRvdy5SZXNpemVPYnNlcnZlcigoZW50cmllcykgPT4ge1xuICAgICAgICBpZiAoIWVudHJpZXMubGVuZ3RoKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgb25SZXNpemUoKTtcbiAgICAgIH0pO1xuICAgICAgcmVzaXplT2JzZXJ2ZXJJbnN0YW5jZS5vYnNlcnZlKGVsZW1lbnQpO1xuXG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBpZiAoZWxlbWVudCkge1xuICAgICAgICAgIHJlc2l6ZU9ic2VydmVySW5zdGFuY2UudW5vYnNlcnZlKGVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cblxuICB9LCBbb25SZXNpemUsIHJlZl0pO1xufVxuIiwiLypcbiAqIENvcHlyaWdodCAyMDIwIEFkb2JlLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHlcbiAqIG9mIHRoZSBMaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXJcbiAqIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIFJFUFJFU0VOVEFUSU9OU1xuICogT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlXG4gKiBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7TXV0YWJsZVJlZk9iamVjdCwgUmVmT2JqZWN0fSBmcm9tICdyZWFjdCc7XG5pbXBvcnQge3VzZUxheW91dEVmZmVjdH0gZnJvbSAnLi8nO1xuXG5pbnRlcmZhY2UgQ29udGV4dFZhbHVlPFQ+IHtcbiAgcmVmPzogTXV0YWJsZVJlZk9iamVjdDxUPlxufVxuXG4vLyBTeW5jcyByZWYgZnJvbSBjb250ZXh0IHdpdGggcmVmIHBhc3NlZCB0byBob29rXG5leHBvcnQgZnVuY3Rpb24gdXNlU3luY1JlZjxUPihjb250ZXh0OiBDb250ZXh0VmFsdWU8VD4sIHJlZjogUmVmT2JqZWN0PFQ+KSB7XG4gIHVzZUxheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGNvbnRleHQgJiYgY29udGV4dC5yZWYgJiYgcmVmKSB7XG4gICAgICBjb250ZXh0LnJlZi5jdXJyZW50ID0gcmVmLmN1cnJlbnQ7XG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBjb250ZXh0LnJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICAgIH07XG4gICAgfVxuICB9LCBbY29udGV4dCwgcmVmXSk7XG59XG4iLCIvKlxuICogQ29weXJpZ2h0IDIwMjAgQWRvYmUuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weVxuICogb2YgdGhlIExpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlclxuICogdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgUkVQUkVTRU5UQVRJT05TXG4gKiBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2VcbiAqIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFNjcm9sbFBhcmVudChub2RlOiBFbGVtZW50KTogRWxlbWVudCB7XG4gIHdoaWxlIChub2RlICYmICFpc1Njcm9sbGFibGUobm9kZSkpIHtcbiAgICBub2RlID0gbm9kZS5wYXJlbnRFbGVtZW50O1xuICB9XG5cbiAgcmV0dXJuIG5vZGUgfHwgZG9jdW1lbnQuc2Nyb2xsaW5nRWxlbWVudCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG59XG5cbmZ1bmN0aW9uIGlzU2Nyb2xsYWJsZShub2RlOiBFbGVtZW50KTogYm9vbGVhbiB7XG4gIGxldCBzdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKG5vZGUpO1xuICByZXR1cm4gLyhhdXRvfHNjcm9sbCkvLnRlc3Qoc3R5bGUub3ZlcmZsb3cgKyBzdHlsZS5vdmVyZmxvd1ggKyBzdHlsZS5vdmVyZmxvd1kpO1xufVxuIiwiLypcbiAqIENvcHlyaWdodCAyMDIwIEFkb2JlLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHlcbiAqIG9mIHRoZSBMaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXJcbiAqIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIFJFUFJFU0VOVEFUSU9OU1xuICogT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlXG4gKiBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7dXNlRWZmZWN0LCB1c2VTdGF0ZX0gZnJvbSAncmVhY3QnO1xuXG5pbnRlcmZhY2UgVmlld3BvcnRTaXplIHtcbiAgd2lkdGg6IG51bWJlcixcbiAgaGVpZ2h0OiBudW1iZXJcbn1cblxuLy8gQHRzLWlnbm9yZVxubGV0IHZpc3VhbFZpZXdwb3J0ID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LnZpc3VhbFZpZXdwb3J0O1xuXG5leHBvcnQgZnVuY3Rpb24gdXNlVmlld3BvcnRTaXplKCk6IFZpZXdwb3J0U2l6ZSB7XG4gIGxldCBbc2l6ZSwgc2V0U2l6ZV0gPSB1c2VTdGF0ZSgoKSA9PiBnZXRWaWV3cG9ydFNpemUoKSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBVc2UgdmlzdWFsVmlld3BvcnQgYXBpIHRvIHRyYWNrIGF2YWlsYWJsZSBoZWlnaHQgZXZlbiBvbiBpT1MgdmlydHVhbCBrZXlib2FyZCBvcGVuaW5nXG4gICAgbGV0IG9uUmVzaXplID0gKCkgPT4ge1xuICAgICAgc2V0U2l6ZShzaXplID0+IHtcbiAgICAgICAgbGV0IG5ld1NpemUgPSBnZXRWaWV3cG9ydFNpemUoKTtcbiAgICAgICAgaWYgKG5ld1NpemUud2lkdGggPT09IHNpemUud2lkdGggJiYgbmV3U2l6ZS5oZWlnaHQgPT09IHNpemUuaGVpZ2h0KSB7XG4gICAgICAgICAgcmV0dXJuIHNpemU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ld1NpemU7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgaWYgKCF2aXN1YWxWaWV3cG9ydCkge1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIG9uUmVzaXplKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmlzdWFsVmlld3BvcnQuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgb25SZXNpemUpO1xuICAgIH1cblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpZiAoIXZpc3VhbFZpZXdwb3J0KSB7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCBvblJlc2l6ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2aXN1YWxWaWV3cG9ydC5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCBvblJlc2l6ZSk7XG4gICAgICB9XG4gICAgfTtcbiAgfSwgW10pO1xuXG4gIHJldHVybiBzaXplO1xufVxuXG5mdW5jdGlvbiBnZXRWaWV3cG9ydFNpemUoKTogVmlld3BvcnRTaXplIHtcbiAgcmV0dXJuIHtcbiAgICB3aWR0aDogdmlzdWFsVmlld3BvcnQ/LndpZHRoIHx8IHdpbmRvdy5pbm5lcldpZHRoLFxuICAgIGhlaWdodDogdmlzdWFsVmlld3BvcnQ/LmhlaWdodCB8fCB3aW5kb3cuaW5uZXJIZWlnaHRcbiAgfTtcbn1cbiIsIi8qXG4gKiBDb3B5cmlnaHQgMjAyMCBBZG9iZS4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5XG4gKiBvZiB0aGUgTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyXG4gKiB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBSRVBSRVNFTlRBVElPTlNcbiAqIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZVxuICogZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge0FyaWFMYWJlbGluZ1Byb3BzfSBmcm9tICdAcmVhY3QtdHlwZXMvc2hhcmVkJztcbmltcG9ydCB7dXNlTGF5b3V0RWZmZWN0fSBmcm9tICcuL3VzZUxheW91dEVmZmVjdCc7XG5pbXBvcnQge3VzZVN0YXRlfSBmcm9tICdyZWFjdCc7XG5cbmxldCBkZXNjcmlwdGlvbklkID0gMDtcbmNvbnN0IGRlc2NyaXB0aW9uTm9kZXMgPSBuZXcgTWFwPHN0cmluZywge3JlZkNvdW50OiBudW1iZXIsIGVsZW1lbnQ6IEhUTUxFbGVtZW50fT4oKTtcblxuZXhwb3J0IGZ1bmN0aW9uIHVzZURlc2NyaXB0aW9uKGRlc2NyaXB0aW9uOiBzdHJpbmcpOiBBcmlhTGFiZWxpbmdQcm9wcyB7XG4gIGxldCBbaWQsIHNldElkXSA9IHVzZVN0YXRlKG51bGwpO1xuXG4gIHVzZUxheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFkZXNjcmlwdGlvbikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxldCBkZXNjID0gZGVzY3JpcHRpb25Ob2Rlcy5nZXQoZGVzY3JpcHRpb24pO1xuICAgIGlmICghZGVzYykge1xuICAgICAgbGV0IGlkID0gYHJlYWN0LWFyaWEtZGVzY3JpcHRpb24tJHtkZXNjcmlwdGlvbklkKyt9YDtcbiAgICAgIHNldElkKGlkKTtcblxuICAgICAgbGV0IG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIG5vZGUuaWQgPSBpZDtcbiAgICAgIG5vZGUuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgIG5vZGUudGV4dENvbnRlbnQgPSBkZXNjcmlwdGlvbjtcbiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobm9kZSk7XG4gICAgICBkZXNjID0ge3JlZkNvdW50OiAwLCBlbGVtZW50OiBub2RlfTtcbiAgICAgIGRlc2NyaXB0aW9uTm9kZXMuc2V0KGRlc2NyaXB0aW9uLCBkZXNjKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0SWQoZGVzYy5lbGVtZW50LmlkKTtcbiAgICB9XG5cbiAgICBkZXNjLnJlZkNvdW50Kys7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlmICgtLWRlc2MucmVmQ291bnQgPT09IDApIHtcbiAgICAgICAgZGVzYy5lbGVtZW50LnJlbW92ZSgpO1xuICAgICAgICBkZXNjcmlwdGlvbk5vZGVzLmRlbGV0ZShkZXNjcmlwdGlvbik7XG4gICAgICB9XG4gICAgfTtcbiAgfSwgW2Rlc2NyaXB0aW9uXSk7XG5cbiAgcmV0dXJuIHtcbiAgICAnYXJpYS1kZXNjcmliZWRieSc6IGRlc2NyaXB0aW9uID8gaWQgOiB1bmRlZmluZWRcbiAgfTtcbn1cbiIsIi8qXG4gKiBDb3B5cmlnaHQgMjAyMCBBZG9iZS4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5XG4gKiBvZiB0aGUgTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyXG4gKiB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBSRVBSRVNFTlRBVElPTlNcbiAqIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZVxuICogZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5mdW5jdGlvbiB0ZXN0VXNlckFnZW50KHJlOiBSZWdFeHApIHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnIHx8IHdpbmRvdy5uYXZpZ2F0b3IgPT0gbnVsbCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gKFxuICAgIHdpbmRvdy5uYXZpZ2F0b3JbJ3VzZXJBZ2VudERhdGEnXT8uYnJhbmRzLnNvbWUoKGJyYW5kOiB7YnJhbmQ6IHN0cmluZywgdmVyc2lvbjogc3RyaW5nfSkgPT4gcmUudGVzdChicmFuZC5icmFuZCkpXG4gICkgfHxcbiAgcmUudGVzdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCk7XG59XG5cbmZ1bmN0aW9uIHRlc3RQbGF0Zm9ybShyZTogUmVnRXhwKSB7XG4gIHJldHVybiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cubmF2aWdhdG9yICE9IG51bGxcbiAgICA/IHJlLnRlc3QoKHdpbmRvdy5uYXZpZ2F0b3JbJ3VzZXJBZ2VudERhdGEnXSB8fCB3aW5kb3cubmF2aWdhdG9yKS5wbGF0Zm9ybSlcbiAgICA6IGZhbHNlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNNYWMoKSB7XG4gIHJldHVybiB0ZXN0UGxhdGZvcm0oL15NYWMvaSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0lQaG9uZSgpIHtcbiAgcmV0dXJuIHRlc3RQbGF0Zm9ybSgvXmlQaG9uZS9pKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzSVBhZCgpIHtcbiAgcmV0dXJuIHRlc3RQbGF0Zm9ybSgvXmlQYWQvaSkgfHxcbiAgICAvLyBpUGFkT1MgMTMgbGllcyBhbmQgc2F5cyBpdCdzIGEgTWFjLCBidXQgd2UgY2FuIGRpc3Rpbmd1aXNoIGJ5IGRldGVjdGluZyB0b3VjaCBzdXBwb3J0LlxuICAgIChpc01hYygpICYmIG5hdmlnYXRvci5tYXhUb3VjaFBvaW50cyA+IDEpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNJT1MoKSB7XG4gIHJldHVybiBpc0lQaG9uZSgpIHx8IGlzSVBhZCgpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNBcHBsZURldmljZSgpIHtcbiAgcmV0dXJuIGlzTWFjKCkgfHwgaXNJT1MoKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzV2ViS2l0KCkge1xuICByZXR1cm4gdGVzdFVzZXJBZ2VudCgvQXBwbGVXZWJLaXQvaSkgJiYgIWlzQ2hyb21lKCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0Nocm9tZSgpIHtcbiAgcmV0dXJuIHRlc3RVc2VyQWdlbnQoL0Nocm9tZS9pKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzQW5kcm9pZCgpIHtcbiAgcmV0dXJuIHRlc3RVc2VyQWdlbnQoL0FuZHJvaWQvaSk7XG59XG4iLCIvKlxuICogQ29weXJpZ2h0IDIwMjEgQWRvYmUuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weVxuICogb2YgdGhlIExpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlclxuICogdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgUkVQUkVTRU5UQVRJT05TXG4gKiBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2VcbiAqIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtSZWZPYmplY3QsIHVzZUVmZmVjdCwgdXNlUmVmfSBmcm9tICdyZWFjdCc7XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VFdmVudDxLIGV4dGVuZHMga2V5b2YgR2xvYmFsRXZlbnRIYW5kbGVyc0V2ZW50TWFwPihcbiAgcmVmOiBSZWZPYmplY3Q8RXZlbnRUYXJnZXQ+LFxuICBldmVudDogSyxcbiAgaGFuZGxlcjogKHRoaXM6IERvY3VtZW50LCBldjogR2xvYmFsRXZlbnRIYW5kbGVyc0V2ZW50TWFwW0tdKSA9PiBhbnksXG4gIG9wdGlvbnM/OiBib29sZWFuIHwgQWRkRXZlbnRMaXN0ZW5lck9wdGlvbnNcbikge1xuICBsZXQgaGFuZGxlclJlZiA9IHVzZVJlZihoYW5kbGVyKTtcbiAgaGFuZGxlclJlZi5jdXJyZW50ID0gaGFuZGxlcjtcblxuICBsZXQgaXNEaXNhYmxlZCA9IGhhbmRsZXIgPT0gbnVsbDtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChpc0Rpc2FibGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IGVsZW1lbnQgPSByZWYuY3VycmVudDtcbiAgICBsZXQgaGFuZGxlciA9IChlOiBHbG9iYWxFdmVudEhhbmRsZXJzRXZlbnRNYXBbS10pID0+IGhhbmRsZXJSZWYuY3VycmVudC5jYWxsKHRoaXMsIGUpO1xuXG4gICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKTtcbiAgICB9O1xuICB9LCBbcmVmLCBldmVudCwgb3B0aW9ucywgaXNEaXNhYmxlZF0pO1xufVxuIiwiLypcbiAqIENvcHlyaWdodCAyMDIwIEFkb2JlLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHlcbiAqIG9mIHRoZSBMaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXJcbiAqIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIFJFUFJFU0VOVEFUSU9OU1xuICogT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlXG4gKiBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7RGlzcGF0Y2gsIHVzZUNhbGxiYWNrLCB1c2VSZWYsIHVzZVN0YXRlfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQge3VzZUxheW91dEVmZmVjdH0gZnJvbSAnLi8nO1xuXG50eXBlIFNldFZhbHVlQWN0aW9uPFM+ID0gKHByZXY6IFMpID0+IEdlbmVyYXRvcjxhbnksIHZvaWQsIHVua25vd24+O1xuXG4vLyBUaGlzIGhvb2sgd29ya3MgbGlrZSBgdXNlU3RhdGVgLCBidXQgd2hlbiBzZXR0aW5nIHRoZSB2YWx1ZSwgeW91IHBhc3MgYSBnZW5lcmF0b3IgZnVuY3Rpb25cbi8vIHRoYXQgY2FuIHlpZWxkIG11bHRpcGxlIHZhbHVlcy4gRWFjaCB5aWVsZGVkIHZhbHVlIHVwZGF0ZXMgdGhlIHN0YXRlIGFuZCB3YWl0cyBmb3IgdGhlIG5leHRcbi8vIGxheW91dCBlZmZlY3QsIHRoZW4gY29udGludWVzIHRoZSBnZW5lcmF0b3IuIFRoaXMgYWxsb3dzIHNlcXVlbnRpYWwgdXBkYXRlcyB0byBzdGF0ZSB0byBiZVxuLy8gd3JpdHRlbiBsaW5lYXJseS5cbmV4cG9ydCBmdW5jdGlvbiB1c2VWYWx1ZUVmZmVjdDxTPihkZWZhdWx0VmFsdWU6IFMgfCAoKCkgPT4gUykpOiBbUywgRGlzcGF0Y2g8U2V0VmFsdWVBY3Rpb248Uz4+XSB7XG4gIGxldCBbdmFsdWUsIHNldFZhbHVlXSA9IHVzZVN0YXRlKGRlZmF1bHRWYWx1ZSk7XG4gIGxldCB2YWx1ZVJlZiA9IHVzZVJlZih2YWx1ZSk7XG4gIGxldCBlZmZlY3QgPSB1c2VSZWYobnVsbCk7XG5cbiAgdmFsdWVSZWYuY3VycmVudCA9IHZhbHVlO1xuXG4gIC8vIFN0b3JlIHRoZSBmdW5jdGlvbiBpbiBhIHJlZiBzbyB3ZSBjYW4gYWx3YXlzIGFjY2VzcyB0aGUgY3VycmVudCB2ZXJzaW9uXG4gIC8vIHdoaWNoIGhhcyB0aGUgcHJvcGVyIGB2YWx1ZWAgaW4gc2NvcGUuXG4gIGxldCBuZXh0UmVmID0gdXNlUmVmKG51bGwpO1xuICBuZXh0UmVmLmN1cnJlbnQgPSAoKSA9PiB7XG4gICAgLy8gUnVuIHRoZSBnZW5lcmF0b3IgdG8gdGhlIG5leHQgeWllbGQuXG4gICAgbGV0IG5ld1ZhbHVlID0gZWZmZWN0LmN1cnJlbnQubmV4dCgpO1xuXG4gICAgLy8gSWYgdGhlIGdlbmVyYXRvciBpcyBkb25lLCByZXNldCB0aGUgZWZmZWN0LlxuICAgIGlmIChuZXdWYWx1ZS5kb25lKSB7XG4gICAgICBlZmZlY3QuY3VycmVudCA9IG51bGw7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIHZhbHVlIGlzIHRoZSBzYW1lIGFzIHRoZSBjdXJyZW50IHZhbHVlLFxuICAgIC8vIHRoZW4gY29udGludWUgdG8gdGhlIG5leHQgeWllbGQuIE90aGVyd2lzZSxcbiAgICAvLyBzZXQgdGhlIHZhbHVlIGluIHN0YXRlIGFuZCB3YWl0IGZvciB0aGUgbmV4dCBsYXlvdXQgZWZmZWN0LlxuICAgIGlmICh2YWx1ZSA9PT0gbmV3VmFsdWUudmFsdWUpIHtcbiAgICAgIG5leHRSZWYuY3VycmVudCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXRWYWx1ZShuZXdWYWx1ZS52YWx1ZSk7XG4gICAgfVxuICB9O1xuXG4gIHVzZUxheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgLy8gSWYgdGhlcmUgaXMgYW4gZWZmZWN0IGN1cnJlbnRseSBydW5uaW5nLCBjb250aW51ZSB0byB0aGUgbmV4dCB5aWVsZC5cbiAgICBpZiAoZWZmZWN0LmN1cnJlbnQpIHtcbiAgICAgIG5leHRSZWYuY3VycmVudCgpO1xuICAgIH1cbiAgfSk7XG5cbiAgbGV0IHF1ZXVlID0gdXNlQ2FsbGJhY2soZm4gPT4ge1xuICAgIGVmZmVjdC5jdXJyZW50ID0gZm4odmFsdWVSZWYuY3VycmVudCk7XG4gICAgbmV4dFJlZi5jdXJyZW50KCk7XG4gIH0sIFtlZmZlY3QsIG5leHRSZWZdKTtcblxuICByZXR1cm4gW3ZhbHVlLCBxdWV1ZV07XG59XG4iLCIvKlxuICogQ29weXJpZ2h0IDIwMjAgQWRvYmUuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weVxuICogb2YgdGhlIExpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlclxuICogdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgUkVQUkVTRU5UQVRJT05TXG4gKiBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2VcbiAqIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBTY3JvbGxzIGBzY3JvbGxWaWV3YCBzbyB0aGF0IGBlbGVtZW50YCBpcyB2aXNpYmxlLlxuICogU2ltaWxhciB0byBgZWxlbWVudC5zY3JvbGxJbnRvVmlldyh7YmxvY2s6ICduZWFyZXN0J30pYCAobm90IHN1cHBvcnRlZCBpbiBFZGdlKSxcbiAqIGJ1dCBkb2Vzbid0IGFmZmVjdCBwYXJlbnRzIGFib3ZlIGBzY3JvbGxWaWV3YC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNjcm9sbEludG9WaWV3KHNjcm9sbFZpZXc6IEhUTUxFbGVtZW50LCBlbGVtZW50OiBIVE1MRWxlbWVudCkge1xuICBsZXQgb2Zmc2V0WCA9IHJlbGF0aXZlT2Zmc2V0KHNjcm9sbFZpZXcsIGVsZW1lbnQsICdsZWZ0Jyk7XG4gIGxldCBvZmZzZXRZID0gcmVsYXRpdmVPZmZzZXQoc2Nyb2xsVmlldywgZWxlbWVudCwgJ3RvcCcpO1xuICBsZXQgd2lkdGggPSBlbGVtZW50Lm9mZnNldFdpZHRoO1xuICBsZXQgaGVpZ2h0ID0gZWxlbWVudC5vZmZzZXRIZWlnaHQ7XG4gIGxldCB4ID0gc2Nyb2xsVmlldy5zY3JvbGxMZWZ0O1xuICBsZXQgeSA9IHNjcm9sbFZpZXcuc2Nyb2xsVG9wO1xuICBsZXQgbWF4WCA9IHggKyBzY3JvbGxWaWV3Lm9mZnNldFdpZHRoO1xuICBsZXQgbWF4WSA9IHkgKyBzY3JvbGxWaWV3Lm9mZnNldEhlaWdodDtcblxuICBpZiAob2Zmc2V0WCA8PSB4KSB7XG4gICAgeCA9IG9mZnNldFg7XG4gIH0gZWxzZSBpZiAob2Zmc2V0WCArIHdpZHRoID4gbWF4WCkge1xuICAgIHggKz0gb2Zmc2V0WCArIHdpZHRoIC0gbWF4WDtcbiAgfVxuICBpZiAob2Zmc2V0WSA8PSB5KSB7XG4gICAgeSA9IG9mZnNldFk7XG4gIH0gZWxzZSBpZiAob2Zmc2V0WSArIGhlaWdodCA+IG1heFkpIHtcbiAgICB5ICs9IG9mZnNldFkgKyBoZWlnaHQgLSBtYXhZO1xuICB9XG5cbiAgc2Nyb2xsVmlldy5zY3JvbGxMZWZ0ID0geDtcbiAgc2Nyb2xsVmlldy5zY3JvbGxUb3AgPSB5O1xufVxuXG4vKipcbiAqIENvbXB1dGVzIHRoZSBvZmZzZXQgbGVmdCBvciB0b3AgZnJvbSBjaGlsZCB0byBhbmNlc3RvciBieSBhY2N1bXVsYXRpbmdcbiAqIG9mZnNldExlZnQgb3Igb2Zmc2V0VG9wIHRocm91Z2ggaW50ZXJ2ZW5pbmcgb2Zmc2V0UGFyZW50cy5cbiAqL1xuZnVuY3Rpb24gcmVsYXRpdmVPZmZzZXQoYW5jZXN0b3I6IEhUTUxFbGVtZW50LCBjaGlsZDogSFRNTEVsZW1lbnQsIGF4aXM6ICdsZWZ0J3wndG9wJykge1xuICBjb25zdCBwcm9wID0gYXhpcyA9PT0gJ2xlZnQnID8gJ29mZnNldExlZnQnIDogJ29mZnNldFRvcCc7XG4gIGxldCBzdW0gPSAwO1xuICB3aGlsZSAoY2hpbGQub2Zmc2V0UGFyZW50KSB7XG4gICAgc3VtICs9IGNoaWxkW3Byb3BdO1xuICAgIGlmIChjaGlsZC5vZmZzZXRQYXJlbnQgPT09IGFuY2VzdG9yKSB7XG4gICAgICAvLyBTdG9wIG9uY2Ugd2UgaGF2ZSBmb3VuZCB0aGUgYW5jZXN0b3Igd2UgYXJlIGludGVyZXN0ZWQgaW4uXG4gICAgICBicmVhaztcbiAgICB9IGVsc2UgaWYgKGNoaWxkLm9mZnNldFBhcmVudC5jb250YWlucyhhbmNlc3RvcikpIHtcbiAgICAgIC8vIElmIHRoZSBhbmNlc3RvciBpcyBub3QgYHBvc2l0aW9uOnJlbGF0aXZlYCwgdGhlbiB3ZSBzdG9wIGF0XG4gICAgICAvLyBfaXRzXyBvZmZzZXQgcGFyZW50LCBhbmQgd2Ugc3VidHJhY3Qgb2ZmIF9pdHNfIG9mZnNldCwgc28gdGhhdFxuICAgICAgLy8gd2UgZW5kIHVwIHdpdGggdGhlIHByb3BlciBvZmZzZXQgZnJvbSBjaGlsZCB0byBhbmNlc3Rvci5cbiAgICAgIHN1bSAtPSBhbmNlc3Rvcltwcm9wXTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBjaGlsZCA9IGNoaWxkLm9mZnNldFBhcmVudCBhcyBIVE1MRWxlbWVudDtcbiAgfVxuICByZXR1cm4gc3VtO1xufVxuIiwiLypcbiAqIENvcHlyaWdodCAyMDIwIEFkb2JlLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHlcbiAqIG9mIHRoZSBMaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXJcbiAqIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIFJFUFJFU0VOVEFUSU9OU1xuICogT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlXG4gKiBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7aXNJT1MsIHJ1bkFmdGVyVHJhbnNpdGlvbn0gZnJvbSAnQHJlYWN0LWFyaWEvdXRpbHMnO1xuXG4vLyBTYWZhcmkgb24gaU9TIHN0YXJ0cyBzZWxlY3RpbmcgdGV4dCBvbiBsb25nIHByZXNzLiBUaGUgb25seSB3YXkgdG8gYXZvaWQgdGhpcywgaXQgc2VlbXMsXG4vLyBpcyB0byBhZGQgdXNlci1zZWxlY3Q6IG5vbmUgdG8gdGhlIGVudGlyZSBwYWdlLiBBZGRpbmcgaXQgdG8gdGhlIHByZXNzYWJsZSBlbGVtZW50IHByZXZlbnRzXG4vLyB0aGF0IGVsZW1lbnQgZnJvbSBiZWluZyBzZWxlY3RlZCwgYnV0IG5lYXJieSBlbGVtZW50cyBtYXkgc3RpbGwgcmVjZWl2ZSBzZWxlY3Rpb24uIFdlIGFkZFxuLy8gdXNlci1zZWxlY3Q6IG5vbmUgb24gdG91Y2ggc3RhcnQsIGFuZCByZW1vdmUgaXQgYWdhaW4gb24gdG91Y2ggZW5kIHRvIHByZXZlbnQgdGhpcy5cbi8vIFRoaXMgbXVzdCBiZSBpbXBsZW1lbnRlZCB1c2luZyBnbG9iYWwgc3RhdGUgdG8gYXZvaWQgcmFjZSBjb25kaXRpb25zIGJldHdlZW4gbXVsdGlwbGUgZWxlbWVudHMuXG5cbi8vIFRoZXJlIGFyZSB0aHJlZSBwb3NzaWJsZSBzdGF0ZXMgZHVlIHRvIHRoZSBkZWxheSBiZWZvcmUgcmVtb3ZpbmcgdXNlci1zZWxlY3Q6IG5vbmUgYWZ0ZXJcbi8vIHBvaW50ZXIgdXAuIFRoZSAnZGVmYXVsdCcgc3RhdGUgYWx3YXlzIHRyYW5zaXRpb25zIHRvIHRoZSAnZGlzYWJsZWQnIHN0YXRlLCB3aGljaCB0cmFuc2l0aW9uc1xuLy8gdG8gJ3Jlc3RvcmluZycuIFRoZSAncmVzdG9yaW5nJyBzdGF0ZSBjYW4gZWl0aGVyIHRyYW5zaXRpb24gYmFjayB0byAnZGlzYWJsZWQnIG9yICdkZWZhdWx0Jy5cblxuLy8gRm9yIG5vbi1pT1MgZGV2aWNlcywgd2UgYXBwbHkgdXNlci1zZWxlY3Q6IG5vbmUgdG8gdGhlIHByZXNzZWQgZWxlbWVudCBpbnN0ZWFkIHRvIGF2b2lkIHBvc3NpYmxlXG4vLyBwZXJmb3JtYW5jZSBpc3N1ZXMgdGhhdCBhcmlzZSBmcm9tIGFwcGx5aW5nIGFuZCByZW1vdmluZyB1c2VyLXNlbGVjdDogbm9uZSB0byB0aGUgZW50aXJlIHBhZ2Vcbi8vIChzZWUgaHR0cHM6Ly9naXRodWIuY29tL2Fkb2JlL3JlYWN0LXNwZWN0cnVtL2lzc3Vlcy8xNjA5KS5cbnR5cGUgU3RhdGUgPSAnZGVmYXVsdCcgfCAnZGlzYWJsZWQnIHwgJ3Jlc3RvcmluZyc7XG5cbi8vIE5vdGUgdGhhdCBzdGF0ZSBvbmx5IG1hdHRlcnMgaGVyZSBmb3IgaU9TLiBOb24taU9TIGdldHMgdXNlci1zZWxlY3Q6IG5vbmUgYXBwbGllZCB0byB0aGUgdGFyZ2V0IGVsZW1lbnRcbi8vIHJhdGhlciB0aGFuIGF0IHRoZSBkb2N1bWVudCBsZXZlbCBzbyB3ZSBqdXN0IG5lZWQgdG8gYXBwbHkvcmVtb3ZlIHVzZXItc2VsZWN0OiBub25lIGZvciBlYWNoIHByZXNzZWQgZWxlbWVudCBpbmRpdmlkdWFsbHlcbmxldCBzdGF0ZTogU3RhdGUgPSAnZGVmYXVsdCc7XG5sZXQgc2F2ZWRVc2VyU2VsZWN0ID0gJyc7XG5sZXQgbW9kaWZpZWRFbGVtZW50TWFwID0gbmV3IFdlYWtNYXA8SFRNTEVsZW1lbnQsIHN0cmluZz4oKTtcblxuZXhwb3J0IGZ1bmN0aW9uIGRpc2FibGVUZXh0U2VsZWN0aW9uKHRhcmdldD86IEhUTUxFbGVtZW50KSB7XG4gIGlmIChpc0lPUygpKSB7XG4gICAgaWYgKHN0YXRlID09PSAnZGVmYXVsdCcpIHtcbiAgICAgIHNhdmVkVXNlclNlbGVjdCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS53ZWJraXRVc2VyU2VsZWN0O1xuICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLndlYmtpdFVzZXJTZWxlY3QgPSAnbm9uZSc7XG4gICAgfVxuXG4gICAgc3RhdGUgPSAnZGlzYWJsZWQnO1xuICB9IGVsc2UgaWYgKHRhcmdldCkge1xuICAgIC8vIElmIG5vdCBpT1MsIHN0b3JlIHRoZSB0YXJnZXQncyBvcmlnaW5hbCB1c2VyLXNlbGVjdCBhbmQgY2hhbmdlIHRvIHVzZXItc2VsZWN0OiBub25lXG4gICAgLy8gSWdub3JlIHN0YXRlIHNpbmNlIGl0IGRvZXNuJ3QgYXBwbHkgZm9yIG5vbiBpT1NcbiAgICBtb2RpZmllZEVsZW1lbnRNYXAuc2V0KHRhcmdldCwgdGFyZ2V0LnN0eWxlLnVzZXJTZWxlY3QpO1xuICAgIHRhcmdldC5zdHlsZS51c2VyU2VsZWN0ID0gJ25vbmUnO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZXN0b3JlVGV4dFNlbGVjdGlvbih0YXJnZXQ/OiBIVE1MRWxlbWVudCkge1xuICBpZiAoaXNJT1MoKSkge1xuICAgIC8vIElmIHRoZSBzdGF0ZSBpcyBhbHJlYWR5IGRlZmF1bHQsIHRoZXJlJ3Mgbm90aGluZyB0byBkby5cbiAgICAvLyBJZiBpdCBpcyByZXN0b3JpbmcsIHRoZW4gdGhlcmUncyBubyBuZWVkIHRvIHF1ZXVlIGEgc2Vjb25kIHJlc3RvcmUuXG4gICAgaWYgKHN0YXRlICE9PSAnZGlzYWJsZWQnKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgc3RhdGUgPSAncmVzdG9yaW5nJztcblxuICAgIC8vIFRoZXJlIGFwcGVhcnMgdG8gYmUgYSBkZWxheSBvbiBpT1Mgd2hlcmUgc2VsZWN0aW9uIHN0aWxsIG1pZ2h0IG9jY3VyXG4gICAgLy8gYWZ0ZXIgcG9pbnRlciB1cCwgc28gd2FpdCBhIGJpdCBiZWZvcmUgcmVtb3ZpbmcgdXNlci1zZWxlY3QuXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAvLyBXYWl0IGZvciBhbnkgQ1NTIHRyYW5zaXRpb25zIHRvIGNvbXBsZXRlIHNvIHdlIGRvbid0IHJlY29tcHV0ZSBzdHlsZVxuICAgICAgLy8gZm9yIHRoZSB3aG9sZSBwYWdlIGluIHRoZSBtaWRkbGUgb2YgdGhlIGFuaW1hdGlvbiBhbmQgY2F1c2UgamFuay5cbiAgICAgIHJ1bkFmdGVyVHJhbnNpdGlvbigoKSA9PiB7XG4gICAgICAgIC8vIEF2b2lkIHJhY2UgY29uZGl0aW9uc1xuICAgICAgICBpZiAoc3RhdGUgPT09ICdyZXN0b3JpbmcnKSB7XG4gICAgICAgICAgaWYgKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS53ZWJraXRVc2VyU2VsZWN0ID09PSAnbm9uZScpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS53ZWJraXRVc2VyU2VsZWN0ID0gc2F2ZWRVc2VyU2VsZWN0IHx8ICcnO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHNhdmVkVXNlclNlbGVjdCA9ICcnO1xuICAgICAgICAgIHN0YXRlID0gJ2RlZmF1bHQnO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LCAzMDApO1xuICB9IGVsc2Uge1xuICAgIC8vIElmIG5vdCBpT1MsIHJlc3RvcmUgdGhlIHRhcmdldCdzIG9yaWdpbmFsIHVzZXItc2VsZWN0IGlmIGFueVxuICAgIC8vIElnbm9yZSBzdGF0ZSBzaW5jZSBpdCBkb2Vzbid0IGFwcGx5IGZvciBub24gaU9TXG4gICAgaWYgKHRhcmdldCAmJiBtb2RpZmllZEVsZW1lbnRNYXAuaGFzKHRhcmdldCkpIHtcbiAgICAgIGxldCB0YXJnZXRPbGRVc2VyU2VsZWN0ID0gbW9kaWZpZWRFbGVtZW50TWFwLmdldCh0YXJnZXQpO1xuXG4gICAgICBpZiAodGFyZ2V0LnN0eWxlLnVzZXJTZWxlY3QgPT09ICdub25lJykge1xuICAgICAgICB0YXJnZXQuc3R5bGUudXNlclNlbGVjdCA9IHRhcmdldE9sZFVzZXJTZWxlY3Q7XG4gICAgICB9XG5cbiAgICAgIGlmICh0YXJnZXQuZ2V0QXR0cmlidXRlKCdzdHlsZScpID09PSAnJykge1xuICAgICAgICB0YXJnZXQucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgICAgfVxuICAgICAgbW9kaWZpZWRFbGVtZW50TWFwLmRlbGV0ZSh0YXJnZXQpO1xuICAgIH1cbiAgfVxufVxuIiwiLypcbiAqIENvcHlyaWdodCAyMDIwIEFkb2JlLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHlcbiAqIG9mIHRoZSBMaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXJcbiAqIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIFJFUFJFU0VOVEFUSU9OU1xuICogT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlXG4gKiBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7Rm9jdXNFdmVudCBhcyBSZWFjdEZvY3VzRXZlbnQsIHVzZUNhbGxiYWNrLCB1c2VSZWZ9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7dXNlTGF5b3V0RWZmZWN0fSBmcm9tICdAcmVhY3QtYXJpYS91dGlscyc7XG5cbi8vIE9yaWdpbmFsIGxpY2Vuc2luZyBmb3IgdGhlIGZvbGxvd2luZyBtZXRob2QgY2FuIGJlIGZvdW5kIGluIHRoZVxuLy8gTk9USUNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4vLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlYWN0L2Jsb2IvM2M3MTNkNTEzMTk1YTUzNzg4YjNmOGJiNGI3MDI3OWQ2OGIxNWJjYy9wYWNrYWdlcy9yZWFjdC1pbnRlcmFjdGlvbnMvZXZlbnRzL3NyYy9kb20vc2hhcmVkL2luZGV4LmpzI0w3NC1MODdcblxuLy8gS2V5Ym9hcmRzLCBBc3Npc3RpdmUgVGVjaG5vbG9naWVzLCBhbmQgZWxlbWVudC5jbGljaygpIGFsbCBwcm9kdWNlIGEgXCJ2aXJ0dWFsXCJcbi8vIGNsaWNrIGV2ZW50LiBUaGlzIGlzIGEgbWV0aG9kIG9mIGluZmVycmluZyBzdWNoIGNsaWNrcy4gRXZlcnkgYnJvd3NlciBleGNlcHRcbi8vIElFIDExIG9ubHkgc2V0cyBhIHplcm8gdmFsdWUgb2YgXCJkZXRhaWxcIiBmb3IgY2xpY2sgZXZlbnRzIHRoYXQgYXJlIFwidmlydHVhbFwiLlxuLy8gSG93ZXZlciwgSUUgMTEgdXNlcyBhIHplcm8gdmFsdWUgZm9yIGFsbCBjbGljayBldmVudHMuIEZvciBJRSAxMSB3ZSByZWx5IG9uXG4vLyB0aGUgcXVpcmsgdGhhdCBpdCBwcm9kdWNlcyBjbGljayBldmVudHMgdGhhdCBhcmUgb2YgdHlwZSBQb2ludGVyRXZlbnQsIGFuZFxuLy8gd2hlcmUgb25seSB0aGUgXCJ2aXJ0dWFsXCIgY2xpY2sgbGFja3MgYSBwb2ludGVyVHlwZSBmaWVsZC5cblxuZXhwb3J0IGZ1bmN0aW9uIGlzVmlydHVhbENsaWNrKGV2ZW50OiBNb3VzZUV2ZW50IHwgUG9pbnRlckV2ZW50KTogYm9vbGVhbiB7XG4gIC8vIEpBV1MvTlZEQSB3aXRoIEZpcmVmb3guXG4gIGlmICgoZXZlbnQgYXMgYW55KS5tb3pJbnB1dFNvdXJjZSA9PT0gMCAmJiBldmVudC5pc1RydXN0ZWQpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiBldmVudC5kZXRhaWwgPT09IDAgJiYgIShldmVudCBhcyBQb2ludGVyRXZlbnQpLnBvaW50ZXJUeXBlO1xufVxuXG5leHBvcnQgY2xhc3MgU3ludGhldGljRm9jdXNFdmVudCBpbXBsZW1lbnRzIFJlYWN0Rm9jdXNFdmVudCB7XG4gIG5hdGl2ZUV2ZW50OiBGb2N1c0V2ZW50O1xuICB0YXJnZXQ6IEVsZW1lbnQ7XG4gIGN1cnJlbnRUYXJnZXQ6IEVsZW1lbnQ7XG4gIHJlbGF0ZWRUYXJnZXQ6IEVsZW1lbnQ7XG4gIGJ1YmJsZXM6IGJvb2xlYW47XG4gIGNhbmNlbGFibGU6IGJvb2xlYW47XG4gIGRlZmF1bHRQcmV2ZW50ZWQ6IGJvb2xlYW47XG4gIGV2ZW50UGhhc2U6IG51bWJlcjtcbiAgaXNUcnVzdGVkOiBib29sZWFuO1xuICB0aW1lU3RhbXA6IG51bWJlcjtcbiAgdHlwZTogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKHR5cGU6IHN0cmluZywgbmF0aXZlRXZlbnQ6IEZvY3VzRXZlbnQpIHtcbiAgICB0aGlzLm5hdGl2ZUV2ZW50ID0gbmF0aXZlRXZlbnQ7XG4gICAgdGhpcy50YXJnZXQgPSBuYXRpdmVFdmVudC50YXJnZXQgYXMgRWxlbWVudDtcbiAgICB0aGlzLmN1cnJlbnRUYXJnZXQgPSBuYXRpdmVFdmVudC5jdXJyZW50VGFyZ2V0IGFzIEVsZW1lbnQ7XG4gICAgdGhpcy5yZWxhdGVkVGFyZ2V0ID0gbmF0aXZlRXZlbnQucmVsYXRlZFRhcmdldCBhcyBFbGVtZW50O1xuICAgIHRoaXMuYnViYmxlcyA9IG5hdGl2ZUV2ZW50LmJ1YmJsZXM7XG4gICAgdGhpcy5jYW5jZWxhYmxlID0gbmF0aXZlRXZlbnQuY2FuY2VsYWJsZTtcbiAgICB0aGlzLmRlZmF1bHRQcmV2ZW50ZWQgPSBuYXRpdmVFdmVudC5kZWZhdWx0UHJldmVudGVkO1xuICAgIHRoaXMuZXZlbnRQaGFzZSA9IG5hdGl2ZUV2ZW50LmV2ZW50UGhhc2U7XG4gICAgdGhpcy5pc1RydXN0ZWQgPSBuYXRpdmVFdmVudC5pc1RydXN0ZWQ7XG4gICAgdGhpcy50aW1lU3RhbXAgPSBuYXRpdmVFdmVudC50aW1lU3RhbXA7XG4gICAgdGhpcy50eXBlID0gdHlwZTtcbiAgfVxuXG4gIGlzRGVmYXVsdFByZXZlbnRlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5uYXRpdmVFdmVudC5kZWZhdWx0UHJldmVudGVkO1xuICB9XG5cbiAgcHJldmVudERlZmF1bHQoKTogdm9pZCB7XG4gICAgdGhpcy5kZWZhdWx0UHJldmVudGVkID0gdHJ1ZTtcbiAgICB0aGlzLm5hdGl2ZUV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIH1cblxuICBzdG9wUHJvcGFnYXRpb24oKTogdm9pZCB7XG4gICAgdGhpcy5uYXRpdmVFdmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB0aGlzLmlzUHJvcGFnYXRpb25TdG9wcGVkID0gKCkgPT4gdHJ1ZTtcbiAgfVxuXG4gIGlzUHJvcGFnYXRpb25TdG9wcGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHBlcnNpc3QoKSB7fVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlU3ludGhldGljQmx1ckV2ZW50KG9uQmx1cjogKGU6IFJlYWN0Rm9jdXNFdmVudCkgPT4gdm9pZCkge1xuICBsZXQgc3RhdGVSZWYgPSB1c2VSZWYoe1xuICAgIGlzRm9jdXNlZDogZmFsc2UsXG4gICAgb25CbHVyLFxuICAgIG9ic2VydmVyOiBudWxsIGFzIE11dGF0aW9uT2JzZXJ2ZXJcbiAgfSk7XG4gIHN0YXRlUmVmLmN1cnJlbnQub25CbHVyID0gb25CbHVyO1xuXG4gIC8vIENsZWFuIHVwIE11dGF0aW9uT2JzZXJ2ZXIgb24gdW5tb3VudC4gU2VlIGJlbG93LlxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgYXJyb3ctYm9keS1zdHlsZVxuICB1c2VMYXlvdXRFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHN0YXRlID0gc3RhdGVSZWYuY3VycmVudDtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKHN0YXRlLm9ic2VydmVyKSB7XG4gICAgICAgIHN0YXRlLm9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgc3RhdGUub2JzZXJ2ZXIgPSBudWxsO1xuICAgICAgfVxuICAgIH07XG4gIH0sIFtdKTtcblxuICAvLyBUaGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBkdXJpbmcgYSBSZWFjdCBvbkZvY3VzIGV2ZW50LlxuICByZXR1cm4gdXNlQ2FsbGJhY2soKGU6IFJlYWN0Rm9jdXNFdmVudCkgPT4ge1xuICAgIC8vIFJlYWN0IGRvZXMgbm90IGZpcmUgb25CbHVyIHdoZW4gYW4gZWxlbWVudCBpcyBkaXNhYmxlZC4gaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlYWN0L2lzc3Vlcy85MTQyXG4gICAgLy8gTW9zdCBicm93c2VycyBmaXJlIGEgbmF0aXZlIGZvY3Vzb3V0IGV2ZW50IGluIHRoaXMgY2FzZSwgZXhjZXB0IGZvciBGaXJlZm94LiBJbiB0aGF0IGNhc2UsIHdlIHVzZSBhXG4gICAgLy8gTXV0YXRpb25PYnNlcnZlciB0byB3YXRjaCBmb3IgdGhlIGRpc2FibGVkIGF0dHJpYnV0ZSwgYW5kIGRpc3BhdGNoIHRoZXNlIGV2ZW50cyBvdXJzZWx2ZXMuXG4gICAgLy8gRm9yIGJyb3dzZXJzIHRoYXQgZG8sIGZvY3Vzb3V0IGZpcmVzIGJlZm9yZSB0aGUgTXV0YXRpb25PYnNlcnZlciwgc28gb25CbHVyIHNob3VsZCBub3QgZmlyZSB0d2ljZS5cbiAgICBpZiAoXG4gICAgICBlLnRhcmdldCBpbnN0YW5jZW9mIEhUTUxCdXR0b25FbGVtZW50IHx8XG4gICAgICBlLnRhcmdldCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQgfHxcbiAgICAgIGUudGFyZ2V0IGluc3RhbmNlb2YgSFRNTFRleHRBcmVhRWxlbWVudCB8fFxuICAgICAgZS50YXJnZXQgaW5zdGFuY2VvZiBIVE1MU2VsZWN0RWxlbWVudFxuICAgICkge1xuICAgICAgc3RhdGVSZWYuY3VycmVudC5pc0ZvY3VzZWQgPSB0cnVlO1xuXG4gICAgICBsZXQgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICBsZXQgb25CbHVySGFuZGxlciA9IChlOiBGb2N1c0V2ZW50KSA9PiB7XG4gICAgICAgIHN0YXRlUmVmLmN1cnJlbnQuaXNGb2N1c2VkID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKHRhcmdldC5kaXNhYmxlZCkge1xuICAgICAgICAgIC8vIEZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5LCBkaXNwYXRjaCBhIChmYWtlKSBSZWFjdCBzeW50aGV0aWMgZXZlbnQuXG4gICAgICAgICAgc3RhdGVSZWYuY3VycmVudC5vbkJsdXI/LihuZXcgU3ludGhldGljRm9jdXNFdmVudCgnYmx1cicsIGUpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFdlIG5vIGxvbmdlciBuZWVkIHRoZSBNdXRhdGlvbk9ic2VydmVyIG9uY2UgdGhlIHRhcmdldCBpcyBibHVycmVkLlxuICAgICAgICBpZiAoc3RhdGVSZWYuY3VycmVudC5vYnNlcnZlcikge1xuICAgICAgICAgIHN0YXRlUmVmLmN1cnJlbnQub2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgICAgICAgIHN0YXRlUmVmLmN1cnJlbnQub2JzZXJ2ZXIgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICB0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXNvdXQnLCBvbkJsdXJIYW5kbGVyLCB7b25jZTogdHJ1ZX0pO1xuXG4gICAgICBzdGF0ZVJlZi5jdXJyZW50Lm9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKCkgPT4ge1xuICAgICAgICBpZiAoc3RhdGVSZWYuY3VycmVudC5pc0ZvY3VzZWQgJiYgdGFyZ2V0LmRpc2FibGVkKSB7XG4gICAgICAgICAgc3RhdGVSZWYuY3VycmVudC5vYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgdGFyZ2V0LmRpc3BhdGNoRXZlbnQobmV3IEZvY3VzRXZlbnQoJ2JsdXInKSk7XG4gICAgICAgICAgdGFyZ2V0LmRpc3BhdGNoRXZlbnQobmV3IEZvY3VzRXZlbnQoJ2ZvY3Vzb3V0Jywge2J1YmJsZXM6IHRydWV9KSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBzdGF0ZVJlZi5jdXJyZW50Lm9ic2VydmVyLm9ic2VydmUodGFyZ2V0LCB7YXR0cmlidXRlczogdHJ1ZSwgYXR0cmlidXRlRmlsdGVyOiBbJ2Rpc2FibGVkJ119KTtcbiAgICB9XG4gIH0sIFtdKTtcbn1cbiIsIi8qXG4gKiBDb3B5cmlnaHQgMjAyMCBBZG9iZS4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5XG4gKiBvZiB0aGUgTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyXG4gKiB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBSRVBSRVNFTlRBVElPTlNcbiAqIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZVxuICogZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge1ByZXNzUHJvcHN9IGZyb20gJy4vdXNlUHJlc3MnO1xuaW1wb3J0IFJlYWN0LCB7TXV0YWJsZVJlZk9iamVjdH0gZnJvbSAncmVhY3QnO1xuXG5pbnRlcmZhY2UgSVByZXNzUmVzcG9uZGVyQ29udGV4dCBleHRlbmRzIFByZXNzUHJvcHMge1xuICByZWdpc3RlcigpOiB2b2lkLFxuICByZWY/OiBNdXRhYmxlUmVmT2JqZWN0PEhUTUxFbGVtZW50PlxufVxuXG5leHBvcnQgY29uc3QgUHJlc3NSZXNwb25kZXJDb250ZXh0ID0gUmVhY3QuY3JlYXRlQ29udGV4dDxJUHJlc3NSZXNwb25kZXJDb250ZXh0PihudWxsKTtcblByZXNzUmVzcG9uZGVyQ29udGV4dC5kaXNwbGF5TmFtZSA9ICdQcmVzc1Jlc3BvbmRlckNvbnRleHQnO1xuIiwiLypcbiAqIENvcHlyaWdodCAyMDIwIEFkb2JlLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHlcbiAqIG9mIHRoZSBMaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXJcbiAqIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIFJFUFJFU0VOVEFUSU9OU1xuICogT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlXG4gKiBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8vIFBvcnRpb25zIG9mIHRoZSBjb2RlIGluIHRoaXMgZmlsZSBhcmUgYmFzZWQgb24gY29kZSBmcm9tIHJlYWN0LlxuLy8gT3JpZ2luYWwgbGljZW5zaW5nIGZvciB0aGUgZm9sbG93aW5nIGNhbiBiZSBmb3VuZCBpbiB0aGVcbi8vIE5PVElDRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWFjdC90cmVlL2NjN2MxYWVjZTQ2YTZiNjliNDE5NThkNzMxZTBmZDI3Yzk0YmZjNmMvcGFja2FnZXMvcmVhY3QtaW50ZXJhY3Rpb25zXG5cbmltcG9ydCB7ZGlzYWJsZVRleHRTZWxlY3Rpb24sIHJlc3RvcmVUZXh0U2VsZWN0aW9ufSBmcm9tICcuL3RleHRTZWxlY3Rpb24nO1xuaW1wb3J0IHtmb2N1c1dpdGhvdXRTY3JvbGxpbmcsIG1lcmdlUHJvcHMsIHVzZUdsb2JhbExpc3RlbmVycywgdXNlU3luY1JlZn0gZnJvbSAnQHJlYWN0LWFyaWEvdXRpbHMnO1xuaW1wb3J0IHtIVE1MQXR0cmlidXRlcywgUmVmT2JqZWN0LCB1c2VDb250ZXh0LCB1c2VFZmZlY3QsIHVzZU1lbW8sIHVzZVJlZiwgdXNlU3RhdGV9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7aXNWaXJ0dWFsQ2xpY2t9IGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IHtQb2ludGVyVHlwZSwgUHJlc3NFdmVudHN9IGZyb20gJ0ByZWFjdC10eXBlcy9zaGFyZWQnO1xuaW1wb3J0IHtQcmVzc1Jlc3BvbmRlckNvbnRleHR9IGZyb20gJy4vY29udGV4dCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJlc3NQcm9wcyBleHRlbmRzIFByZXNzRXZlbnRzIHtcbiAgLyoqIFdoZXRoZXIgdGhlIHRhcmdldCBpcyBpbiBhIGNvbnRyb2xsZWQgcHJlc3Mgc3RhdGUgKGUuZy4gYW4gb3ZlcmxheSBpdCB0cmlnZ2VycyBpcyBvcGVuKS4gKi9cbiAgaXNQcmVzc2VkPzogYm9vbGVhbixcbiAgLyoqIFdoZXRoZXIgdGhlIHByZXNzIGV2ZW50cyBzaG91bGQgYmUgZGlzYWJsZWQuICovXG4gIGlzRGlzYWJsZWQ/OiBib29sZWFuLFxuICAvKiogV2hldGhlciB0aGUgdGFyZ2V0IHNob3VsZCBub3QgcmVjZWl2ZSBmb2N1cyBvbiBwcmVzcy4gKi9cbiAgcHJldmVudEZvY3VzT25QcmVzcz86IGJvb2xlYW4sXG4gIC8qKlxuICAgKiBXaGV0aGVyIHByZXNzIGV2ZW50cyBzaG91bGQgYmUgY2FuY2VsZWQgd2hlbiB0aGUgcG9pbnRlciBsZWF2ZXMgdGhlIHRhcmdldCB3aGlsZSBwcmVzc2VkLlxuICAgKiBCeSBkZWZhdWx0LCB0aGlzIGlzIGBmYWxzZWAsIHdoaWNoIG1lYW5zIGlmIHRoZSBwb2ludGVyIHJldHVybnMgYmFjayBvdmVyIHRoZSB0YXJnZXQgd2hpbGVcbiAgICogc3RpbGwgcHJlc3NlZCwgb25QcmVzc1N0YXJ0IHdpbGwgYmUgZmlyZWQgYWdhaW4uIElmIHNldCB0byBgdHJ1ZWAsIHRoZSBwcmVzcyBpcyBjYW5jZWxlZFxuICAgKiB3aGVuIHRoZSBwb2ludGVyIGxlYXZlcyB0aGUgdGFyZ2V0IGFuZCBvblByZXNzU3RhcnQgd2lsbCBub3QgYmUgZmlyZWQgaWYgdGhlIHBvaW50ZXIgcmV0dXJucy5cbiAgICovXG4gIHNob3VsZENhbmNlbE9uUG9pbnRlckV4aXQ/OiBib29sZWFuLFxuICAvKiogV2hldGhlciB0ZXh0IHNlbGVjdGlvbiBzaG91bGQgYmUgZW5hYmxlZCBvbiB0aGUgcHJlc3NhYmxlIGVsZW1lbnQuICovXG4gIGFsbG93VGV4dFNlbGVjdGlvbk9uUHJlc3M/OiBib29sZWFuXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJlc3NIb29rUHJvcHMgZXh0ZW5kcyBQcmVzc1Byb3BzIHtcbiAgLyoqIEEgcmVmIHRvIHRoZSB0YXJnZXQgZWxlbWVudC4gKi9cbiAgcmVmPzogUmVmT2JqZWN0PEhUTUxFbGVtZW50PlxufVxuXG5pbnRlcmZhY2UgUHJlc3NTdGF0ZSB7XG4gIGlzUHJlc3NlZDogYm9vbGVhbixcbiAgaWdub3JlRW11bGF0ZWRNb3VzZUV2ZW50czogYm9vbGVhbixcbiAgaWdub3JlQ2xpY2tBZnRlclByZXNzOiBib29sZWFuLFxuICBkaWRGaXJlUHJlc3NTdGFydDogYm9vbGVhbixcbiAgYWN0aXZlUG9pbnRlcklkOiBhbnksXG4gIHRhcmdldDogSFRNTEVsZW1lbnQgfCBudWxsLFxuICBpc092ZXJUYXJnZXQ6IGJvb2xlYW4sXG4gIHBvaW50ZXJUeXBlOiBQb2ludGVyVHlwZSxcbiAgdXNlclNlbGVjdD86IHN0cmluZ1xufVxuXG5pbnRlcmZhY2UgRXZlbnRCYXNlIHtcbiAgY3VycmVudFRhcmdldDogRXZlbnRUYXJnZXQsXG4gIHNoaWZ0S2V5OiBib29sZWFuLFxuICBjdHJsS2V5OiBib29sZWFuLFxuICBtZXRhS2V5OiBib29sZWFuLFxuICBhbHRLZXk6IGJvb2xlYW5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBQcmVzc1Jlc3VsdCB7XG4gIC8qKiBXaGV0aGVyIHRoZSB0YXJnZXQgaXMgY3VycmVudGx5IHByZXNzZWQuICovXG4gIGlzUHJlc3NlZDogYm9vbGVhbixcbiAgLyoqIFByb3BzIHRvIHNwcmVhZCBvbiB0aGUgdGFyZ2V0IGVsZW1lbnQuICovXG4gIHByZXNzUHJvcHM6IEhUTUxBdHRyaWJ1dGVzPEhUTUxFbGVtZW50PlxufVxuXG5mdW5jdGlvbiB1c2VQcmVzc1Jlc3BvbmRlckNvbnRleHQocHJvcHM6IFByZXNzSG9va1Byb3BzKTogUHJlc3NIb29rUHJvcHMge1xuICAvLyBDb25zdW1lIGNvbnRleHQgZnJvbSA8UHJlc3NSZXNwb25kZXI+IGFuZCBtZXJnZSB3aXRoIHByb3BzLlxuICBsZXQgY29udGV4dCA9IHVzZUNvbnRleHQoUHJlc3NSZXNwb25kZXJDb250ZXh0KTtcbiAgaWYgKGNvbnRleHQpIHtcbiAgICBsZXQge3JlZ2lzdGVyLCAuLi5jb250ZXh0UHJvcHN9ID0gY29udGV4dDtcbiAgICBwcm9wcyA9IG1lcmdlUHJvcHMoY29udGV4dFByb3BzLCBwcm9wcykgYXMgUHJlc3NIb29rUHJvcHM7XG4gICAgcmVnaXN0ZXIoKTtcbiAgfVxuICB1c2VTeW5jUmVmKGNvbnRleHQsIHByb3BzLnJlZik7XG5cbiAgcmV0dXJuIHByb3BzO1xufVxuXG4vKipcbiAqIEhhbmRsZXMgcHJlc3MgaW50ZXJhY3Rpb25zIGFjcm9zcyBtb3VzZSwgdG91Y2gsIGtleWJvYXJkLCBhbmQgc2NyZWVuIHJlYWRlcnMuXG4gKiBJdCBub3JtYWxpemVzIGJlaGF2aW9yIGFjcm9zcyBicm93c2VycyBhbmQgcGxhdGZvcm1zLCBhbmQgaGFuZGxlcyBtYW55IG51YW5jZXNcbiAqIG9mIGRlYWxpbmcgd2l0aCBwb2ludGVyIGFuZCBrZXlib2FyZCBldmVudHMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VQcmVzcyhwcm9wczogUHJlc3NIb29rUHJvcHMpOiBQcmVzc1Jlc3VsdCB7XG4gIGxldCB7XG4gICAgb25QcmVzcyxcbiAgICBvblByZXNzQ2hhbmdlLFxuICAgIG9uUHJlc3NTdGFydCxcbiAgICBvblByZXNzRW5kLFxuICAgIG9uUHJlc3NVcCxcbiAgICBpc0Rpc2FibGVkLFxuICAgIGlzUHJlc3NlZDogaXNQcmVzc2VkUHJvcCxcbiAgICBwcmV2ZW50Rm9jdXNPblByZXNzLFxuICAgIHNob3VsZENhbmNlbE9uUG9pbnRlckV4aXQsXG4gICAgYWxsb3dUZXh0U2VsZWN0aW9uT25QcmVzcyxcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXG4gICAgcmVmOiBfLCAvLyBSZW1vdmluZyBgcmVmYCBmcm9tIGBkb21Qcm9wc2AgYmVjYXVzZSBUeXBlU2NyaXB0IGlzIGR1bWJcbiAgICAuLi5kb21Qcm9wc1xuICB9ID0gdXNlUHJlc3NSZXNwb25kZXJDb250ZXh0KHByb3BzKTtcbiAgbGV0IHByb3BzUmVmID0gdXNlUmVmPFByZXNzSG9va1Byb3BzPihudWxsKTtcbiAgcHJvcHNSZWYuY3VycmVudCA9IHtvblByZXNzLCBvblByZXNzQ2hhbmdlLCBvblByZXNzU3RhcnQsIG9uUHJlc3NFbmQsIG9uUHJlc3NVcCwgaXNEaXNhYmxlZCwgc2hvdWxkQ2FuY2VsT25Qb2ludGVyRXhpdH07XG5cbiAgbGV0IFtpc1ByZXNzZWQsIHNldFByZXNzZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBsZXQgcmVmID0gdXNlUmVmPFByZXNzU3RhdGU+KHtcbiAgICBpc1ByZXNzZWQ6IGZhbHNlLFxuICAgIGlnbm9yZUVtdWxhdGVkTW91c2VFdmVudHM6IGZhbHNlLFxuICAgIGlnbm9yZUNsaWNrQWZ0ZXJQcmVzczogZmFsc2UsXG4gICAgZGlkRmlyZVByZXNzU3RhcnQ6IGZhbHNlLFxuICAgIGFjdGl2ZVBvaW50ZXJJZDogbnVsbCxcbiAgICB0YXJnZXQ6IG51bGwsXG4gICAgaXNPdmVyVGFyZ2V0OiBmYWxzZSxcbiAgICBwb2ludGVyVHlwZTogbnVsbFxuICB9KTtcblxuICBsZXQge2FkZEdsb2JhbExpc3RlbmVyLCByZW1vdmVBbGxHbG9iYWxMaXN0ZW5lcnN9ID0gdXNlR2xvYmFsTGlzdGVuZXJzKCk7XG5cbiAgbGV0IHByZXNzUHJvcHMgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBsZXQgc3RhdGUgPSByZWYuY3VycmVudDtcbiAgICBsZXQgdHJpZ2dlclByZXNzU3RhcnQgPSAob3JpZ2luYWxFdmVudDogRXZlbnRCYXNlLCBwb2ludGVyVHlwZTogUG9pbnRlclR5cGUpID0+IHtcbiAgICAgIGxldCB7b25QcmVzc1N0YXJ0LCBvblByZXNzQ2hhbmdlLCBpc0Rpc2FibGVkfSA9IHByb3BzUmVmLmN1cnJlbnQ7XG4gICAgICBpZiAoaXNEaXNhYmxlZCB8fCBzdGF0ZS5kaWRGaXJlUHJlc3NTdGFydCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChvblByZXNzU3RhcnQpIHtcbiAgICAgICAgb25QcmVzc1N0YXJ0KHtcbiAgICAgICAgICB0eXBlOiAncHJlc3NzdGFydCcsXG4gICAgICAgICAgcG9pbnRlclR5cGUsXG4gICAgICAgICAgdGFyZ2V0OiBvcmlnaW5hbEV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnQsXG4gICAgICAgICAgc2hpZnRLZXk6IG9yaWdpbmFsRXZlbnQuc2hpZnRLZXksXG4gICAgICAgICAgbWV0YUtleTogb3JpZ2luYWxFdmVudC5tZXRhS2V5LFxuICAgICAgICAgIGN0cmxLZXk6IG9yaWdpbmFsRXZlbnQuY3RybEtleSxcbiAgICAgICAgICBhbHRLZXk6IG9yaWdpbmFsRXZlbnQuYWx0S2V5XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBpZiAob25QcmVzc0NoYW5nZSkge1xuICAgICAgICBvblByZXNzQ2hhbmdlKHRydWUpO1xuICAgICAgfVxuXG4gICAgICBzdGF0ZS5kaWRGaXJlUHJlc3NTdGFydCA9IHRydWU7XG4gICAgICBzZXRQcmVzc2VkKHRydWUpO1xuICAgIH07XG5cbiAgICBsZXQgdHJpZ2dlclByZXNzRW5kID0gKG9yaWdpbmFsRXZlbnQ6IEV2ZW50QmFzZSwgcG9pbnRlclR5cGU6IFBvaW50ZXJUeXBlLCB3YXNQcmVzc2VkID0gdHJ1ZSkgPT4ge1xuICAgICAgbGV0IHtvblByZXNzRW5kLCBvblByZXNzQ2hhbmdlLCBvblByZXNzLCBpc0Rpc2FibGVkfSA9IHByb3BzUmVmLmN1cnJlbnQ7XG4gICAgICBpZiAoIXN0YXRlLmRpZEZpcmVQcmVzc1N0YXJ0KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgc3RhdGUuaWdub3JlQ2xpY2tBZnRlclByZXNzID0gdHJ1ZTtcbiAgICAgIHN0YXRlLmRpZEZpcmVQcmVzc1N0YXJ0ID0gZmFsc2U7XG5cbiAgICAgIGlmIChvblByZXNzRW5kKSB7XG4gICAgICAgIG9uUHJlc3NFbmQoe1xuICAgICAgICAgIHR5cGU6ICdwcmVzc2VuZCcsXG4gICAgICAgICAgcG9pbnRlclR5cGUsXG4gICAgICAgICAgdGFyZ2V0OiBvcmlnaW5hbEV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnQsXG4gICAgICAgICAgc2hpZnRLZXk6IG9yaWdpbmFsRXZlbnQuc2hpZnRLZXksXG4gICAgICAgICAgbWV0YUtleTogb3JpZ2luYWxFdmVudC5tZXRhS2V5LFxuICAgICAgICAgIGN0cmxLZXk6IG9yaWdpbmFsRXZlbnQuY3RybEtleSxcbiAgICAgICAgICBhbHRLZXk6IG9yaWdpbmFsRXZlbnQuYWx0S2V5XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBpZiAob25QcmVzc0NoYW5nZSkge1xuICAgICAgICBvblByZXNzQ2hhbmdlKGZhbHNlKTtcbiAgICAgIH1cblxuICAgICAgc2V0UHJlc3NlZChmYWxzZSk7XG5cbiAgICAgIGlmIChvblByZXNzICYmIHdhc1ByZXNzZWQgJiYgIWlzRGlzYWJsZWQpIHtcbiAgICAgICAgb25QcmVzcyh7XG4gICAgICAgICAgdHlwZTogJ3ByZXNzJyxcbiAgICAgICAgICBwb2ludGVyVHlwZSxcbiAgICAgICAgICB0YXJnZXQ6IG9yaWdpbmFsRXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudCxcbiAgICAgICAgICBzaGlmdEtleTogb3JpZ2luYWxFdmVudC5zaGlmdEtleSxcbiAgICAgICAgICBtZXRhS2V5OiBvcmlnaW5hbEV2ZW50Lm1ldGFLZXksXG4gICAgICAgICAgY3RybEtleTogb3JpZ2luYWxFdmVudC5jdHJsS2V5LFxuICAgICAgICAgIGFsdEtleTogb3JpZ2luYWxFdmVudC5hbHRLZXlcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGxldCB0cmlnZ2VyUHJlc3NVcCA9IChvcmlnaW5hbEV2ZW50OiBFdmVudEJhc2UsIHBvaW50ZXJUeXBlOiBQb2ludGVyVHlwZSkgPT4ge1xuICAgICAgbGV0IHtvblByZXNzVXAsIGlzRGlzYWJsZWR9ID0gcHJvcHNSZWYuY3VycmVudDtcbiAgICAgIGlmIChpc0Rpc2FibGVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKG9uUHJlc3NVcCkge1xuICAgICAgICBvblByZXNzVXAoe1xuICAgICAgICAgIHR5cGU6ICdwcmVzc3VwJyxcbiAgICAgICAgICBwb2ludGVyVHlwZSxcbiAgICAgICAgICB0YXJnZXQ6IG9yaWdpbmFsRXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudCxcbiAgICAgICAgICBzaGlmdEtleTogb3JpZ2luYWxFdmVudC5zaGlmdEtleSxcbiAgICAgICAgICBtZXRhS2V5OiBvcmlnaW5hbEV2ZW50Lm1ldGFLZXksXG4gICAgICAgICAgY3RybEtleTogb3JpZ2luYWxFdmVudC5jdHJsS2V5LFxuICAgICAgICAgIGFsdEtleTogb3JpZ2luYWxFdmVudC5hbHRLZXlcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGxldCBjYW5jZWwgPSAoZTogRXZlbnRCYXNlKSA9PiB7XG4gICAgICBpZiAoc3RhdGUuaXNQcmVzc2VkKSB7XG4gICAgICAgIGlmIChzdGF0ZS5pc092ZXJUYXJnZXQpIHtcbiAgICAgICAgICB0cmlnZ2VyUHJlc3NFbmQoY3JlYXRlRXZlbnQoc3RhdGUudGFyZ2V0LCBlKSwgc3RhdGUucG9pbnRlclR5cGUsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICBzdGF0ZS5pc1ByZXNzZWQgPSBmYWxzZTtcbiAgICAgICAgc3RhdGUuaXNPdmVyVGFyZ2V0ID0gZmFsc2U7XG4gICAgICAgIHN0YXRlLmFjdGl2ZVBvaW50ZXJJZCA9IG51bGw7XG4gICAgICAgIHN0YXRlLnBvaW50ZXJUeXBlID0gbnVsbDtcbiAgICAgICAgcmVtb3ZlQWxsR2xvYmFsTGlzdGVuZXJzKCk7XG4gICAgICAgIGlmICghYWxsb3dUZXh0U2VsZWN0aW9uT25QcmVzcykge1xuICAgICAgICAgIHJlc3RvcmVUZXh0U2VsZWN0aW9uKHN0YXRlLnRhcmdldCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgbGV0IHByZXNzUHJvcHM6IEhUTUxBdHRyaWJ1dGVzPEhUTUxFbGVtZW50PiA9IHtcbiAgICAgIG9uS2V5RG93bihlKSB7XG4gICAgICAgIGlmIChpc1ZhbGlkS2V5Ym9hcmRFdmVudChlLm5hdGl2ZUV2ZW50KSAmJiBlLmN1cnJlbnRUYXJnZXQuY29udGFpbnMoZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQpKSB7XG4gICAgICAgICAgaWYgKHNob3VsZFByZXZlbnREZWZhdWx0S2V5Ym9hcmQoZS50YXJnZXQgYXMgRWxlbWVudCkpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICAgIC8vIElmIHRoZSBldmVudCBpcyByZXBlYXRpbmcsIGl0IG1heSBoYXZlIHN0YXJ0ZWQgb24gYSBkaWZmZXJlbnQgZWxlbWVudFxuICAgICAgICAgIC8vIGFmdGVyIHdoaWNoIGZvY3VzIG1vdmVkIHRvIHRoZSBjdXJyZW50IGVsZW1lbnQuIElnbm9yZSB0aGVzZSBldmVudHMgYW5kXG4gICAgICAgICAgLy8gb25seSBoYW5kbGUgdGhlIGZpcnN0IGtleSBkb3duIGV2ZW50LlxuICAgICAgICAgIGlmICghc3RhdGUuaXNQcmVzc2VkICYmICFlLnJlcGVhdCkge1xuICAgICAgICAgICAgc3RhdGUudGFyZ2V0ID0gZS5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xuICAgICAgICAgICAgc3RhdGUuaXNQcmVzc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRyaWdnZXJQcmVzc1N0YXJ0KGUsICdrZXlib2FyZCcpO1xuXG4gICAgICAgICAgICAvLyBGb2N1cyBtYXkgbW92ZSBiZWZvcmUgdGhlIGtleSB1cCBldmVudCwgc28gcmVnaXN0ZXIgdGhlIGV2ZW50IG9uIHRoZSBkb2N1bWVudFxuICAgICAgICAgICAgLy8gaW5zdGVhZCBvZiB0aGUgc2FtZSBlbGVtZW50IHdoZXJlIHRoZSBrZXkgZG93biBldmVudCBvY2N1cnJlZC5cbiAgICAgICAgICAgIGFkZEdsb2JhbExpc3RlbmVyKGRvY3VtZW50LCAna2V5dXAnLCBvbktleVVwLCBmYWxzZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgb25LZXlVcChlKSB7XG4gICAgICAgIGlmIChpc1ZhbGlkS2V5Ym9hcmRFdmVudChlLm5hdGl2ZUV2ZW50KSAmJiAhZS5yZXBlYXQgJiYgZS5jdXJyZW50VGFyZ2V0LmNvbnRhaW5zKGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50KSkge1xuICAgICAgICAgIHRyaWdnZXJQcmVzc1VwKGNyZWF0ZUV2ZW50KHN0YXRlLnRhcmdldCwgZSksICdrZXlib2FyZCcpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgb25DbGljayhlKSB7XG4gICAgICAgIGlmIChlICYmICFlLmN1cnJlbnRUYXJnZXQuY29udGFpbnMoZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGUgJiYgZS5idXR0b24gPT09IDApIHtcbiAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgIGlmIChpc0Rpc2FibGVkKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gSWYgdHJpZ2dlcmVkIGZyb20gYSBzY3JlZW4gcmVhZGVyIG9yIGJ5IHVzaW5nIGVsZW1lbnQuY2xpY2soKSxcbiAgICAgICAgICAvLyB0cmlnZ2VyIGFzIGlmIGl0IHdlcmUgYSBrZXlib2FyZCBjbGljay5cbiAgICAgICAgICBpZiAoIXN0YXRlLmlnbm9yZUNsaWNrQWZ0ZXJQcmVzcyAmJiAhc3RhdGUuaWdub3JlRW11bGF0ZWRNb3VzZUV2ZW50cyAmJiAoc3RhdGUucG9pbnRlclR5cGUgPT09ICd2aXJ0dWFsJyB8fCBpc1ZpcnR1YWxDbGljayhlLm5hdGl2ZUV2ZW50KSkpIHtcbiAgICAgICAgICAgIC8vIEVuc3VyZSB0aGUgZWxlbWVudCByZWNlaXZlcyBmb2N1cyAoVm9pY2VPdmVyIG9uIGlPUyBkb2VzIG5vdCBkbyB0aGlzKVxuICAgICAgICAgICAgaWYgKCFpc0Rpc2FibGVkICYmICFwcmV2ZW50Rm9jdXNPblByZXNzKSB7XG4gICAgICAgICAgICAgIGZvY3VzV2l0aG91dFNjcm9sbGluZyhlLmN1cnJlbnRUYXJnZXQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0cmlnZ2VyUHJlc3NTdGFydChlLCAndmlydHVhbCcpO1xuICAgICAgICAgICAgdHJpZ2dlclByZXNzVXAoZSwgJ3ZpcnR1YWwnKTtcbiAgICAgICAgICAgIHRyaWdnZXJQcmVzc0VuZChlLCAndmlydHVhbCcpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHN0YXRlLmlnbm9yZUVtdWxhdGVkTW91c2VFdmVudHMgPSBmYWxzZTtcbiAgICAgICAgICBzdGF0ZS5pZ25vcmVDbGlja0FmdGVyUHJlc3MgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICBsZXQgb25LZXlVcCA9IChlOiBLZXlib2FyZEV2ZW50KSA9PiB7XG4gICAgICBpZiAoc3RhdGUuaXNQcmVzc2VkICYmIGlzVmFsaWRLZXlib2FyZEV2ZW50KGUpKSB7XG4gICAgICAgIGlmIChzaG91bGRQcmV2ZW50RGVmYXVsdEtleWJvYXJkKGUudGFyZ2V0IGFzIEVsZW1lbnQpKSB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgc3RhdGUuaXNQcmVzc2VkID0gZmFsc2U7XG4gICAgICAgIGxldCB0YXJnZXQgPSBlLnRhcmdldCBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgdHJpZ2dlclByZXNzRW5kKGNyZWF0ZUV2ZW50KHN0YXRlLnRhcmdldCwgZSksICdrZXlib2FyZCcsIHN0YXRlLnRhcmdldC5jb250YWlucyh0YXJnZXQpKTtcbiAgICAgICAgcmVtb3ZlQWxsR2xvYmFsTGlzdGVuZXJzKCk7XG5cbiAgICAgICAgLy8gSWYgdGhlIHRhcmdldCBpcyBhIGxpbmssIHRyaWdnZXIgdGhlIGNsaWNrIG1ldGhvZCB0byBvcGVuIHRoZSBVUkwsXG4gICAgICAgIC8vIGJ1dCBkZWZlciB0cmlnZ2VyaW5nIHByZXNzRW5kIHVudGlsIG9uQ2xpY2sgZXZlbnQgaGFuZGxlci5cbiAgICAgICAgaWYgKHN0YXRlLnRhcmdldC5jb250YWlucyh0YXJnZXQpICYmIGlzSFRNTEFuY2hvckxpbmsoc3RhdGUudGFyZ2V0KSB8fCBzdGF0ZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdyb2xlJykgPT09ICdsaW5rJykge1xuICAgICAgICAgIHN0YXRlLnRhcmdldC5jbGljaygpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIGlmICh0eXBlb2YgUG9pbnRlckV2ZW50ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgcHJlc3NQcm9wcy5vblBvaW50ZXJEb3duID0gKGUpID0+IHtcbiAgICAgICAgLy8gT25seSBoYW5kbGUgbGVmdCBjbGlja3MsIGFuZCBpZ25vcmUgZXZlbnRzIHRoYXQgYnViYmxlZCB0aHJvdWdoIHBvcnRhbHMuXG4gICAgICAgIGlmIChlLmJ1dHRvbiAhPT0gMCB8fCAhZS5jdXJyZW50VGFyZ2V0LmNvbnRhaW5zKGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50KSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGlPUyBzYWZhcmkgZmlyZXMgcG9pbnRlciBldmVudHMgZnJvbSBWb2ljZU92ZXIgd2l0aCBpbmNvcnJlY3QgY29vcmRpbmF0ZXMvdGFyZ2V0LlxuICAgICAgICAvLyBJZ25vcmUgYW5kIGxldCB0aGUgb25DbGljayBoYW5kbGVyIHRha2UgY2FyZSBvZiBpdCBpbnN0ZWFkLlxuICAgICAgICAvLyBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MjIyNjI3XG4gICAgICAgIC8vIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0yMjMyMDJcbiAgICAgICAgaWYgKGlzVmlydHVhbFBvaW50ZXJFdmVudChlLm5hdGl2ZUV2ZW50KSkge1xuICAgICAgICAgIHN0YXRlLnBvaW50ZXJUeXBlID0gJ3ZpcnR1YWwnO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIER1ZSB0byBicm93c2VyIGluY29uc2lzdGVuY2llcywgZXNwZWNpYWxseSBvbiBtb2JpbGUgYnJvd3NlcnMsIHdlIHByZXZlbnRcbiAgICAgICAgLy8gZGVmYXVsdCBvbiBwb2ludGVyIGRvd24gYW5kIGhhbmRsZSBmb2N1c2luZyB0aGUgcHJlc3NhYmxlIGVsZW1lbnQgb3Vyc2VsdmVzLlxuICAgICAgICBpZiAoc2hvdWxkUHJldmVudERlZmF1bHQoZS5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50KSkge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHN0YXRlLnBvaW50ZXJUeXBlID0gZS5wb2ludGVyVHlwZTtcblxuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICBpZiAoIXN0YXRlLmlzUHJlc3NlZCkge1xuICAgICAgICAgIHN0YXRlLmlzUHJlc3NlZCA9IHRydWU7XG4gICAgICAgICAgc3RhdGUuaXNPdmVyVGFyZ2V0ID0gdHJ1ZTtcbiAgICAgICAgICBzdGF0ZS5hY3RpdmVQb2ludGVySWQgPSBlLnBvaW50ZXJJZDtcbiAgICAgICAgICBzdGF0ZS50YXJnZXQgPSBlLmN1cnJlbnRUYXJnZXQ7XG5cbiAgICAgICAgICBpZiAoIWlzRGlzYWJsZWQgJiYgIXByZXZlbnRGb2N1c09uUHJlc3MpIHtcbiAgICAgICAgICAgIGZvY3VzV2l0aG91dFNjcm9sbGluZyhlLmN1cnJlbnRUYXJnZXQpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICghYWxsb3dUZXh0U2VsZWN0aW9uT25QcmVzcykge1xuICAgICAgICAgICAgZGlzYWJsZVRleHRTZWxlY3Rpb24oc3RhdGUudGFyZ2V0KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0cmlnZ2VyUHJlc3NTdGFydChlLCBzdGF0ZS5wb2ludGVyVHlwZSk7XG5cbiAgICAgICAgICBhZGRHbG9iYWxMaXN0ZW5lcihkb2N1bWVudCwgJ3BvaW50ZXJtb3ZlJywgb25Qb2ludGVyTW92ZSwgZmFsc2UpO1xuICAgICAgICAgIGFkZEdsb2JhbExpc3RlbmVyKGRvY3VtZW50LCAncG9pbnRlcnVwJywgb25Qb2ludGVyVXAsIGZhbHNlKTtcbiAgICAgICAgICBhZGRHbG9iYWxMaXN0ZW5lcihkb2N1bWVudCwgJ3BvaW50ZXJjYW5jZWwnLCBvblBvaW50ZXJDYW5jZWwsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgcHJlc3NQcm9wcy5vbk1vdXNlRG93biA9IChlKSA9PiB7XG4gICAgICAgIGlmICghZS5jdXJyZW50VGFyZ2V0LmNvbnRhaW5zKGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50KSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlLmJ1dHRvbiA9PT0gMCkge1xuICAgICAgICAgIC8vIENocm9tZSBhbmQgRmlyZWZveCBvbiB0b3VjaCBXaW5kb3dzIGRldmljZXMgcmVxdWlyZSBtb3VzZSBkb3duIGV2ZW50c1xuICAgICAgICAgIC8vIHRvIGJlIGNhbmNlbGVkIGluIGFkZGl0aW9uIHRvIHBvaW50ZXIgZXZlbnRzLCBvciBhbiBleHRyYSBhc3luY2hyb25vdXNcbiAgICAgICAgICAvLyBmb2N1cyBldmVudCB3aWxsIGJlIGZpcmVkLlxuICAgICAgICAgIGlmIChzaG91bGRQcmV2ZW50RGVmYXVsdChlLmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnQpKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgcHJlc3NQcm9wcy5vblBvaW50ZXJVcCA9IChlKSA9PiB7XG4gICAgICAgIC8vIGlPUyBmaXJlcyBwb2ludGVydXAgd2l0aCB6ZXJvIHdpZHRoIGFuZCBoZWlnaHQsIHNvIGNoZWNrIHRoZSBwb2ludGVyVHlwZSByZWNvcmRlZCBkdXJpbmcgcG9pbnRlcmRvd24uXG4gICAgICAgIGlmICghZS5jdXJyZW50VGFyZ2V0LmNvbnRhaW5zKGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50KSB8fCBzdGF0ZS5wb2ludGVyVHlwZSA9PT0gJ3ZpcnR1YWwnKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gT25seSBoYW5kbGUgbGVmdCBjbGlja3NcbiAgICAgICAgLy8gU2FmYXJpIG9uIGlPUyBzb21ldGltZXMgZmlyZXMgcG9pbnRlcnVwIGV2ZW50cywgZXZlblxuICAgICAgICAvLyB3aGVuIHRoZSB0b3VjaCBpc24ndCBvdmVyIHRoZSB0YXJnZXQsIHNvIGRvdWJsZSBjaGVjay5cbiAgICAgICAgaWYgKGUuYnV0dG9uID09PSAwICYmIGlzT3ZlclRhcmdldChlLCBlLmN1cnJlbnRUYXJnZXQpKSB7XG4gICAgICAgICAgdHJpZ2dlclByZXNzVXAoZSwgc3RhdGUucG9pbnRlclR5cGUgfHwgZS5wb2ludGVyVHlwZSk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIC8vIFNhZmFyaSBvbiBpT1MgPCAxMy4yIGRvZXMgbm90IGltcGxlbWVudCBwb2ludGVyZW50ZXIvcG9pbnRlcmxlYXZlIGV2ZW50cyBjb3JyZWN0bHkuXG4gICAgICAvLyBVc2UgcG9pbnRlciBtb3ZlIGV2ZW50cyBpbnN0ZWFkIHRvIGltcGxlbWVudCBvdXIgb3duIGhpdCB0ZXN0aW5nLlxuICAgICAgLy8gU2VlIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xOTk4MDNcbiAgICAgIGxldCBvblBvaW50ZXJNb3ZlID0gKGU6IFBvaW50ZXJFdmVudCkgPT4ge1xuICAgICAgICBpZiAoZS5wb2ludGVySWQgIT09IHN0YXRlLmFjdGl2ZVBvaW50ZXJJZCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc092ZXJUYXJnZXQoZSwgc3RhdGUudGFyZ2V0KSkge1xuICAgICAgICAgIGlmICghc3RhdGUuaXNPdmVyVGFyZ2V0KSB7XG4gICAgICAgICAgICBzdGF0ZS5pc092ZXJUYXJnZXQgPSB0cnVlO1xuICAgICAgICAgICAgdHJpZ2dlclByZXNzU3RhcnQoY3JlYXRlRXZlbnQoc3RhdGUudGFyZ2V0LCBlKSwgc3RhdGUucG9pbnRlclR5cGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChzdGF0ZS5pc092ZXJUYXJnZXQpIHtcbiAgICAgICAgICBzdGF0ZS5pc092ZXJUYXJnZXQgPSBmYWxzZTtcbiAgICAgICAgICB0cmlnZ2VyUHJlc3NFbmQoY3JlYXRlRXZlbnQoc3RhdGUudGFyZ2V0LCBlKSwgc3RhdGUucG9pbnRlclR5cGUsIGZhbHNlKTtcbiAgICAgICAgICBpZiAocHJvcHNSZWYuY3VycmVudC5zaG91bGRDYW5jZWxPblBvaW50ZXJFeGl0KSB7XG4gICAgICAgICAgICBjYW5jZWwoZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBsZXQgb25Qb2ludGVyVXAgPSAoZTogUG9pbnRlckV2ZW50KSA9PiB7XG4gICAgICAgIGlmIChlLnBvaW50ZXJJZCA9PT0gc3RhdGUuYWN0aXZlUG9pbnRlcklkICYmIHN0YXRlLmlzUHJlc3NlZCAmJiBlLmJ1dHRvbiA9PT0gMCkge1xuICAgICAgICAgIGlmIChpc092ZXJUYXJnZXQoZSwgc3RhdGUudGFyZ2V0KSkge1xuICAgICAgICAgICAgdHJpZ2dlclByZXNzRW5kKGNyZWF0ZUV2ZW50KHN0YXRlLnRhcmdldCwgZSksIHN0YXRlLnBvaW50ZXJUeXBlKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHN0YXRlLmlzT3ZlclRhcmdldCkge1xuICAgICAgICAgICAgdHJpZ2dlclByZXNzRW5kKGNyZWF0ZUV2ZW50KHN0YXRlLnRhcmdldCwgZSksIHN0YXRlLnBvaW50ZXJUeXBlLCBmYWxzZSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc3RhdGUuaXNQcmVzc2VkID0gZmFsc2U7XG4gICAgICAgICAgc3RhdGUuaXNPdmVyVGFyZ2V0ID0gZmFsc2U7XG4gICAgICAgICAgc3RhdGUuYWN0aXZlUG9pbnRlcklkID0gbnVsbDtcbiAgICAgICAgICBzdGF0ZS5wb2ludGVyVHlwZSA9IG51bGw7XG4gICAgICAgICAgcmVtb3ZlQWxsR2xvYmFsTGlzdGVuZXJzKCk7XG4gICAgICAgICAgaWYgKCFhbGxvd1RleHRTZWxlY3Rpb25PblByZXNzKSB7XG4gICAgICAgICAgICByZXN0b3JlVGV4dFNlbGVjdGlvbihzdGF0ZS50YXJnZXQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgbGV0IG9uUG9pbnRlckNhbmNlbCA9IChlOiBQb2ludGVyRXZlbnQpID0+IHtcbiAgICAgICAgY2FuY2VsKGUpO1xuICAgICAgfTtcblxuICAgICAgcHJlc3NQcm9wcy5vbkRyYWdTdGFydCA9IChlKSA9PiB7XG4gICAgICAgIGlmICghZS5jdXJyZW50VGFyZ2V0LmNvbnRhaW5zKGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50KSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNhZmFyaSBkb2VzIG5vdCBjYWxsIG9uUG9pbnRlckNhbmNlbCB3aGVuIGEgZHJhZyBzdGFydHMsIHdoZXJlYXMgQ2hyb21lIGFuZCBGaXJlZm94IGRvLlxuICAgICAgICBjYW5jZWwoZSk7XG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBwcmVzc1Byb3BzLm9uTW91c2VEb3duID0gKGUpID0+IHtcbiAgICAgICAgLy8gT25seSBoYW5kbGUgbGVmdCBjbGlja3NcbiAgICAgICAgaWYgKGUuYnV0dG9uICE9PSAwIHx8ICFlLmN1cnJlbnRUYXJnZXQuY29udGFpbnMoZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRHVlIHRvIGJyb3dzZXIgaW5jb25zaXN0ZW5jaWVzLCBlc3BlY2lhbGx5IG9uIG1vYmlsZSBicm93c2Vycywgd2UgcHJldmVudFxuICAgICAgICAvLyBkZWZhdWx0IG9uIG1vdXNlIGRvd24gYW5kIGhhbmRsZSBmb2N1c2luZyB0aGUgcHJlc3NhYmxlIGVsZW1lbnQgb3Vyc2VsdmVzLlxuICAgICAgICBpZiAoc2hvdWxkUHJldmVudERlZmF1bHQoZS5jdXJyZW50VGFyZ2V0IGFzIEhUTUxFbGVtZW50KSkge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIGlmIChzdGF0ZS5pZ25vcmVFbXVsYXRlZE1vdXNlRXZlbnRzKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgc3RhdGUuaXNQcmVzc2VkID0gdHJ1ZTtcbiAgICAgICAgc3RhdGUuaXNPdmVyVGFyZ2V0ID0gdHJ1ZTtcbiAgICAgICAgc3RhdGUudGFyZ2V0ID0gZS5jdXJyZW50VGFyZ2V0O1xuICAgICAgICBzdGF0ZS5wb2ludGVyVHlwZSA9IGlzVmlydHVhbENsaWNrKGUubmF0aXZlRXZlbnQpID8gJ3ZpcnR1YWwnIDogJ21vdXNlJztcblxuICAgICAgICBpZiAoIWlzRGlzYWJsZWQgJiYgIXByZXZlbnRGb2N1c09uUHJlc3MpIHtcbiAgICAgICAgICBmb2N1c1dpdGhvdXRTY3JvbGxpbmcoZS5jdXJyZW50VGFyZ2V0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyaWdnZXJQcmVzc1N0YXJ0KGUsIHN0YXRlLnBvaW50ZXJUeXBlKTtcblxuICAgICAgICBhZGRHbG9iYWxMaXN0ZW5lcihkb2N1bWVudCwgJ21vdXNldXAnLCBvbk1vdXNlVXAsIGZhbHNlKTtcbiAgICAgIH07XG5cbiAgICAgIHByZXNzUHJvcHMub25Nb3VzZUVudGVyID0gKGUpID0+IHtcbiAgICAgICAgaWYgKCFlLmN1cnJlbnRUYXJnZXQuY29udGFpbnMoZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgaWYgKHN0YXRlLmlzUHJlc3NlZCAmJiAhc3RhdGUuaWdub3JlRW11bGF0ZWRNb3VzZUV2ZW50cykge1xuICAgICAgICAgIHN0YXRlLmlzT3ZlclRhcmdldCA9IHRydWU7XG4gICAgICAgICAgdHJpZ2dlclByZXNzU3RhcnQoZSwgc3RhdGUucG9pbnRlclR5cGUpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBwcmVzc1Byb3BzLm9uTW91c2VMZWF2ZSA9IChlKSA9PiB7XG4gICAgICAgIGlmICghZS5jdXJyZW50VGFyZ2V0LmNvbnRhaW5zKGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50KSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIGlmIChzdGF0ZS5pc1ByZXNzZWQgJiYgIXN0YXRlLmlnbm9yZUVtdWxhdGVkTW91c2VFdmVudHMpIHtcbiAgICAgICAgICBzdGF0ZS5pc092ZXJUYXJnZXQgPSBmYWxzZTtcbiAgICAgICAgICB0cmlnZ2VyUHJlc3NFbmQoZSwgc3RhdGUucG9pbnRlclR5cGUsIGZhbHNlKTtcbiAgICAgICAgICBpZiAocHJvcHNSZWYuY3VycmVudC5zaG91bGRDYW5jZWxPblBvaW50ZXJFeGl0KSB7XG4gICAgICAgICAgICBjYW5jZWwoZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBwcmVzc1Byb3BzLm9uTW91c2VVcCA9IChlKSA9PiB7XG4gICAgICAgIGlmICghZS5jdXJyZW50VGFyZ2V0LmNvbnRhaW5zKGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50KSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghc3RhdGUuaWdub3JlRW11bGF0ZWRNb3VzZUV2ZW50cyAmJiBlLmJ1dHRvbiA9PT0gMCkge1xuICAgICAgICAgIHRyaWdnZXJQcmVzc1VwKGUsIHN0YXRlLnBvaW50ZXJUeXBlKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgbGV0IG9uTW91c2VVcCA9IChlOiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAgIC8vIE9ubHkgaGFuZGxlIGxlZnQgY2xpY2tzXG4gICAgICAgIGlmIChlLmJ1dHRvbiAhPT0gMCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHN0YXRlLmlzUHJlc3NlZCA9IGZhbHNlO1xuICAgICAgICByZW1vdmVBbGxHbG9iYWxMaXN0ZW5lcnMoKTtcblxuICAgICAgICBpZiAoc3RhdGUuaWdub3JlRW11bGF0ZWRNb3VzZUV2ZW50cykge1xuICAgICAgICAgIHN0YXRlLmlnbm9yZUVtdWxhdGVkTW91c2VFdmVudHMgPSBmYWxzZTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNPdmVyVGFyZ2V0KGUsIHN0YXRlLnRhcmdldCkpIHtcbiAgICAgICAgICB0cmlnZ2VyUHJlc3NFbmQoY3JlYXRlRXZlbnQoc3RhdGUudGFyZ2V0LCBlKSwgc3RhdGUucG9pbnRlclR5cGUpO1xuICAgICAgICB9IGVsc2UgaWYgKHN0YXRlLmlzT3ZlclRhcmdldCkge1xuICAgICAgICAgIHRyaWdnZXJQcmVzc0VuZChjcmVhdGVFdmVudChzdGF0ZS50YXJnZXQsIGUpLCBzdGF0ZS5wb2ludGVyVHlwZSwgZmFsc2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgc3RhdGUuaXNPdmVyVGFyZ2V0ID0gZmFsc2U7XG4gICAgICB9O1xuXG4gICAgICBwcmVzc1Byb3BzLm9uVG91Y2hTdGFydCA9IChlKSA9PiB7XG4gICAgICAgIGlmICghZS5jdXJyZW50VGFyZ2V0LmNvbnRhaW5zKGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50KSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIGxldCB0b3VjaCA9IGdldFRvdWNoRnJvbUV2ZW50KGUubmF0aXZlRXZlbnQpO1xuICAgICAgICBpZiAoIXRvdWNoKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRlLmFjdGl2ZVBvaW50ZXJJZCA9IHRvdWNoLmlkZW50aWZpZXI7XG4gICAgICAgIHN0YXRlLmlnbm9yZUVtdWxhdGVkTW91c2VFdmVudHMgPSB0cnVlO1xuICAgICAgICBzdGF0ZS5pc092ZXJUYXJnZXQgPSB0cnVlO1xuICAgICAgICBzdGF0ZS5pc1ByZXNzZWQgPSB0cnVlO1xuICAgICAgICBzdGF0ZS50YXJnZXQgPSBlLmN1cnJlbnRUYXJnZXQ7XG4gICAgICAgIHN0YXRlLnBvaW50ZXJUeXBlID0gJ3RvdWNoJztcblxuICAgICAgICAvLyBEdWUgdG8gYnJvd3NlciBpbmNvbnNpc3RlbmNpZXMsIGVzcGVjaWFsbHkgb24gbW9iaWxlIGJyb3dzZXJzLCB3ZSBwcmV2ZW50IGRlZmF1bHRcbiAgICAgICAgLy8gb24gdGhlIGVtdWxhdGVkIG1vdXNlIGV2ZW50IGFuZCBoYW5kbGUgZm9jdXNpbmcgdGhlIHByZXNzYWJsZSBlbGVtZW50IG91cnNlbHZlcy5cbiAgICAgICAgaWYgKCFpc0Rpc2FibGVkICYmICFwcmV2ZW50Rm9jdXNPblByZXNzKSB7XG4gICAgICAgICAgZm9jdXNXaXRob3V0U2Nyb2xsaW5nKGUuY3VycmVudFRhcmdldCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWFsbG93VGV4dFNlbGVjdGlvbk9uUHJlc3MpIHtcbiAgICAgICAgICBkaXNhYmxlVGV4dFNlbGVjdGlvbihzdGF0ZS50YXJnZXQpO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJpZ2dlclByZXNzU3RhcnQoZSwgc3RhdGUucG9pbnRlclR5cGUpO1xuXG4gICAgICAgIGFkZEdsb2JhbExpc3RlbmVyKHdpbmRvdywgJ3Njcm9sbCcsIG9uU2Nyb2xsLCB0cnVlKTtcbiAgICAgIH07XG5cbiAgICAgIHByZXNzUHJvcHMub25Ub3VjaE1vdmUgPSAoZSkgPT4ge1xuICAgICAgICBpZiAoIWUuY3VycmVudFRhcmdldC5jb250YWlucyhlLnRhcmdldCBhcyBIVE1MRWxlbWVudCkpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICBpZiAoIXN0YXRlLmlzUHJlc3NlZCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCB0b3VjaCA9IGdldFRvdWNoQnlJZChlLm5hdGl2ZUV2ZW50LCBzdGF0ZS5hY3RpdmVQb2ludGVySWQpO1xuICAgICAgICBpZiAodG91Y2ggJiYgaXNPdmVyVGFyZ2V0KHRvdWNoLCBlLmN1cnJlbnRUYXJnZXQpKSB7XG4gICAgICAgICAgaWYgKCFzdGF0ZS5pc092ZXJUYXJnZXQpIHtcbiAgICAgICAgICAgIHN0YXRlLmlzT3ZlclRhcmdldCA9IHRydWU7XG4gICAgICAgICAgICB0cmlnZ2VyUHJlc3NTdGFydChlLCBzdGF0ZS5wb2ludGVyVHlwZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHN0YXRlLmlzT3ZlclRhcmdldCkge1xuICAgICAgICAgIHN0YXRlLmlzT3ZlclRhcmdldCA9IGZhbHNlO1xuICAgICAgICAgIHRyaWdnZXJQcmVzc0VuZChlLCBzdGF0ZS5wb2ludGVyVHlwZSwgZmFsc2UpO1xuICAgICAgICAgIGlmIChwcm9wc1JlZi5jdXJyZW50LnNob3VsZENhbmNlbE9uUG9pbnRlckV4aXQpIHtcbiAgICAgICAgICAgIGNhbmNlbChlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHByZXNzUHJvcHMub25Ub3VjaEVuZCA9IChlKSA9PiB7XG4gICAgICAgIGlmICghZS5jdXJyZW50VGFyZ2V0LmNvbnRhaW5zKGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50KSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIGlmICghc3RhdGUuaXNQcmVzc2VkKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHRvdWNoID0gZ2V0VG91Y2hCeUlkKGUubmF0aXZlRXZlbnQsIHN0YXRlLmFjdGl2ZVBvaW50ZXJJZCk7XG4gICAgICAgIGlmICh0b3VjaCAmJiBpc092ZXJUYXJnZXQodG91Y2gsIGUuY3VycmVudFRhcmdldCkpIHtcbiAgICAgICAgICB0cmlnZ2VyUHJlc3NVcChlLCBzdGF0ZS5wb2ludGVyVHlwZSk7XG4gICAgICAgICAgdHJpZ2dlclByZXNzRW5kKGUsIHN0YXRlLnBvaW50ZXJUeXBlKTtcbiAgICAgICAgfSBlbHNlIGlmIChzdGF0ZS5pc092ZXJUYXJnZXQpIHtcbiAgICAgICAgICB0cmlnZ2VyUHJlc3NFbmQoZSwgc3RhdGUucG9pbnRlclR5cGUsIGZhbHNlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHN0YXRlLmlzUHJlc3NlZCA9IGZhbHNlO1xuICAgICAgICBzdGF0ZS5hY3RpdmVQb2ludGVySWQgPSBudWxsO1xuICAgICAgICBzdGF0ZS5pc092ZXJUYXJnZXQgPSBmYWxzZTtcbiAgICAgICAgc3RhdGUuaWdub3JlRW11bGF0ZWRNb3VzZUV2ZW50cyA9IHRydWU7XG4gICAgICAgIGlmICghYWxsb3dUZXh0U2VsZWN0aW9uT25QcmVzcykge1xuICAgICAgICAgIHJlc3RvcmVUZXh0U2VsZWN0aW9uKHN0YXRlLnRhcmdldCk7XG4gICAgICAgIH1cbiAgICAgICAgcmVtb3ZlQWxsR2xvYmFsTGlzdGVuZXJzKCk7XG4gICAgICB9O1xuXG4gICAgICBwcmVzc1Byb3BzLm9uVG91Y2hDYW5jZWwgPSAoZSkgPT4ge1xuICAgICAgICBpZiAoIWUuY3VycmVudFRhcmdldC5jb250YWlucyhlLnRhcmdldCBhcyBIVE1MRWxlbWVudCkpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICBpZiAoc3RhdGUuaXNQcmVzc2VkKSB7XG4gICAgICAgICAgY2FuY2VsKGUpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBsZXQgb25TY3JvbGwgPSAoZTogRXZlbnQpID0+IHtcbiAgICAgICAgaWYgKHN0YXRlLmlzUHJlc3NlZCAmJiAoZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQpLmNvbnRhaW5zKHN0YXRlLnRhcmdldCkpIHtcbiAgICAgICAgICBjYW5jZWwoe1xuICAgICAgICAgICAgY3VycmVudFRhcmdldDogc3RhdGUudGFyZ2V0LFxuICAgICAgICAgICAgc2hpZnRLZXk6IGZhbHNlLFxuICAgICAgICAgICAgY3RybEtleTogZmFsc2UsXG4gICAgICAgICAgICBtZXRhS2V5OiBmYWxzZSxcbiAgICAgICAgICAgIGFsdEtleTogZmFsc2VcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgcHJlc3NQcm9wcy5vbkRyYWdTdGFydCA9IChlKSA9PiB7XG4gICAgICAgIGlmICghZS5jdXJyZW50VGFyZ2V0LmNvbnRhaW5zKGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50KSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNhbmNlbChlKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIHByZXNzUHJvcHM7XG4gIH0sIFthZGRHbG9iYWxMaXN0ZW5lciwgaXNEaXNhYmxlZCwgcHJldmVudEZvY3VzT25QcmVzcywgcmVtb3ZlQWxsR2xvYmFsTGlzdGVuZXJzLCBhbGxvd1RleHRTZWxlY3Rpb25PblByZXNzXSk7XG5cbiAgLy8gUmVtb3ZlIHVzZXItc2VsZWN0OiBub25lIGluIGNhc2UgY29tcG9uZW50IHVubW91bnRzIGltbWVkaWF0ZWx5IGFmdGVyIHByZXNzU3RhcnRcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGFycm93LWJvZHktc3R5bGVcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKCFhbGxvd1RleHRTZWxlY3Rpb25PblByZXNzKSB7XG4gICAgICAgIHJlc3RvcmVUZXh0U2VsZWN0aW9uKHJlZi5jdXJyZW50LnRhcmdldCk7XG4gICAgICB9XG4gICAgfTtcbiAgfSwgW2FsbG93VGV4dFNlbGVjdGlvbk9uUHJlc3NdKTtcblxuICByZXR1cm4ge1xuICAgIGlzUHJlc3NlZDogaXNQcmVzc2VkUHJvcCB8fCBpc1ByZXNzZWQsXG4gICAgcHJlc3NQcm9wczogbWVyZ2VQcm9wcyhkb21Qcm9wcywgcHJlc3NQcm9wcylcbiAgfTtcbn1cblxuZnVuY3Rpb24gaXNIVE1MQW5jaG9yTGluayh0YXJnZXQ6IEhUTUxFbGVtZW50KTogYm9vbGVhbiB7XG4gIHJldHVybiB0YXJnZXQudGFnTmFtZSA9PT0gJ0EnICYmIHRhcmdldC5oYXNBdHRyaWJ1dGUoJ2hyZWYnKTtcbn1cblxuZnVuY3Rpb24gaXNWYWxpZEtleWJvYXJkRXZlbnQoZXZlbnQ6IEtleWJvYXJkRXZlbnQpOiBib29sZWFuIHtcbiAgY29uc3Qge2tleSwgY29kZSwgdGFyZ2V0fSA9IGV2ZW50O1xuICBjb25zdCBlbGVtZW50ID0gdGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xuICBjb25zdCB7dGFnTmFtZSwgaXNDb250ZW50RWRpdGFibGV9ID0gZWxlbWVudDtcbiAgY29uc3Qgcm9sZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdyb2xlJyk7XG4gIC8vIEFjY2Vzc2liaWxpdHkgZm9yIGtleWJvYXJkcy4gU3BhY2UgYW5kIEVudGVyIG9ubHkuXG4gIC8vIFwiU3BhY2ViYXJcIiBpcyBmb3IgSUUgMTFcbiAgcmV0dXJuIChcbiAgICAoa2V5ID09PSAnRW50ZXInIHx8IGtleSA9PT0gJyAnIHx8IGtleSA9PT0gJ1NwYWNlYmFyJyB8fCBjb2RlID09PSAnU3BhY2UnKSAmJlxuICAgICh0YWdOYW1lICE9PSAnSU5QVVQnICYmXG4gICAgICB0YWdOYW1lICE9PSAnVEVYVEFSRUEnICYmXG4gICAgICBpc0NvbnRlbnRFZGl0YWJsZSAhPT0gdHJ1ZSkgJiZcbiAgICAvLyBBIGxpbmsgd2l0aCBhIHZhbGlkIGhyZWYgc2hvdWxkIGJlIGhhbmRsZWQgbmF0aXZlbHksXG4gICAgLy8gdW5sZXNzIGl0IGFsc28gaGFzIHJvbGU9J2J1dHRvbicgYW5kIHdhcyB0cmlnZ2VyZWQgdXNpbmcgU3BhY2UuXG4gICAgKCFpc0hUTUxBbmNob3JMaW5rKGVsZW1lbnQpIHx8IChyb2xlID09PSAnYnV0dG9uJyAmJiBrZXkgIT09ICdFbnRlcicpKSAmJlxuICAgIC8vIEFuIGVsZW1lbnQgd2l0aCByb2xlPSdsaW5rJyBzaG91bGQgb25seSB0cmlnZ2VyIHdpdGggRW50ZXIga2V5XG4gICAgIShyb2xlID09PSAnbGluaycgJiYga2V5ICE9PSAnRW50ZXInKVxuICApO1xufVxuXG5mdW5jdGlvbiBnZXRUb3VjaEZyb21FdmVudChldmVudDogVG91Y2hFdmVudCk6IFRvdWNoIHwgbnVsbCB7XG4gIGNvbnN0IHt0YXJnZXRUb3VjaGVzfSA9IGV2ZW50O1xuICBpZiAodGFyZ2V0VG91Y2hlcy5sZW5ndGggPiAwKSB7XG4gICAgcmV0dXJuIHRhcmdldFRvdWNoZXNbMF07XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbmZ1bmN0aW9uIGdldFRvdWNoQnlJZChcbiAgZXZlbnQ6IFRvdWNoRXZlbnQsXG4gIHBvaW50ZXJJZDogbnVsbCB8IG51bWJlclxuKTogbnVsbCB8IFRvdWNoIHtcbiAgY29uc3QgY2hhbmdlZFRvdWNoZXMgPSBldmVudC5jaGFuZ2VkVG91Y2hlcztcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGFuZ2VkVG91Y2hlcy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHRvdWNoID0gY2hhbmdlZFRvdWNoZXNbaV07XG4gICAgaWYgKHRvdWNoLmlkZW50aWZpZXIgPT09IHBvaW50ZXJJZCkge1xuICAgICAgcmV0dXJuIHRvdWNoO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuZnVuY3Rpb24gY3JlYXRlRXZlbnQodGFyZ2V0OiBIVE1MRWxlbWVudCwgZTogRXZlbnRCYXNlKTogRXZlbnRCYXNlIHtcbiAgcmV0dXJuIHtcbiAgICBjdXJyZW50VGFyZ2V0OiB0YXJnZXQsXG4gICAgc2hpZnRLZXk6IGUuc2hpZnRLZXksXG4gICAgY3RybEtleTogZS5jdHJsS2V5LFxuICAgIG1ldGFLZXk6IGUubWV0YUtleSxcbiAgICBhbHRLZXk6IGUuYWx0S2V5XG4gIH07XG59XG5cbmludGVyZmFjZSBSZWN0IHtcbiAgdG9wOiBudW1iZXIsXG4gIHJpZ2h0OiBudW1iZXIsXG4gIGJvdHRvbTogbnVtYmVyLFxuICBsZWZ0OiBudW1iZXJcbn1cblxuaW50ZXJmYWNlIEV2ZW50UG9pbnQge1xuICBjbGllbnRYOiBudW1iZXIsXG4gIGNsaWVudFk6IG51bWJlcixcbiAgd2lkdGg/OiBudW1iZXIsXG4gIGhlaWdodD86IG51bWJlcixcbiAgcmFkaXVzWD86IG51bWJlcixcbiAgcmFkaXVzWT86IG51bWJlclxufVxuXG5mdW5jdGlvbiBnZXRQb2ludENsaWVudFJlY3QocG9pbnQ6IEV2ZW50UG9pbnQpOiBSZWN0IHtcbiAgbGV0IG9mZnNldFggPSAocG9pbnQud2lkdGggLyAyKSB8fCBwb2ludC5yYWRpdXNYIHx8IDA7XG4gIGxldCBvZmZzZXRZID0gKHBvaW50LmhlaWdodCAvIDIpIHx8IHBvaW50LnJhZGl1c1kgfHwgMDtcblxuICByZXR1cm4ge1xuICAgIHRvcDogcG9pbnQuY2xpZW50WSAtIG9mZnNldFksXG4gICAgcmlnaHQ6IHBvaW50LmNsaWVudFggKyBvZmZzZXRYLFxuICAgIGJvdHRvbTogcG9pbnQuY2xpZW50WSArIG9mZnNldFksXG4gICAgbGVmdDogcG9pbnQuY2xpZW50WCAtIG9mZnNldFhcbiAgfTtcbn1cblxuZnVuY3Rpb24gYXJlUmVjdGFuZ2xlc092ZXJsYXBwaW5nKGE6IFJlY3QsIGI6IFJlY3QpIHtcbiAgLy8gY2hlY2sgaWYgdGhleSBjYW5ub3Qgb3ZlcmxhcCBvbiB4IGF4aXNcbiAgaWYgKGEubGVmdCA+IGIucmlnaHQgfHwgYi5sZWZ0ID4gYS5yaWdodCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICAvLyBjaGVjayBpZiB0aGV5IGNhbm5vdCBvdmVybGFwIG9uIHkgYXhpc1xuICBpZiAoYS50b3AgPiBiLmJvdHRvbSB8fCBiLnRvcCA+IGEuYm90dG9tKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBpc092ZXJUYXJnZXQocG9pbnQ6IEV2ZW50UG9pbnQsIHRhcmdldDogSFRNTEVsZW1lbnQpIHtcbiAgbGV0IHJlY3QgPSB0YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIGxldCBwb2ludFJlY3QgPSBnZXRQb2ludENsaWVudFJlY3QocG9pbnQpO1xuICByZXR1cm4gYXJlUmVjdGFuZ2xlc092ZXJsYXBwaW5nKHJlY3QsIHBvaW50UmVjdCk7XG59XG5cbmZ1bmN0aW9uIHNob3VsZFByZXZlbnREZWZhdWx0KHRhcmdldDogSFRNTEVsZW1lbnQpIHtcbiAgLy8gV2UgY2Fubm90IHByZXZlbnQgZGVmYXVsdCBpZiB0aGUgdGFyZ2V0IGlzIGEgZHJhZ2dhYmxlIGVsZW1lbnQuXG4gIHJldHVybiAhdGFyZ2V0LmRyYWdnYWJsZTtcbn1cblxuZnVuY3Rpb24gc2hvdWxkUHJldmVudERlZmF1bHRLZXlib2FyZCh0YXJnZXQ6IEVsZW1lbnQpIHtcbiAgcmV0dXJuICEoKHRhcmdldC50YWdOYW1lID09PSAnSU5QVVQnIHx8IHRhcmdldC50YWdOYW1lID09PSAnQlVUVE9OJykgJiYgKHRhcmdldCBhcyBIVE1MQnV0dG9uRWxlbWVudCB8IEhUTUxJbnB1dEVsZW1lbnQpLnR5cGUgPT09ICdzdWJtaXQnKTtcbn1cblxuZnVuY3Rpb24gaXNWaXJ0dWFsUG9pbnRlckV2ZW50KGV2ZW50OiBQb2ludGVyRXZlbnQpIHtcbiAgLy8gSWYgdGhlIHBvaW50ZXIgc2l6ZSBpcyB6ZXJvLCB0aGVuIHdlIGFzc3VtZSBpdCdzIGZyb20gYSBzY3JlZW4gcmVhZGVyLlxuICAvLyBBbmRyb2lkIFRhbGtCYWNrIGRvdWJsZSB0YXAgd2lsbCBzb21ldGltZXMgcmV0dXJuIGEgZXZlbnQgd2l0aCB3aWR0aCBhbmQgaGVpZ2h0IG9mIDFcbiAgLy8gYW5kIHBvaW50ZXJUeXBlID09PSAnbW91c2UnIHNvIHdlIG5lZWQgdG8gY2hlY2sgZm9yIGEgc3BlY2lmaWMgY29tYmluYXRpb24gb2YgZXZlbnQgYXR0cmlidXRlcy5cbiAgLy8gQ2Fubm90IHVzZSBcImV2ZW50LnByZXNzdXJlID09PSAwXCIgYXMgdGhlIHNvbGUgY2hlY2sgZHVlIHRvIFNhZmFyaSBwb2ludGVyIGV2ZW50cyBhbHdheXMgcmV0dXJuaW5nIHByZXNzdXJlID09PSAwXG4gIC8vIGluc3RlYWQgb2YgLjUsIHNlZSBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MjA2MjE2LiBldmVudC5wb2ludGVyVHlwZSA9PT0gJ21vdXNlJyBpcyB0byBkaXN0aW5ndXNoXG4gIC8vIFRhbGtiYWNrIGRvdWJsZSB0YXAgZnJvbSBXaW5kb3dzIEZpcmVmb3ggdG91Y2ggc2NyZWVuIHByZXNzXG4gIHJldHVybiAoXG4gICAgKGV2ZW50LndpZHRoID09PSAwICYmIGV2ZW50LmhlaWdodCA9PT0gMCkgfHxcbiAgICAoZXZlbnQud2lkdGggPT09IDEgJiZcbiAgICAgIGV2ZW50LmhlaWdodCA9PT0gMSAmJlxuICAgICAgZXZlbnQucHJlc3N1cmUgPT09IDAgJiZcbiAgICAgIGV2ZW50LmRldGFpbCA9PT0gMCAmJlxuICAgICAgZXZlbnQucG9pbnRlclR5cGUgPT09ICdtb3VzZSdcbiAgICApXG4gICk7XG59XG4iLCIvKlxuICogQ29weXJpZ2h0IDIwMjAgQWRvYmUuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weVxuICogb2YgdGhlIExpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlclxuICogdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgUkVQUkVTRU5UQVRJT05TXG4gKiBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2VcbiAqIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHttZXJnZVByb3BzfSBmcm9tICdAcmVhY3QtYXJpYS91dGlscyc7XG5pbXBvcnQge1ByZXNzUHJvcHMsIHVzZVByZXNzfSBmcm9tICcuL3VzZVByZXNzJztcbmltcG9ydCBSZWFjdCwge0hUTUxBdHRyaWJ1dGVzLCBSZWFjdEVsZW1lbnQsIFJlZk9iamVjdCwgdXNlUmVmfSBmcm9tICdyZWFjdCc7XG5cbmludGVyZmFjZSBQcmVzc2FibGVQcm9wcyBleHRlbmRzIFByZXNzUHJvcHMge1xuICBjaGlsZHJlbjogUmVhY3RFbGVtZW50PEhUTUxBdHRyaWJ1dGVzPEhUTUxFbGVtZW50Piwgc3RyaW5nPlxufVxuXG5leHBvcnQgY29uc3QgUHJlc3NhYmxlID0gUmVhY3QuZm9yd2FyZFJlZigoe2NoaWxkcmVuLCAuLi5wcm9wc306IFByZXNzYWJsZVByb3BzLCByZWY6IFJlZk9iamVjdDxIVE1MRWxlbWVudD4pID0+IHtcbiAgbGV0IG5ld1JlZiA9IHVzZVJlZigpO1xuICByZWYgPSByZWYgPz8gbmV3UmVmO1xuICBsZXQge3ByZXNzUHJvcHN9ID0gdXNlUHJlc3Moey4uLnByb3BzLCByZWZ9KTtcbiAgbGV0IGNoaWxkID0gUmVhY3QuQ2hpbGRyZW4ub25seShjaGlsZHJlbik7XG4gIHJldHVybiBSZWFjdC5jbG9uZUVsZW1lbnQoXG4gICAgY2hpbGQsXG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIHtyZWYsIC4uLm1lcmdlUHJvcHMoY2hpbGQucHJvcHMsIHByZXNzUHJvcHMpfVxuICApO1xufSk7XG4iLCIvKlxuICogQ29weXJpZ2h0IDIwMjAgQWRvYmUuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weVxuICogb2YgdGhlIExpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlclxuICogdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgUkVQUkVTRU5UQVRJT05TXG4gKiBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2VcbiAqIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHttZXJnZVByb3BzLCB1c2VTeW5jUmVmfSBmcm9tICdAcmVhY3QtYXJpYS91dGlscyc7XG5pbXBvcnQge1ByZXNzUHJvcHN9IGZyb20gJy4vdXNlUHJlc3MnO1xuaW1wb3J0IHtQcmVzc1Jlc3BvbmRlckNvbnRleHR9IGZyb20gJy4vY29udGV4dCc7XG5pbXBvcnQgUmVhY3QsIHtSZWFjdE5vZGUsIFJlZk9iamVjdCwgdXNlQ29udGV4dCwgdXNlRWZmZWN0LCB1c2VSZWZ9IGZyb20gJ3JlYWN0JztcblxuaW50ZXJmYWNlIFByZXNzUmVzcG9uZGVyUHJvcHMgZXh0ZW5kcyBQcmVzc1Byb3BzIHtcbiAgY2hpbGRyZW46IFJlYWN0Tm9kZVxufVxuXG5leHBvcnQgY29uc3QgUHJlc3NSZXNwb25kZXIgPSBSZWFjdC5mb3J3YXJkUmVmKCh7Y2hpbGRyZW4sIC4uLnByb3BzfTogUHJlc3NSZXNwb25kZXJQcm9wcywgcmVmOiBSZWZPYmplY3Q8SFRNTEVsZW1lbnQ+KSA9PiB7XG4gIGxldCBpc1JlZ2lzdGVyZWQgPSB1c2VSZWYoZmFsc2UpO1xuICBsZXQgcHJldkNvbnRleHQgPSB1c2VDb250ZXh0KFByZXNzUmVzcG9uZGVyQ29udGV4dCk7XG4gIGxldCBjb250ZXh0ID0gbWVyZ2VQcm9wcyhwcmV2Q29udGV4dCB8fCB7fSwge1xuICAgIC4uLnByb3BzLFxuICAgIHJlZjogcmVmIHx8IHByZXZDb250ZXh0Py5yZWYsXG4gICAgcmVnaXN0ZXIoKSB7XG4gICAgICBpc1JlZ2lzdGVyZWQuY3VycmVudCA9IHRydWU7XG4gICAgICBpZiAocHJldkNvbnRleHQpIHtcbiAgICAgICAgcHJldkNvbnRleHQucmVnaXN0ZXIoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIHVzZVN5bmNSZWYocHJldkNvbnRleHQsIHJlZik7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWlzUmVnaXN0ZXJlZC5jdXJyZW50KSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICdBIFByZXNzUmVzcG9uZGVyIHdhcyByZW5kZXJlZCB3aXRob3V0IGEgcHJlc3NhYmxlIGNoaWxkLiAnICtcbiAgICAgICAgJ0VpdGhlciBjYWxsIHRoZSB1c2VQcmVzcyBob29rLCBvciB3cmFwIHlvdXIgRE9NIG5vZGUgd2l0aCA8UHJlc3NhYmxlPiBjb21wb25lbnQuJ1xuICAgICAgKTtcbiAgICB9XG4gIH0sIFtdKTtcblxuICByZXR1cm4gKFxuICAgIDxQcmVzc1Jlc3BvbmRlckNvbnRleHQuUHJvdmlkZXIgdmFsdWU9e2NvbnRleHR9PlxuICAgICAge2NoaWxkcmVufVxuICAgIDwvUHJlc3NSZXNwb25kZXJDb250ZXh0LlByb3ZpZGVyPlxuICApO1xufSk7XG4iLCIvKlxuICogQ29weXJpZ2h0IDIwMjAgQWRvYmUuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weVxuICogb2YgdGhlIExpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlclxuICogdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgUkVQUkVTRU5UQVRJT05TXG4gKiBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2VcbiAqIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLy8gUG9ydGlvbnMgb2YgdGhlIGNvZGUgaW4gdGhpcyBmaWxlIGFyZSBiYXNlZCBvbiBjb2RlIGZyb20gcmVhY3QuXG4vLyBPcmlnaW5hbCBsaWNlbnNpbmcgZm9yIHRoZSBmb2xsb3dpbmcgY2FuIGJlIGZvdW5kIGluIHRoZVxuLy8gTk9USUNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4vLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlYWN0L3RyZWUvY2M3YzFhZWNlNDZhNmI2OWI0MTk1OGQ3MzFlMGZkMjdjOTRiZmM2Yy9wYWNrYWdlcy9yZWFjdC1pbnRlcmFjdGlvbnNcblxuaW1wb3J0IHtGb2N1c0V2ZW50LCBIVE1MQXR0cmlidXRlcywgdXNlQ2FsbGJhY2t9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7Rm9jdXNFdmVudHN9IGZyb20gJ0ByZWFjdC10eXBlcy9zaGFyZWQnO1xuaW1wb3J0IHt1c2VTeW50aGV0aWNCbHVyRXZlbnR9IGZyb20gJy4vdXRpbHMnO1xuXG5pbnRlcmZhY2UgRm9jdXNQcm9wcyBleHRlbmRzIEZvY3VzRXZlbnRzIHtcbiAgLyoqIFdoZXRoZXIgdGhlIGZvY3VzIGV2ZW50cyBzaG91bGQgYmUgZGlzYWJsZWQuICovXG4gIGlzRGlzYWJsZWQ/OiBib29sZWFuXG59XG5cbmludGVyZmFjZSBGb2N1c1Jlc3VsdCB7XG4gIC8qKiBQcm9wcyB0byBzcHJlYWQgb250byB0aGUgdGFyZ2V0IGVsZW1lbnQuICovXG4gIGZvY3VzUHJvcHM6IEhUTUxBdHRyaWJ1dGVzPEhUTUxFbGVtZW50PlxufVxuXG4vKipcbiAqIEhhbmRsZXMgZm9jdXMgZXZlbnRzIGZvciB0aGUgaW1tZWRpYXRlIHRhcmdldC5cbiAqIEZvY3VzIGV2ZW50cyBvbiBjaGlsZCBlbGVtZW50cyB3aWxsIGJlIGlnbm9yZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VGb2N1cyhwcm9wczogRm9jdXNQcm9wcyk6IEZvY3VzUmVzdWx0IHtcbiAgbGV0IHtcbiAgICBpc0Rpc2FibGVkLFxuICAgIG9uRm9jdXM6IG9uRm9jdXNQcm9wLFxuICAgIG9uQmx1cjogb25CbHVyUHJvcCxcbiAgICBvbkZvY3VzQ2hhbmdlXG4gIH0gPSBwcm9wcztcblxuICBjb25zdCBvbkJsdXI6IEZvY3VzUHJvcHNbJ29uQmx1ciddID0gdXNlQ2FsbGJhY2soKGU6IEZvY3VzRXZlbnQpID0+IHtcbiAgICBpZiAoZS50YXJnZXQgPT09IGUuY3VycmVudFRhcmdldCkge1xuICAgICAgaWYgKG9uQmx1clByb3ApIHtcbiAgICAgICAgb25CbHVyUHJvcChlKTtcbiAgICAgIH1cblxuICAgICAgaWYgKG9uRm9jdXNDaGFuZ2UpIHtcbiAgICAgICAgb25Gb2N1c0NoYW5nZShmYWxzZSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSwgW29uQmx1clByb3AsIG9uRm9jdXNDaGFuZ2VdKTtcblxuXG4gIGNvbnN0IG9uU3ludGhldGljRm9jdXMgPSB1c2VTeW50aGV0aWNCbHVyRXZlbnQob25CbHVyKTtcblxuICBjb25zdCBvbkZvY3VzOiBGb2N1c1Byb3BzWydvbkZvY3VzJ10gPSB1c2VDYWxsYmFjaygoZTogRm9jdXNFdmVudCkgPT4ge1xuICAgIGlmIChlLnRhcmdldCA9PT0gZS5jdXJyZW50VGFyZ2V0KSB7XG4gICAgICBpZiAob25Gb2N1c1Byb3ApIHtcbiAgICAgICAgb25Gb2N1c1Byb3AoZSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChvbkZvY3VzQ2hhbmdlKSB7XG4gICAgICAgIG9uRm9jdXNDaGFuZ2UodHJ1ZSk7XG4gICAgICB9XG5cbiAgICAgIG9uU3ludGhldGljRm9jdXMoZSk7XG4gICAgfVxuICB9LCBbb25Gb2N1c0NoYW5nZSwgb25Gb2N1c1Byb3AsIG9uU3ludGhldGljRm9jdXNdKTtcblxuICByZXR1cm4ge1xuICAgIGZvY3VzUHJvcHM6IHtcbiAgICAgIG9uRm9jdXM6ICghaXNEaXNhYmxlZCAmJiAob25Gb2N1c1Byb3AgfHwgb25Gb2N1c0NoYW5nZSB8fCBvbkJsdXJQcm9wKSkgPyBvbkZvY3VzIDogdW5kZWZpbmVkLFxuICAgICAgb25CbHVyOiAoIWlzRGlzYWJsZWQgJiYgKG9uQmx1clByb3AgfHwgb25Gb2N1c0NoYW5nZSkpID8gb25CbHVyIDogbnVsbFxuICAgIH1cbiAgfTtcbn1cbiIsIi8qXG4gKiBDb3B5cmlnaHQgMjAyMCBBZG9iZS4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5XG4gKiBvZiB0aGUgTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyXG4gKiB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBSRVBSRVNFTlRBVElPTlNcbiAqIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZVxuICogZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vLyBQb3J0aW9ucyBvZiB0aGUgY29kZSBpbiB0aGlzIGZpbGUgYXJlIGJhc2VkIG9uIGNvZGUgZnJvbSByZWFjdC5cbi8vIE9yaWdpbmFsIGxpY2Vuc2luZyBmb3IgdGhlIGZvbGxvd2luZyBjYW4gYmUgZm91bmQgaW4gdGhlXG4vLyBOT1RJQ0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbi8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QvdHJlZS9jYzdjMWFlY2U0NmE2YjY5YjQxOTU4ZDczMWUwZmQyN2M5NGJmYzZjL3BhY2thZ2VzL3JlYWN0LWludGVyYWN0aW9uc1xuXG5pbXBvcnQge2lzTWFjfSBmcm9tICdAcmVhY3QtYXJpYS91dGlscyc7XG5pbXBvcnQge2lzVmlydHVhbENsaWNrfSBmcm9tICcuL3V0aWxzJztcbmltcG9ydCB7dXNlRWZmZWN0LCB1c2VTdGF0ZX0gZnJvbSAncmVhY3QnO1xuXG50eXBlIE1vZGFsaXR5ID0gJ2tleWJvYXJkJyB8ICdwb2ludGVyJyB8ICd2aXJ0dWFsJztcbnR5cGUgSGFuZGxlckV2ZW50ID0gUG9pbnRlckV2ZW50IHwgTW91c2VFdmVudCB8IEtleWJvYXJkRXZlbnQgfCBGb2N1c0V2ZW50O1xudHlwZSBIYW5kbGVyID0gKG1vZGFsaXR5OiBNb2RhbGl0eSwgZTogSGFuZGxlckV2ZW50KSA9PiB2b2lkO1xudHlwZSBGb2N1c1Zpc2libGVIYW5kbGVyID0gKGlzRm9jdXNWaXNpYmxlOiBib29sZWFuKSA9PiB2b2lkO1xuaW50ZXJmYWNlIEZvY3VzVmlzaWJsZVByb3BzIHtcbiAgLyoqIFdoZXRoZXIgdGhlIGVsZW1lbnQgaXMgYSB0ZXh0IGlucHV0LiAqL1xuICBpc1RleHRJbnB1dD86IGJvb2xlYW4sXG4gIC8qKiBXaGV0aGVyIHRoZSBlbGVtZW50IHdpbGwgYmUgYXV0byBmb2N1c2VkLiAqL1xuICBhdXRvRm9jdXM/OiBib29sZWFuXG59XG5cbmludGVyZmFjZSBGb2N1c1Zpc2libGVSZXN1bHQge1xuICAvKiogV2hldGhlciBrZXlib2FyZCBmb2N1cyBpcyB2aXNpYmxlIGdsb2JhbGx5LiAqL1xuICBpc0ZvY3VzVmlzaWJsZTogYm9vbGVhblxufVxuXG5sZXQgY3VycmVudE1vZGFsaXR5ID0gbnVsbDtcbmxldCBjaGFuZ2VIYW5kbGVycyA9IG5ldyBTZXQ8SGFuZGxlcj4oKTtcbmxldCBoYXNTZXR1cEdsb2JhbExpc3RlbmVycyA9IGZhbHNlO1xubGV0IGhhc0V2ZW50QmVmb3JlRm9jdXMgPSBmYWxzZTtcbmxldCBoYXNCbHVycmVkV2luZG93UmVjZW50bHkgPSBmYWxzZTtcblxuLy8gT25seSBUYWIgb3IgRXNjIGtleXMgd2lsbCBtYWtlIGZvY3VzIHZpc2libGUgb24gdGV4dCBpbnB1dCBlbGVtZW50c1xuY29uc3QgRk9DVVNfVklTSUJMRV9JTlBVVF9LRVlTID0ge1xuICBUYWI6IHRydWUsXG4gIEVzY2FwZTogdHJ1ZVxufTtcblxuZnVuY3Rpb24gdHJpZ2dlckNoYW5nZUhhbmRsZXJzKG1vZGFsaXR5OiBNb2RhbGl0eSwgZTogSGFuZGxlckV2ZW50KSB7XG4gIGZvciAobGV0IGhhbmRsZXIgb2YgY2hhbmdlSGFuZGxlcnMpIHtcbiAgICBoYW5kbGVyKG1vZGFsaXR5LCBlKTtcbiAgfVxufVxuXG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0byBkZXRlcm1pbmUgaWYgYSBLZXlib2FyZEV2ZW50IGlzIHVubW9kaWZpZWQgYW5kIGNvdWxkIG1ha2Uga2V5Ym9hcmQgZm9jdXMgc3R5bGVzIHZpc2libGUuXG4gKi9cbmZ1bmN0aW9uIGlzVmFsaWRLZXkoZTogS2V5Ym9hcmRFdmVudCkge1xuICAvLyBDb250cm9sIGFuZCBTaGlmdCBrZXlzIHRyaWdnZXIgd2hlbiBuYXZpZ2F0aW5nIGJhY2sgdG8gdGhlIHRhYiB3aXRoIGtleWJvYXJkLlxuICByZXR1cm4gIShlLm1ldGFLZXkgfHwgKCFpc01hYygpICYmIGUuYWx0S2V5KSB8fCBlLmN0cmxLZXkgfHwgZS5rZXkgPT09ICdDb250cm9sJyB8fCBlLmtleSA9PT0gJ1NoaWZ0JyB8fCBlLmtleSA9PT0gJ01ldGEnKTtcbn1cblxuXG5mdW5jdGlvbiBoYW5kbGVLZXlib2FyZEV2ZW50KGU6IEtleWJvYXJkRXZlbnQpIHtcbiAgaGFzRXZlbnRCZWZvcmVGb2N1cyA9IHRydWU7XG4gIGlmIChpc1ZhbGlkS2V5KGUpKSB7XG4gICAgY3VycmVudE1vZGFsaXR5ID0gJ2tleWJvYXJkJztcbiAgICB0cmlnZ2VyQ2hhbmdlSGFuZGxlcnMoJ2tleWJvYXJkJywgZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaGFuZGxlUG9pbnRlckV2ZW50KGU6IFBvaW50ZXJFdmVudCB8IE1vdXNlRXZlbnQpIHtcbiAgY3VycmVudE1vZGFsaXR5ID0gJ3BvaW50ZXInO1xuICBpZiAoZS50eXBlID09PSAnbW91c2Vkb3duJyB8fCBlLnR5cGUgPT09ICdwb2ludGVyZG93bicpIHtcbiAgICBoYXNFdmVudEJlZm9yZUZvY3VzID0gdHJ1ZTtcbiAgICB0cmlnZ2VyQ2hhbmdlSGFuZGxlcnMoJ3BvaW50ZXInLCBlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBoYW5kbGVDbGlja0V2ZW50KGU6IE1vdXNlRXZlbnQpIHtcbiAgaWYgKGlzVmlydHVhbENsaWNrKGUpKSB7XG4gICAgaGFzRXZlbnRCZWZvcmVGb2N1cyA9IHRydWU7XG4gICAgY3VycmVudE1vZGFsaXR5ID0gJ3ZpcnR1YWwnO1xuICB9XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUZvY3VzRXZlbnQoZTogRm9jdXNFdmVudCkge1xuICAvLyBGaXJlZm94IGZpcmVzIHR3byBleHRyYSBmb2N1cyBldmVudHMgd2hlbiB0aGUgdXNlciBmaXJzdCBjbGlja3MgaW50byBhbiBpZnJhbWU6XG4gIC8vIGZpcnN0IG9uIHRoZSB3aW5kb3csIHRoZW4gb24gdGhlIGRvY3VtZW50LiBXZSBpZ25vcmUgdGhlc2UgZXZlbnRzIHNvIHRoZXkgZG9uJ3RcbiAgLy8gY2F1c2Uga2V5Ym9hcmQgZm9jdXMgcmluZ3MgdG8gYXBwZWFyLlxuICBpZiAoZS50YXJnZXQgPT09IHdpbmRvdyB8fCBlLnRhcmdldCA9PT0gZG9jdW1lbnQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBJZiBhIGZvY3VzIGV2ZW50IG9jY3VycyB3aXRob3V0IGEgcHJlY2VkaW5nIGtleWJvYXJkIG9yIHBvaW50ZXIgZXZlbnQsIHN3aXRjaCB0byB2aXJ0dWFsIG1vZGFsaXR5LlxuICAvLyBUaGlzIG9jY3VycywgZm9yIGV4YW1wbGUsIHdoZW4gbmF2aWdhdGluZyBhIGZvcm0gd2l0aCB0aGUgbmV4dC9wcmV2aW91cyBidXR0b25zIG9uIGlPUy5cbiAgaWYgKCFoYXNFdmVudEJlZm9yZUZvY3VzICYmICFoYXNCbHVycmVkV2luZG93UmVjZW50bHkpIHtcbiAgICBjdXJyZW50TW9kYWxpdHkgPSAndmlydHVhbCc7XG4gICAgdHJpZ2dlckNoYW5nZUhhbmRsZXJzKCd2aXJ0dWFsJywgZSk7XG4gIH1cblxuICBoYXNFdmVudEJlZm9yZUZvY3VzID0gZmFsc2U7XG4gIGhhc0JsdXJyZWRXaW5kb3dSZWNlbnRseSA9IGZhbHNlO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVXaW5kb3dCbHVyKCkge1xuICAvLyBXaGVuIHRoZSB3aW5kb3cgaXMgYmx1cnJlZCwgcmVzZXQgc3RhdGUuIFRoaXMgaXMgbmVjZXNzYXJ5IHdoZW4gdGFiYmluZyBvdXQgb2YgdGhlIHdpbmRvdyxcbiAgLy8gZm9yIGV4YW1wbGUsIHNpbmNlIGEgc3Vic2VxdWVudCBmb2N1cyBldmVudCB3b24ndCBiZSBmaXJlZC5cbiAgaGFzRXZlbnRCZWZvcmVGb2N1cyA9IGZhbHNlO1xuICBoYXNCbHVycmVkV2luZG93UmVjZW50bHkgPSB0cnVlO1xufVxuXG4vKipcbiAqIFNldHVwIGdsb2JhbCBldmVudCBsaXN0ZW5lcnMgdG8gY29udHJvbCB3aGVuIGtleWJvYXJkIGZvY3VzIHN0eWxlIHNob3VsZCBiZSB2aXNpYmxlLlxuICovXG5mdW5jdGlvbiBzZXR1cEdsb2JhbEZvY3VzRXZlbnRzKCkge1xuICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcgfHwgaGFzU2V0dXBHbG9iYWxMaXN0ZW5lcnMpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBQcm9ncmFtbWF0aWMgZm9jdXMoKSBjYWxscyBzaG91bGRuJ3QgYWZmZWN0IHRoZSBjdXJyZW50IGlucHV0IG1vZGFsaXR5LlxuICAvLyBIb3dldmVyLCB3ZSBuZWVkIHRvIGRldGVjdCBvdGhlciBjYXNlcyB3aGVuIGEgZm9jdXMgZXZlbnQgb2NjdXJzIHdpdGhvdXRcbiAgLy8gYSBwcmVjZWRpbmcgdXNlciBldmVudCAoZS5nLiBzY3JlZW4gcmVhZGVyIGZvY3VzKS4gT3ZlcnJpZGluZyB0aGUgZm9jdXNcbiAgLy8gbWV0aG9kIG9uIEhUTUxFbGVtZW50LnByb3RvdHlwZSBpcyBhIGJpdCBoYWNreSwgYnV0IHdvcmtzLlxuICBsZXQgZm9jdXMgPSBIVE1MRWxlbWVudC5wcm90b3R5cGUuZm9jdXM7XG4gIEhUTUxFbGVtZW50LnByb3RvdHlwZS5mb2N1cyA9IGZ1bmN0aW9uICgpIHtcbiAgICBoYXNFdmVudEJlZm9yZUZvY3VzID0gdHJ1ZTtcbiAgICBmb2N1cy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9O1xuXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVLZXlib2FyZEV2ZW50LCB0cnVlKTtcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBoYW5kbGVLZXlib2FyZEV2ZW50LCB0cnVlKTtcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVDbGlja0V2ZW50LCB0cnVlKTtcblxuICAvLyBSZWdpc3RlciBmb2N1cyBldmVudHMgb24gdGhlIHdpbmRvdyBzbyB0aGV5IGFyZSBzdXJlIHRvIGhhcHBlblxuICAvLyBiZWZvcmUgUmVhY3QncyBldmVudCBsaXN0ZW5lcnMgKHJlZ2lzdGVyZWQgb24gdGhlIGRvY3VtZW50KS5cbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgaGFuZGxlRm9jdXNFdmVudCwgdHJ1ZSk7XG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgaGFuZGxlV2luZG93Qmx1ciwgZmFsc2UpO1xuXG4gIGlmICh0eXBlb2YgUG9pbnRlckV2ZW50ICE9PSAndW5kZWZpbmVkJykge1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJkb3duJywgaGFuZGxlUG9pbnRlckV2ZW50LCB0cnVlKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVybW92ZScsIGhhbmRsZVBvaW50ZXJFdmVudCwgdHJ1ZSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcnVwJywgaGFuZGxlUG9pbnRlckV2ZW50LCB0cnVlKTtcbiAgfSBlbHNlIHtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBoYW5kbGVQb2ludGVyRXZlbnQsIHRydWUpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGhhbmRsZVBvaW50ZXJFdmVudCwgdHJ1ZSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGhhbmRsZVBvaW50ZXJFdmVudCwgdHJ1ZSk7XG4gIH1cblxuICBoYXNTZXR1cEdsb2JhbExpc3RlbmVycyA9IHRydWU7XG59XG5cbmlmICh0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnKSB7XG4gIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlICE9PSAnbG9hZGluZycpIHtcbiAgICBzZXR1cEdsb2JhbEZvY3VzRXZlbnRzKCk7XG4gIH0gZWxzZSB7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIHNldHVwR2xvYmFsRm9jdXNFdmVudHMpO1xuICB9XG59XG5cbi8qKlxuICogSWYgdHJ1ZSwga2V5Ym9hcmQgZm9jdXMgaXMgdmlzaWJsZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRm9jdXNWaXNpYmxlKCk6IGJvb2xlYW4ge1xuICByZXR1cm4gY3VycmVudE1vZGFsaXR5ICE9PSAncG9pbnRlcic7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRJbnRlcmFjdGlvbk1vZGFsaXR5KCk6IE1vZGFsaXR5IHtcbiAgcmV0dXJuIGN1cnJlbnRNb2RhbGl0eTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldEludGVyYWN0aW9uTW9kYWxpdHkobW9kYWxpdHk6IE1vZGFsaXR5KSB7XG4gIGN1cnJlbnRNb2RhbGl0eSA9IG1vZGFsaXR5O1xuICB0cmlnZ2VyQ2hhbmdlSGFuZGxlcnMobW9kYWxpdHksIG51bGwpO1xufVxuXG4vKipcbiAqIEtlZXBzIHN0YXRlIG9mIHRoZSBjdXJyZW50IG1vZGFsaXR5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlSW50ZXJhY3Rpb25Nb2RhbGl0eSgpOiBNb2RhbGl0eSB7XG4gIHNldHVwR2xvYmFsRm9jdXNFdmVudHMoKTtcblxuICBsZXQgW21vZGFsaXR5LCBzZXRNb2RhbGl0eV0gPSB1c2VTdGF0ZShjdXJyZW50TW9kYWxpdHkpO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGxldCBoYW5kbGVyID0gKCkgPT4ge1xuICAgICAgc2V0TW9kYWxpdHkoY3VycmVudE1vZGFsaXR5KTtcbiAgICB9O1xuXG4gICAgY2hhbmdlSGFuZGxlcnMuYWRkKGhhbmRsZXIpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjaGFuZ2VIYW5kbGVycy5kZWxldGUoaGFuZGxlcik7XG4gICAgfTtcbiAgfSwgW10pO1xuXG4gIHJldHVybiBtb2RhbGl0eTtcbn1cblxuLyoqXG4gKiBJZiB0aGlzIGlzIGF0dGFjaGVkIHRvIHRleHQgaW5wdXQgY29tcG9uZW50LCByZXR1cm4gaWYgdGhlIGV2ZW50IGlzIGEgZm9jdXMgZXZlbnQgKFRhYi9Fc2NhcGUga2V5cyBwcmVzc2VkKSBzbyB0aGF0XG4gKiBmb2N1cyB2aXNpYmxlIHN0eWxlIGNhbiBiZSBwcm9wZXJseSBzZXQuXG4gKi9cbmZ1bmN0aW9uIGlzS2V5Ym9hcmRGb2N1c0V2ZW50KGlzVGV4dElucHV0OiBib29sZWFuLCBtb2RhbGl0eTogTW9kYWxpdHksIGU6IEhhbmRsZXJFdmVudCkge1xuICByZXR1cm4gIShpc1RleHRJbnB1dCAmJiBtb2RhbGl0eSA9PT0gJ2tleWJvYXJkJyAmJiBlIGluc3RhbmNlb2YgS2V5Ym9hcmRFdmVudCAmJiAhRk9DVVNfVklTSUJMRV9JTlBVVF9LRVlTW2Uua2V5XSk7XG59XG5cbi8qKlxuICogTWFuYWdlcyBmb2N1cyB2aXNpYmxlIHN0YXRlIGZvciB0aGUgcGFnZSwgYW5kIHN1YnNjcmliZXMgaW5kaXZpZHVhbCBjb21wb25lbnRzIGZvciB1cGRhdGVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlRm9jdXNWaXNpYmxlKHByb3BzOiBGb2N1c1Zpc2libGVQcm9wcyA9IHt9KTogRm9jdXNWaXNpYmxlUmVzdWx0IHtcbiAgbGV0IHtpc1RleHRJbnB1dCwgYXV0b0ZvY3VzfSA9IHByb3BzO1xuICBsZXQgW2lzRm9jdXNWaXNpYmxlU3RhdGUsIHNldEZvY3VzVmlzaWJsZV0gPSB1c2VTdGF0ZShhdXRvRm9jdXMgfHwgaXNGb2N1c1Zpc2libGUoKSk7XG4gIHVzZUZvY3VzVmlzaWJsZUxpc3RlbmVyKChpc0ZvY3VzVmlzaWJsZSkgPT4ge1xuICAgIHNldEZvY3VzVmlzaWJsZShpc0ZvY3VzVmlzaWJsZSk7XG4gIH0sIFtpc1RleHRJbnB1dF0sIHtpc1RleHRJbnB1dH0pO1xuXG4gIHJldHVybiB7aXNGb2N1c1Zpc2libGU6IGlzRm9jdXNWaXNpYmxlU3RhdGV9O1xufVxuXG4vKipcbiAqIExpc3RlbnMgZm9yIHRyaWdnZXIgY2hhbmdlIGFuZCByZXBvcnRzIGlmIGZvY3VzIGlzIHZpc2libGUgKGkuZS4sIG1vZGFsaXR5IGlzIG5vdCBwb2ludGVyKS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZUZvY3VzVmlzaWJsZUxpc3RlbmVyKGZuOiBGb2N1c1Zpc2libGVIYW5kbGVyLCBkZXBzOiBSZWFkb25seUFycmF5PGFueT4sIG9wdHM/OiB7aXNUZXh0SW5wdXQ/OiBib29sZWFufSk6IHZvaWQge1xuICBzZXR1cEdsb2JhbEZvY3VzRXZlbnRzKCk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBsZXQgaGFuZGxlciA9IChtb2RhbGl0eTogTW9kYWxpdHksIGU6IEhhbmRsZXJFdmVudCkgPT4ge1xuICAgICAgaWYgKCFpc0tleWJvYXJkRm9jdXNFdmVudChvcHRzPy5pc1RleHRJbnB1dCwgbW9kYWxpdHksIGUpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGZuKGlzRm9jdXNWaXNpYmxlKCkpO1xuICAgIH07XG4gICAgY2hhbmdlSGFuZGxlcnMuYWRkKGhhbmRsZXIpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjaGFuZ2VIYW5kbGVycy5kZWxldGUoaGFuZGxlcik7XG4gICAgfTtcbiAgfSwgZGVwcyk7XG59XG4iLCIvKlxuICogQ29weXJpZ2h0IDIwMjAgQWRvYmUuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weVxuICogb2YgdGhlIExpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlclxuICogdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgUkVQUkVTRU5UQVRJT05TXG4gKiBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2VcbiAqIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLy8gUG9ydGlvbnMgb2YgdGhlIGNvZGUgaW4gdGhpcyBmaWxlIGFyZSBiYXNlZCBvbiBjb2RlIGZyb20gcmVhY3QuXG4vLyBPcmlnaW5hbCBsaWNlbnNpbmcgZm9yIHRoZSBmb2xsb3dpbmcgY2FuIGJlIGZvdW5kIGluIHRoZVxuLy8gTk9USUNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4vLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlYWN0L3RyZWUvY2M3YzFhZWNlNDZhNmI2OWI0MTk1OGQ3MzFlMGZkMjdjOTRiZmM2Yy9wYWNrYWdlcy9yZWFjdC1pbnRlcmFjdGlvbnNcblxuaW1wb3J0IHtGb2N1c0V2ZW50LCBIVE1MQXR0cmlidXRlcywgdXNlQ2FsbGJhY2ssIHVzZVJlZn0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHt1c2VTeW50aGV0aWNCbHVyRXZlbnR9IGZyb20gJy4vdXRpbHMnO1xuXG5pbnRlcmZhY2UgRm9jdXNXaXRoaW5Qcm9wcyB7XG4gIC8qKiBXaGV0aGVyIHRoZSBmb2N1cyB3aXRoaW4gZXZlbnRzIHNob3VsZCBiZSBkaXNhYmxlZC4gKi9cbiAgaXNEaXNhYmxlZD86IGJvb2xlYW4sXG4gIC8qKiBIYW5kbGVyIHRoYXQgaXMgY2FsbGVkIHdoZW4gdGhlIHRhcmdldCBlbGVtZW50IG9yIGEgZGVzY2VuZGFudCByZWNlaXZlcyBmb2N1cy4gKi9cbiAgb25Gb2N1c1dpdGhpbj86IChlOiBGb2N1c0V2ZW50KSA9PiB2b2lkLFxuICAvKiogSGFuZGxlciB0aGF0IGlzIGNhbGxlZCB3aGVuIHRoZSB0YXJnZXQgZWxlbWVudCBhbmQgYWxsIGRlc2NlbmRhbnRzIGxvc2UgZm9jdXMuICovXG4gIG9uQmx1cldpdGhpbj86IChlOiBGb2N1c0V2ZW50KSA9PiB2b2lkLFxuICAvKiogSGFuZGxlciB0aGF0IGlzIGNhbGxlZCB3aGVuIHRoZSB0aGUgZm9jdXMgd2l0aGluIHN0YXRlIGNoYW5nZXMuICovXG4gIG9uRm9jdXNXaXRoaW5DaGFuZ2U/OiAoaXNGb2N1c1dpdGhpbjogYm9vbGVhbikgPT4gdm9pZFxufVxuXG5pbnRlcmZhY2UgRm9jdXNXaXRoaW5SZXN1bHQge1xuICAvKiogUHJvcHMgdG8gc3ByZWFkIG9udG8gdGhlIHRhcmdldCBlbGVtZW50LiAqL1xuICBmb2N1c1dpdGhpblByb3BzOiBIVE1MQXR0cmlidXRlczxIVE1MRWxlbWVudD5cbn1cblxuLyoqXG4gKiBIYW5kbGVzIGZvY3VzIGV2ZW50cyBmb3IgdGhlIHRhcmdldCBhbmQgaXRzIGRlc2NlbmRhbnRzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlRm9jdXNXaXRoaW4ocHJvcHM6IEZvY3VzV2l0aGluUHJvcHMpOiBGb2N1c1dpdGhpblJlc3VsdCB7XG4gIGxldCB7XG4gICAgaXNEaXNhYmxlZCxcbiAgICBvbkJsdXJXaXRoaW4sXG4gICAgb25Gb2N1c1dpdGhpbixcbiAgICBvbkZvY3VzV2l0aGluQ2hhbmdlXG4gIH0gPSBwcm9wcztcbiAgbGV0IHN0YXRlID0gdXNlUmVmKHtcbiAgICBpc0ZvY3VzV2l0aGluOiBmYWxzZVxuICB9KTtcblxuICBsZXQgb25CbHVyID0gdXNlQ2FsbGJhY2soKGU6IEZvY3VzRXZlbnQpID0+IHtcbiAgICAvLyBXZSBkb24ndCB3YW50IHRvIHRyaWdnZXIgb25CbHVyV2l0aGluIGFuZCB0aGVuIGltbWVkaWF0ZWx5IG9uRm9jdXNXaXRoaW4gYWdhaW5cbiAgICAvLyB3aGVuIG1vdmluZyBmb2N1cyBpbnNpZGUgdGhlIGVsZW1lbnQuIE9ubHkgdHJpZ2dlciBpZiB0aGUgY3VycmVudFRhcmdldCBkb2Vzbid0XG4gICAgLy8gaW5jbHVkZSB0aGUgcmVsYXRlZFRhcmdldCAod2hlcmUgZm9jdXMgaXMgbW92aW5nKS5cbiAgICBpZiAoc3RhdGUuY3VycmVudC5pc0ZvY3VzV2l0aGluICYmICEoZS5jdXJyZW50VGFyZ2V0IGFzIEVsZW1lbnQpLmNvbnRhaW5zKGUucmVsYXRlZFRhcmdldCBhcyBFbGVtZW50KSkge1xuICAgICAgc3RhdGUuY3VycmVudC5pc0ZvY3VzV2l0aGluID0gZmFsc2U7XG5cbiAgICAgIGlmIChvbkJsdXJXaXRoaW4pIHtcbiAgICAgICAgb25CbHVyV2l0aGluKGUpO1xuICAgICAgfVxuXG4gICAgICBpZiAob25Gb2N1c1dpdGhpbkNoYW5nZSkge1xuICAgICAgICBvbkZvY3VzV2l0aGluQ2hhbmdlKGZhbHNlKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtvbkJsdXJXaXRoaW4sIG9uRm9jdXNXaXRoaW5DaGFuZ2UsIHN0YXRlXSk7XG5cbiAgbGV0IG9uU3ludGhldGljRm9jdXMgPSB1c2VTeW50aGV0aWNCbHVyRXZlbnQob25CbHVyKTtcbiAgbGV0IG9uRm9jdXMgPSB1c2VDYWxsYmFjaygoZTogRm9jdXNFdmVudCkgPT4ge1xuICAgIGlmICghc3RhdGUuY3VycmVudC5pc0ZvY3VzV2l0aGluKSB7XG4gICAgICBpZiAob25Gb2N1c1dpdGhpbikge1xuICAgICAgICBvbkZvY3VzV2l0aGluKGUpO1xuICAgICAgfVxuXG4gICAgICBpZiAob25Gb2N1c1dpdGhpbkNoYW5nZSkge1xuICAgICAgICBvbkZvY3VzV2l0aGluQ2hhbmdlKHRydWUpO1xuICAgICAgfVxuXG4gICAgICBzdGF0ZS5jdXJyZW50LmlzRm9jdXNXaXRoaW4gPSB0cnVlO1xuICAgICAgb25TeW50aGV0aWNGb2N1cyhlKTtcbiAgICB9XG4gIH0sIFtvbkZvY3VzV2l0aGluLCBvbkZvY3VzV2l0aGluQ2hhbmdlLCBvblN5bnRoZXRpY0ZvY3VzXSk7XG5cbiAgaWYgKGlzRGlzYWJsZWQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZm9jdXNXaXRoaW5Qcm9wczoge1xuICAgICAgICBvbkZvY3VzOiBudWxsLFxuICAgICAgICBvbkJsdXI6IG51bGxcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBmb2N1c1dpdGhpblByb3BzOiB7XG4gICAgICBvbkZvY3VzLFxuICAgICAgb25CbHVyXG4gICAgfVxuICB9O1xufVxuIiwiLypcbiAqIENvcHlyaWdodCAyMDIwIEFkb2JlLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHlcbiAqIG9mIHRoZSBMaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXJcbiAqIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIFJFUFJFU0VOVEFUSU9OU1xuICogT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlXG4gKiBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8vIFBvcnRpb25zIG9mIHRoZSBjb2RlIGluIHRoaXMgZmlsZSBhcmUgYmFzZWQgb24gY29kZSBmcm9tIHJlYWN0LlxuLy8gT3JpZ2luYWwgbGljZW5zaW5nIGZvciB0aGUgZm9sbG93aW5nIGNhbiBiZSBmb3VuZCBpbiB0aGVcbi8vIE5PVElDRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWFjdC90cmVlL2NjN2MxYWVjZTQ2YTZiNjliNDE5NThkNzMxZTBmZDI3Yzk0YmZjNmMvcGFja2FnZXMvcmVhY3QtaW50ZXJhY3Rpb25zXG5cbmltcG9ydCB7SG92ZXJFdmVudHN9IGZyb20gJ0ByZWFjdC10eXBlcy9zaGFyZWQnO1xuaW1wb3J0IHtIVE1MQXR0cmlidXRlcywgdXNlRWZmZWN0LCB1c2VNZW1vLCB1c2VSZWYsIHVzZVN0YXRlfSBmcm9tICdyZWFjdCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSG92ZXJQcm9wcyBleHRlbmRzIEhvdmVyRXZlbnRzIHtcbiAgLyoqIFdoZXRoZXIgdGhlIGhvdmVyIGV2ZW50cyBzaG91bGQgYmUgZGlzYWJsZWQuICovXG4gIGlzRGlzYWJsZWQ/OiBib29sZWFuXG59XG5cbmludGVyZmFjZSBIb3ZlclJlc3VsdCB7XG4gIC8qKiBQcm9wcyB0byBzcHJlYWQgb24gdGhlIHRhcmdldCBlbGVtZW50LiAqL1xuICBob3ZlclByb3BzOiBIVE1MQXR0cmlidXRlczxIVE1MRWxlbWVudD4sXG4gIGlzSG92ZXJlZDogYm9vbGVhblxufVxuXG4vLyBpT1MgZmlyZXMgb25Qb2ludGVyRW50ZXIgdHdpY2U6IG9uY2Ugd2l0aCBwb2ludGVyVHlwZT1cInRvdWNoXCIgYW5kIGFnYWluIHdpdGggcG9pbnRlclR5cGU9XCJtb3VzZVwiLlxuLy8gV2Ugd2FudCB0byBpZ25vcmUgdGhlc2UgZW11bGF0ZWQgZXZlbnRzIHNvIHRoZXkgZG8gbm90IHRyaWdnZXIgaG92ZXIgYmVoYXZpb3IuXG4vLyBTZWUgaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTIxNDYwOS5cbmxldCBnbG9iYWxJZ25vcmVFbXVsYXRlZE1vdXNlRXZlbnRzID0gZmFsc2U7XG5sZXQgaG92ZXJDb3VudCA9IDA7XG5cbmZ1bmN0aW9uIHNldEdsb2JhbElnbm9yZUVtdWxhdGVkTW91c2VFdmVudHMoKSB7XG4gIGdsb2JhbElnbm9yZUVtdWxhdGVkTW91c2VFdmVudHMgPSB0cnVlO1xuXG4gIC8vIENsZWFyIGdsb2JhbElnbm9yZUVtdWxhdGVkTW91c2VFdmVudHMgYWZ0ZXIgYSBzaG9ydCB0aW1lb3V0LiBpT1MgZmlyZXMgb25Qb2ludGVyRW50ZXJcbiAgLy8gd2l0aCBwb2ludGVyVHlwZT1cIm1vdXNlXCIgaW1tZWRpYXRlbHkgYWZ0ZXIgb25Qb2ludGVyVXAgYW5kIGJlZm9yZSBvbkZvY3VzLiBPbiBvdGhlclxuICAvLyBkZXZpY2VzIHRoYXQgZG9uJ3QgaGF2ZSB0aGlzIHF1aXJrLCB3ZSBkb24ndCB3YW50IHRvIGlnbm9yZSBhIG1vdXNlIGhvdmVyIHNvbWV0aW1lIGluXG4gIC8vIHRoZSBkaXN0YW50IGZ1dHVyZSBiZWNhdXNlIGEgdXNlciBwcmV2aW91c2x5IHRvdWNoZWQgdGhlIGVsZW1lbnQuXG4gIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgIGdsb2JhbElnbm9yZUVtdWxhdGVkTW91c2VFdmVudHMgPSBmYWxzZTtcbiAgfSwgNTApO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVHbG9iYWxQb2ludGVyRXZlbnQoZSkge1xuICBpZiAoZS5wb2ludGVyVHlwZSA9PT0gJ3RvdWNoJykge1xuICAgIHNldEdsb2JhbElnbm9yZUVtdWxhdGVkTW91c2VFdmVudHMoKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBzZXR1cEdsb2JhbFRvdWNoRXZlbnRzKCkge1xuICBpZiAodHlwZW9mIGRvY3VtZW50ID09PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmICh0eXBlb2YgUG9pbnRlckV2ZW50ICE9PSAndW5kZWZpbmVkJykge1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJ1cCcsIGhhbmRsZUdsb2JhbFBvaW50ZXJFdmVudCk7XG4gIH0gZWxzZSB7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBzZXRHbG9iYWxJZ25vcmVFbXVsYXRlZE1vdXNlRXZlbnRzKTtcbiAgfVxuXG4gIGhvdmVyQ291bnQrKztcbiAgcmV0dXJuICgpID0+IHtcbiAgICBob3ZlckNvdW50LS07XG4gICAgaWYgKGhvdmVyQ291bnQgPiAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBQb2ludGVyRXZlbnQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdwb2ludGVydXAnLCBoYW5kbGVHbG9iYWxQb2ludGVyRXZlbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHNldEdsb2JhbElnbm9yZUVtdWxhdGVkTW91c2VFdmVudHMpO1xuICAgIH1cbiAgfTtcbn1cblxuLyoqXG4gKiBIYW5kbGVzIHBvaW50ZXIgaG92ZXIgaW50ZXJhY3Rpb25zIGZvciBhbiBlbGVtZW50LiBOb3JtYWxpemVzIGJlaGF2aW9yXG4gKiBhY3Jvc3MgYnJvd3NlcnMgYW5kIHBsYXRmb3JtcywgYW5kIGlnbm9yZXMgZW11bGF0ZWQgbW91c2UgZXZlbnRzIG9uIHRvdWNoIGRldmljZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VIb3Zlcihwcm9wczogSG92ZXJQcm9wcyk6IEhvdmVyUmVzdWx0IHtcbiAgbGV0IHtcbiAgICBvbkhvdmVyU3RhcnQsXG4gICAgb25Ib3ZlckNoYW5nZSxcbiAgICBvbkhvdmVyRW5kLFxuICAgIGlzRGlzYWJsZWRcbiAgfSA9IHByb3BzO1xuXG4gIGxldCBbaXNIb3ZlcmVkLCBzZXRIb3ZlcmVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgbGV0IHN0YXRlID0gdXNlUmVmKHtcbiAgICBpc0hvdmVyZWQ6IGZhbHNlLFxuICAgIGlnbm9yZUVtdWxhdGVkTW91c2VFdmVudHM6IGZhbHNlLFxuICAgIHBvaW50ZXJUeXBlOiAnJyxcbiAgICB0YXJnZXQ6IG51bGxcbiAgfSkuY3VycmVudDtcblxuICB1c2VFZmZlY3Qoc2V0dXBHbG9iYWxUb3VjaEV2ZW50cywgW10pO1xuXG4gIGxldCB7aG92ZXJQcm9wcywgdHJpZ2dlckhvdmVyRW5kfSA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGxldCB0cmlnZ2VySG92ZXJTdGFydCA9IChldmVudCwgcG9pbnRlclR5cGUpID0+IHtcbiAgICAgIHN0YXRlLnBvaW50ZXJUeXBlID0gcG9pbnRlclR5cGU7XG4gICAgICBpZiAoaXNEaXNhYmxlZCB8fCBwb2ludGVyVHlwZSA9PT0gJ3RvdWNoJyB8fCBzdGF0ZS5pc0hvdmVyZWQgfHwgIWV2ZW50LmN1cnJlbnRUYXJnZXQuY29udGFpbnMoZXZlbnQudGFyZ2V0KSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHN0YXRlLmlzSG92ZXJlZCA9IHRydWU7XG4gICAgICBsZXQgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldDtcbiAgICAgIHN0YXRlLnRhcmdldCA9IHRhcmdldDtcblxuICAgICAgaWYgKG9uSG92ZXJTdGFydCkge1xuICAgICAgICBvbkhvdmVyU3RhcnQoe1xuICAgICAgICAgIHR5cGU6ICdob3ZlcnN0YXJ0JyxcbiAgICAgICAgICB0YXJnZXQsXG4gICAgICAgICAgcG9pbnRlclR5cGVcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChvbkhvdmVyQ2hhbmdlKSB7XG4gICAgICAgIG9uSG92ZXJDaGFuZ2UodHJ1ZSk7XG4gICAgICB9XG5cbiAgICAgIHNldEhvdmVyZWQodHJ1ZSk7XG4gICAgfTtcblxuICAgIGxldCB0cmlnZ2VySG92ZXJFbmQgPSAoZXZlbnQsIHBvaW50ZXJUeXBlKSA9PiB7XG4gICAgICBzdGF0ZS5wb2ludGVyVHlwZSA9ICcnO1xuICAgICAgc3RhdGUudGFyZ2V0ID0gbnVsbDtcblxuICAgICAgaWYgKHBvaW50ZXJUeXBlID09PSAndG91Y2gnIHx8ICFzdGF0ZS5pc0hvdmVyZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBzdGF0ZS5pc0hvdmVyZWQgPSBmYWxzZTtcbiAgICAgIGxldCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0O1xuICAgICAgaWYgKG9uSG92ZXJFbmQpIHtcbiAgICAgICAgb25Ib3ZlckVuZCh7XG4gICAgICAgICAgdHlwZTogJ2hvdmVyZW5kJyxcbiAgICAgICAgICB0YXJnZXQsXG4gICAgICAgICAgcG9pbnRlclR5cGVcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChvbkhvdmVyQ2hhbmdlKSB7XG4gICAgICAgIG9uSG92ZXJDaGFuZ2UoZmFsc2UpO1xuICAgICAgfVxuXG4gICAgICBzZXRIb3ZlcmVkKGZhbHNlKTtcbiAgICB9O1xuXG4gICAgbGV0IGhvdmVyUHJvcHM6IEhUTUxBdHRyaWJ1dGVzPEhUTUxFbGVtZW50PiA9IHt9O1xuXG4gICAgaWYgKHR5cGVvZiBQb2ludGVyRXZlbnQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBob3ZlclByb3BzLm9uUG9pbnRlckVudGVyID0gKGUpID0+IHtcbiAgICAgICAgaWYgKGdsb2JhbElnbm9yZUVtdWxhdGVkTW91c2VFdmVudHMgJiYgZS5wb2ludGVyVHlwZSA9PT0gJ21vdXNlJykge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyaWdnZXJIb3ZlclN0YXJ0KGUsIGUucG9pbnRlclR5cGUpO1xuICAgICAgfTtcblxuICAgICAgaG92ZXJQcm9wcy5vblBvaW50ZXJMZWF2ZSA9IChlKSA9PiB7XG4gICAgICAgIGlmICghaXNEaXNhYmxlZCAmJiBlLmN1cnJlbnRUYXJnZXQuY29udGFpbnMoZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQpKSB7XG4gICAgICAgICAgdHJpZ2dlckhvdmVyRW5kKGUsIGUucG9pbnRlclR5cGUpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBob3ZlclByb3BzLm9uVG91Y2hTdGFydCA9ICgpID0+IHtcbiAgICAgICAgc3RhdGUuaWdub3JlRW11bGF0ZWRNb3VzZUV2ZW50cyA9IHRydWU7XG4gICAgICB9O1xuXG4gICAgICBob3ZlclByb3BzLm9uTW91c2VFbnRlciA9IChlKSA9PiB7XG4gICAgICAgIGlmICghc3RhdGUuaWdub3JlRW11bGF0ZWRNb3VzZUV2ZW50cyAmJiAhZ2xvYmFsSWdub3JlRW11bGF0ZWRNb3VzZUV2ZW50cykge1xuICAgICAgICAgIHRyaWdnZXJIb3ZlclN0YXJ0KGUsICdtb3VzZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgc3RhdGUuaWdub3JlRW11bGF0ZWRNb3VzZUV2ZW50cyA9IGZhbHNlO1xuICAgICAgfTtcblxuICAgICAgaG92ZXJQcm9wcy5vbk1vdXNlTGVhdmUgPSAoZSkgPT4ge1xuICAgICAgICBpZiAoIWlzRGlzYWJsZWQgJiYgZS5jdXJyZW50VGFyZ2V0LmNvbnRhaW5zKGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50KSkge1xuICAgICAgICAgIHRyaWdnZXJIb3ZlckVuZChlLCAnbW91c2UnKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtob3ZlclByb3BzLCB0cmlnZ2VySG92ZXJFbmR9O1xuICB9LCBbb25Ib3ZlclN0YXJ0LCBvbkhvdmVyQ2hhbmdlLCBvbkhvdmVyRW5kLCBpc0Rpc2FibGVkLCBzdGF0ZV0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gQ2FsbCB0aGUgdHJpZ2dlckhvdmVyRW5kIGFzIHNvb24gYXMgaXNEaXNhYmxlZCBjaGFuZ2VzIHRvIHRydWVcbiAgICAvLyBTYWZlIHRvIGNhbGwgdHJpZ2dlckhvdmVyRW5kLCBpdCB3aWxsIGVhcmx5IHJldHVybiBpZiB3ZSBhcmVuJ3QgY3VycmVudGx5IGhvdmVyaW5nXG4gICAgaWYgKGlzRGlzYWJsZWQpIHtcbiAgICAgIHRyaWdnZXJIb3ZlckVuZCh7Y3VycmVudFRhcmdldDogc3RhdGUudGFyZ2V0fSwgc3RhdGUucG9pbnRlclR5cGUpO1xuICAgIH1cbiAgfSwgW2lzRGlzYWJsZWRdKTtcblxuICByZXR1cm4ge1xuICAgIGhvdmVyUHJvcHMsXG4gICAgaXNIb3ZlcmVkXG4gIH07XG59XG5cbiIsIi8qXG4gKiBDb3B5cmlnaHQgMjAyMCBBZG9iZS4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5XG4gKiBvZiB0aGUgTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyXG4gKiB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBSRVBSRVNFTlRBVElPTlNcbiAqIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZVxuICogZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vLyBQb3J0aW9ucyBvZiB0aGUgY29kZSBpbiB0aGlzIGZpbGUgYXJlIGJhc2VkIG9uIGNvZGUgZnJvbSByZWFjdC5cbi8vIE9yaWdpbmFsIGxpY2Vuc2luZyBmb3IgdGhlIGZvbGxvd2luZyBjYW4gYmUgZm91bmQgaW4gdGhlXG4vLyBOT1RJQ0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbi8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QvdHJlZS9jYzdjMWFlY2U0NmE2YjY5YjQxOTU4ZDczMWUwZmQyN2M5NGJmYzZjL3BhY2thZ2VzL3JlYWN0LWludGVyYWN0aW9uc1xuXG5pbXBvcnQge1JlZk9iamVjdCwgU3ludGhldGljRXZlbnQsIHVzZUVmZmVjdCwgdXNlUmVmfSBmcm9tICdyZWFjdCc7XG5cbmludGVyZmFjZSBJbnRlcmFjdE91dHNpZGVQcm9wcyB7XG4gIHJlZjogUmVmT2JqZWN0PEVsZW1lbnQ+LFxuICBvbkludGVyYWN0T3V0c2lkZT86IChlOiBTeW50aGV0aWNFdmVudCkgPT4gdm9pZCxcbiAgb25JbnRlcmFjdE91dHNpZGVTdGFydD86IChlOiBTeW50aGV0aWNFdmVudCkgPT4gdm9pZCxcbiAgLyoqIFdoZXRoZXIgdGhlIGludGVyYWN0IG91dHNpZGUgZXZlbnRzIHNob3VsZCBiZSBkaXNhYmxlZC4gKi9cbiAgaXNEaXNhYmxlZD86IGJvb2xlYW5cbn1cblxuLyoqXG4gKiBFeGFtcGxlLCB1c2VkIGluIGNvbXBvbmVudHMgbGlrZSBEaWFsb2dzIGFuZCBQb3BvdmVycyBzbyB0aGV5IGNhbiBjbG9zZVxuICogd2hlbiBhIHVzZXIgY2xpY2tzIG91dHNpZGUgdGhlbS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZUludGVyYWN0T3V0c2lkZShwcm9wczogSW50ZXJhY3RPdXRzaWRlUHJvcHMpIHtcbiAgbGV0IHtyZWYsIG9uSW50ZXJhY3RPdXRzaWRlLCBpc0Rpc2FibGVkLCBvbkludGVyYWN0T3V0c2lkZVN0YXJ0fSA9IHByb3BzO1xuICBsZXQgc3RhdGVSZWYgPSB1c2VSZWYoe1xuICAgIGlzUG9pbnRlckRvd246IGZhbHNlLFxuICAgIGlnbm9yZUVtdWxhdGVkTW91c2VFdmVudHM6IGZhbHNlLFxuICAgIG9uSW50ZXJhY3RPdXRzaWRlLFxuICAgIG9uSW50ZXJhY3RPdXRzaWRlU3RhcnRcbiAgfSk7XG4gIGxldCBzdGF0ZSA9IHN0YXRlUmVmLmN1cnJlbnQ7XG4gIHN0YXRlLm9uSW50ZXJhY3RPdXRzaWRlID0gb25JbnRlcmFjdE91dHNpZGU7XG4gIHN0YXRlLm9uSW50ZXJhY3RPdXRzaWRlU3RhcnQgPSBvbkludGVyYWN0T3V0c2lkZVN0YXJ0O1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGlzRGlzYWJsZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQgb25Qb2ludGVyRG93biA9IChlKSA9PiB7XG4gICAgICBpZiAoaXNWYWxpZEV2ZW50KGUsIHJlZikgJiYgc3RhdGUub25JbnRlcmFjdE91dHNpZGUpIHtcbiAgICAgICAgaWYgKHN0YXRlLm9uSW50ZXJhY3RPdXRzaWRlU3RhcnQpIHtcbiAgICAgICAgICBzdGF0ZS5vbkludGVyYWN0T3V0c2lkZVN0YXJ0KGUpO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRlLmlzUG9pbnRlckRvd24gPSB0cnVlO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBVc2UgcG9pbnRlciBldmVudHMgaWYgYXZhaWxhYmxlLiBPdGhlcndpc2UsIGZhbGwgYmFjayB0byBtb3VzZSBhbmQgdG91Y2ggZXZlbnRzLlxuICAgIGlmICh0eXBlb2YgUG9pbnRlckV2ZW50ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgbGV0IG9uUG9pbnRlclVwID0gKGUpID0+IHtcbiAgICAgICAgaWYgKHN0YXRlLmlzUG9pbnRlckRvd24gJiYgc3RhdGUub25JbnRlcmFjdE91dHNpZGUgJiYgaXNWYWxpZEV2ZW50KGUsIHJlZikpIHtcbiAgICAgICAgICBzdGF0ZS5pc1BvaW50ZXJEb3duID0gZmFsc2U7XG4gICAgICAgICAgc3RhdGUub25JbnRlcmFjdE91dHNpZGUoZSk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIC8vIGNoYW5naW5nIHRoZXNlIHRvIGNhcHR1cmUgcGhhc2UgZml4ZWQgY29tYm9ib3hcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJkb3duJywgb25Qb2ludGVyRG93biwgdHJ1ZSk7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVydXAnLCBvblBvaW50ZXJVcCwgdHJ1ZSk7XG5cbiAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJkb3duJywgb25Qb2ludGVyRG93biwgdHJ1ZSk7XG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJ1cCcsIG9uUG9pbnRlclVwLCB0cnVlKTtcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBvbk1vdXNlVXAgPSAoZSkgPT4ge1xuICAgICAgICBpZiAoc3RhdGUuaWdub3JlRW11bGF0ZWRNb3VzZUV2ZW50cykge1xuICAgICAgICAgIHN0YXRlLmlnbm9yZUVtdWxhdGVkTW91c2VFdmVudHMgPSBmYWxzZTtcbiAgICAgICAgfSBlbHNlIGlmIChzdGF0ZS5pc1BvaW50ZXJEb3duICYmIHN0YXRlLm9uSW50ZXJhY3RPdXRzaWRlICYmIGlzVmFsaWRFdmVudChlLCByZWYpKSB7XG4gICAgICAgICAgc3RhdGUuaXNQb2ludGVyRG93biA9IGZhbHNlO1xuICAgICAgICAgIHN0YXRlLm9uSW50ZXJhY3RPdXRzaWRlKGUpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBsZXQgb25Ub3VjaEVuZCA9IChlKSA9PiB7XG4gICAgICAgIHN0YXRlLmlnbm9yZUVtdWxhdGVkTW91c2VFdmVudHMgPSB0cnVlO1xuICAgICAgICBpZiAoc3RhdGUub25JbnRlcmFjdE91dHNpZGUgJiYgc3RhdGUuaXNQb2ludGVyRG93biAmJiBpc1ZhbGlkRXZlbnQoZSwgcmVmKSkge1xuICAgICAgICAgIHN0YXRlLmlzUG9pbnRlckRvd24gPSBmYWxzZTtcbiAgICAgICAgICBzdGF0ZS5vbkludGVyYWN0T3V0c2lkZShlKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgb25Qb2ludGVyRG93biwgdHJ1ZSk7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgb25Nb3VzZVVwLCB0cnVlKTtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBvblBvaW50ZXJEb3duLCB0cnVlKTtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgb25Ub3VjaEVuZCwgdHJ1ZSk7XG5cbiAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIG9uUG9pbnRlckRvd24sIHRydWUpO1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgb25Nb3VzZVVwLCB0cnVlKTtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIG9uUG9pbnRlckRvd24sIHRydWUpO1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIG9uVG91Y2hFbmQsIHRydWUpO1xuICAgICAgfTtcbiAgICB9XG4gIH0sIFtyZWYsIHN0YXRlLCBpc0Rpc2FibGVkXSk7XG59XG5cbmZ1bmN0aW9uIGlzVmFsaWRFdmVudChldmVudCwgcmVmKSB7XG4gIGlmIChldmVudC5idXR0b24gPiAwKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLy8gaWYgdGhlIGV2ZW50IHRhcmdldCBpcyBubyBsb25nZXIgaW4gdGhlIGRvY3VtZW50XG4gIGlmIChldmVudC50YXJnZXQpIHtcbiAgICBjb25zdCBvd25lckRvY3VtZW50ID0gZXZlbnQudGFyZ2V0Lm93bmVyRG9jdW1lbnQ7XG4gICAgaWYgKCFvd25lckRvY3VtZW50IHx8ICFvd25lckRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jb250YWlucyhldmVudC50YXJnZXQpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlZi5jdXJyZW50ICYmICFyZWYuY3VycmVudC5jb250YWlucyhldmVudC50YXJnZXQpO1xufVxuIiwiLypcbiAqIENvcHlyaWdodCAyMDIwIEFkb2JlLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHlcbiAqIG9mIHRoZSBMaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXJcbiAqIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIFJFUFJFU0VOVEFUSU9OU1xuICogT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlXG4gKiBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7QmFzZUV2ZW50fSBmcm9tICdAcmVhY3QtdHlwZXMvc2hhcmVkJztcbmltcG9ydCB7U3ludGhldGljRXZlbnR9IGZyb20gJ3JlYWN0JztcblxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHdyYXBzIGEgUmVhY3QgZXZlbnQgaGFuZGxlciB0byBtYWtlIHN0b3BQcm9wYWdhdGlvbiB0aGUgZGVmYXVsdCwgYW5kIHN1cHBvcnQgY29udGludWVQcm9wYWdhdGlvbiBpbnN0ZWFkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRXZlbnRIYW5kbGVyPFQgZXh0ZW5kcyBTeW50aGV0aWNFdmVudD4oaGFuZGxlcjogKGU6IEJhc2VFdmVudDxUPikgPT4gdm9pZCk6IChlOiBUKSA9PiB2b2lkIHtcbiAgaWYgKCFoYW5kbGVyKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgbGV0IHNob3VsZFN0b3BQcm9wYWdhdGlvbiA9IHRydWU7XG4gIHJldHVybiAoZTogVCkgPT4ge1xuICAgIGxldCBldmVudDogQmFzZUV2ZW50PFQ+ID0ge1xuICAgICAgLi4uZSxcbiAgICAgIHByZXZlbnREZWZhdWx0KCkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9LFxuICAgICAgaXNEZWZhdWx0UHJldmVudGVkKCkge1xuICAgICAgICByZXR1cm4gZS5pc0RlZmF1bHRQcmV2ZW50ZWQoKTtcbiAgICAgIH0sXG4gICAgICBzdG9wUHJvcGFnYXRpb24oKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ3N0b3BQcm9wYWdhdGlvbiBpcyBub3cgdGhlIGRlZmF1bHQgYmVoYXZpb3IgZm9yIGV2ZW50cyBpbiBSZWFjdCBTcGVjdHJ1bS4gWW91IGNhbiB1c2UgY29udGludWVQcm9wYWdhdGlvbigpIHRvIHJldmVydCB0aGlzIGJlaGF2aW9yLicpO1xuICAgICAgfSxcbiAgICAgIGNvbnRpbnVlUHJvcGFnYXRpb24oKSB7XG4gICAgICAgIHNob3VsZFN0b3BQcm9wYWdhdGlvbiA9IGZhbHNlO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBoYW5kbGVyKGV2ZW50KTtcblxuICAgIGlmIChzaG91bGRTdG9wUHJvcGFnYXRpb24pIHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfVxuICB9O1xufVxuIiwiLypcbiAqIENvcHlyaWdodCAyMDIwIEFkb2JlLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHlcbiAqIG9mIHRoZSBMaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXJcbiAqIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIFJFUFJFU0VOVEFUSU9OU1xuICogT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlXG4gKiBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7Y3JlYXRlRXZlbnRIYW5kbGVyfSBmcm9tICcuL2NyZWF0ZUV2ZW50SGFuZGxlcic7XG5pbXBvcnQge0hUTUxBdHRyaWJ1dGVzfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQge0tleWJvYXJkRXZlbnRzfSBmcm9tICdAcmVhY3QtdHlwZXMvc2hhcmVkJztcblxuZXhwb3J0IGludGVyZmFjZSBLZXlib2FyZFByb3BzIGV4dGVuZHMgS2V5Ym9hcmRFdmVudHMge1xuICAvKiogV2hldGhlciB0aGUga2V5Ym9hcmQgZXZlbnRzIHNob3VsZCBiZSBkaXNhYmxlZC4gKi9cbiAgaXNEaXNhYmxlZD86IGJvb2xlYW5cbn1cblxuaW50ZXJmYWNlIEtleWJvYXJkUmVzdWx0IHtcbiAgLyoqIFByb3BzIHRvIHNwcmVhZCBvbnRvIHRoZSB0YXJnZXQgZWxlbWVudC4gKi9cbiAga2V5Ym9hcmRQcm9wczogSFRNTEF0dHJpYnV0ZXM8SFRNTEVsZW1lbnQ+XG59XG5cbi8qKlxuICogSGFuZGxlcyBrZXlib2FyZCBpbnRlcmFjdGlvbnMgZm9yIGEgZm9jdXNhYmxlIGVsZW1lbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VLZXlib2FyZChwcm9wczogS2V5Ym9hcmRQcm9wcyk6IEtleWJvYXJkUmVzdWx0IHtcbiAgcmV0dXJuIHtcbiAgICBrZXlib2FyZFByb3BzOiBwcm9wcy5pc0Rpc2FibGVkID8ge30gOiB7XG4gICAgICBvbktleURvd246IGNyZWF0ZUV2ZW50SGFuZGxlcihwcm9wcy5vbktleURvd24pLFxuICAgICAgb25LZXlVcDogY3JlYXRlRXZlbnRIYW5kbGVyKHByb3BzLm9uS2V5VXApXG4gICAgfVxuICB9O1xufVxuIiwiLypcbiAqIENvcHlyaWdodCAyMDIwIEFkb2JlLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHlcbiAqIG9mIHRoZSBMaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXJcbiAqIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIFJFUFJFU0VOVEFUSU9OU1xuICogT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlXG4gKiBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7ZGlzYWJsZVRleHRTZWxlY3Rpb24sIHJlc3RvcmVUZXh0U2VsZWN0aW9ufSAgZnJvbSAnLi90ZXh0U2VsZWN0aW9uJztcbmltcG9ydCB7TW92ZUV2ZW50cywgUG9pbnRlclR5cGV9IGZyb20gJ0ByZWFjdC10eXBlcy9zaGFyZWQnO1xuaW1wb3J0IFJlYWN0LCB7SFRNTEF0dHJpYnV0ZXMsIHVzZU1lbW8sIHVzZVJlZn0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHt1c2VHbG9iYWxMaXN0ZW5lcnN9IGZyb20gJ0ByZWFjdC1hcmlhL3V0aWxzJztcblxuaW50ZXJmYWNlIE1vdmVSZXN1bHQge1xuICAvKiogUHJvcHMgdG8gc3ByZWFkIG9uIHRoZSB0YXJnZXQgZWxlbWVudC4gKi9cbiAgbW92ZVByb3BzOiBIVE1MQXR0cmlidXRlczxIVE1MRWxlbWVudD5cbn1cblxuaW50ZXJmYWNlIEV2ZW50QmFzZSB7XG4gIHNoaWZ0S2V5OiBib29sZWFuLFxuICBjdHJsS2V5OiBib29sZWFuLFxuICBtZXRhS2V5OiBib29sZWFuLFxuICBhbHRLZXk6IGJvb2xlYW5cbn1cblxuLyoqXG4gKiBIYW5kbGVzIG1vdmUgaW50ZXJhY3Rpb25zIGFjcm9zcyBtb3VzZSwgdG91Y2gsIGFuZCBrZXlib2FyZCwgaW5jbHVkaW5nIGRyYWdnaW5nIHdpdGhcbiAqIHRoZSBtb3VzZSBvciB0b3VjaCwgYW5kIHVzaW5nIHRoZSBhcnJvdyBrZXlzLiBOb3JtYWxpemVzIGJlaGF2aW9yIGFjcm9zcyBicm93c2VycyBhbmRcbiAqIHBsYXRmb3JtcywgYW5kIGlnbm9yZXMgZW11bGF0ZWQgbW91c2UgZXZlbnRzIG9uIHRvdWNoIGRldmljZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VNb3ZlKHByb3BzOiBNb3ZlRXZlbnRzKTogTW92ZVJlc3VsdCB7XG4gIGxldCB7b25Nb3ZlU3RhcnQsIG9uTW92ZSwgb25Nb3ZlRW5kfSA9IHByb3BzO1xuXG4gIGxldCBzdGF0ZSA9IHVzZVJlZjx7XG4gICAgZGlkTW92ZTogYm9vbGVhbixcbiAgICBsYXN0UG9zaXRpb246IHtwYWdlWDogbnVtYmVyLCBwYWdlWTogbnVtYmVyfSB8IG51bGwsXG4gICAgaWQ6IG51bWJlciB8IG51bGxcbiAgfT4oe2RpZE1vdmU6IGZhbHNlLCBsYXN0UG9zaXRpb246IG51bGwsIGlkOiBudWxsfSk7XG5cbiAgbGV0IHthZGRHbG9iYWxMaXN0ZW5lciwgcmVtb3ZlR2xvYmFsTGlzdGVuZXJ9ID0gdXNlR2xvYmFsTGlzdGVuZXJzKCk7XG5cbiAgbGV0IG1vdmVQcm9wcyA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGxldCBtb3ZlUHJvcHM6IEhUTUxBdHRyaWJ1dGVzPEhUTUxFbGVtZW50PiA9IHt9O1xuXG4gICAgbGV0IHN0YXJ0ID0gKCkgPT4ge1xuICAgICAgZGlzYWJsZVRleHRTZWxlY3Rpb24oKTtcbiAgICAgIHN0YXRlLmN1cnJlbnQuZGlkTW92ZSA9IGZhbHNlO1xuICAgIH07XG4gICAgbGV0IG1vdmUgPSAob3JpZ2luYWxFdmVudDogRXZlbnRCYXNlLCBwb2ludGVyVHlwZTogUG9pbnRlclR5cGUsIGRlbHRhWDogbnVtYmVyLCBkZWx0YVk6IG51bWJlcikgPT4ge1xuICAgICAgaWYgKGRlbHRhWCA9PT0gMCAmJiBkZWx0YVkgPT09IDApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXN0YXRlLmN1cnJlbnQuZGlkTW92ZSkge1xuICAgICAgICBzdGF0ZS5jdXJyZW50LmRpZE1vdmUgPSB0cnVlO1xuICAgICAgICBvbk1vdmVTdGFydD8uKHtcbiAgICAgICAgICB0eXBlOiAnbW92ZXN0YXJ0JyxcbiAgICAgICAgICBwb2ludGVyVHlwZSxcbiAgICAgICAgICBzaGlmdEtleTogb3JpZ2luYWxFdmVudC5zaGlmdEtleSxcbiAgICAgICAgICBtZXRhS2V5OiBvcmlnaW5hbEV2ZW50Lm1ldGFLZXksXG4gICAgICAgICAgY3RybEtleTogb3JpZ2luYWxFdmVudC5jdHJsS2V5LFxuICAgICAgICAgIGFsdEtleTogb3JpZ2luYWxFdmVudC5hbHRLZXlcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBvbk1vdmUoe1xuICAgICAgICB0eXBlOiAnbW92ZScsXG4gICAgICAgIHBvaW50ZXJUeXBlLFxuICAgICAgICBkZWx0YVg6IGRlbHRhWCxcbiAgICAgICAgZGVsdGFZOiBkZWx0YVksXG4gICAgICAgIHNoaWZ0S2V5OiBvcmlnaW5hbEV2ZW50LnNoaWZ0S2V5LFxuICAgICAgICBtZXRhS2V5OiBvcmlnaW5hbEV2ZW50Lm1ldGFLZXksXG4gICAgICAgIGN0cmxLZXk6IG9yaWdpbmFsRXZlbnQuY3RybEtleSxcbiAgICAgICAgYWx0S2V5OiBvcmlnaW5hbEV2ZW50LmFsdEtleVxuICAgICAgfSk7XG4gICAgfTtcbiAgICBsZXQgZW5kID0gKG9yaWdpbmFsRXZlbnQ6IEV2ZW50QmFzZSwgcG9pbnRlclR5cGU6IFBvaW50ZXJUeXBlKSA9PiB7XG4gICAgICByZXN0b3JlVGV4dFNlbGVjdGlvbigpO1xuICAgICAgaWYgKHN0YXRlLmN1cnJlbnQuZGlkTW92ZSkge1xuICAgICAgICBvbk1vdmVFbmQ/Lih7XG4gICAgICAgICAgdHlwZTogJ21vdmVlbmQnLFxuICAgICAgICAgIHBvaW50ZXJUeXBlLFxuICAgICAgICAgIHNoaWZ0S2V5OiBvcmlnaW5hbEV2ZW50LnNoaWZ0S2V5LFxuICAgICAgICAgIG1ldGFLZXk6IG9yaWdpbmFsRXZlbnQubWV0YUtleSxcbiAgICAgICAgICBjdHJsS2V5OiBvcmlnaW5hbEV2ZW50LmN0cmxLZXksXG4gICAgICAgICAgYWx0S2V5OiBvcmlnaW5hbEV2ZW50LmFsdEtleVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKHR5cGVvZiBQb2ludGVyRXZlbnQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBsZXQgb25Nb3VzZU1vdmUgPSAoZTogTW91c2VFdmVudCkgPT4ge1xuICAgICAgICBpZiAoZS5idXR0b24gPT09IDApIHtcbiAgICAgICAgICBtb3ZlKGUsICdtb3VzZScsIGUucGFnZVggLSBzdGF0ZS5jdXJyZW50Lmxhc3RQb3NpdGlvbi5wYWdlWCwgZS5wYWdlWSAtIHN0YXRlLmN1cnJlbnQubGFzdFBvc2l0aW9uLnBhZ2VZKTtcbiAgICAgICAgICBzdGF0ZS5jdXJyZW50Lmxhc3RQb3NpdGlvbiA9IHtwYWdlWDogZS5wYWdlWCwgcGFnZVk6IGUucGFnZVl9O1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgbGV0IG9uTW91c2VVcCA9IChlOiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAgIGlmIChlLmJ1dHRvbiA9PT0gMCkge1xuICAgICAgICAgIGVuZChlLCAnbW91c2UnKTtcbiAgICAgICAgICByZW1vdmVHbG9iYWxMaXN0ZW5lcih3aW5kb3csICdtb3VzZW1vdmUnLCBvbk1vdXNlTW92ZSwgZmFsc2UpO1xuICAgICAgICAgIHJlbW92ZUdsb2JhbExpc3RlbmVyKHdpbmRvdywgJ21vdXNldXAnLCBvbk1vdXNlVXAsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIG1vdmVQcm9wcy5vbk1vdXNlRG93biA9IChlOiBSZWFjdC5Nb3VzZUV2ZW50KSA9PiB7XG4gICAgICAgIGlmIChlLmJ1dHRvbiA9PT0gMCkge1xuICAgICAgICAgIHN0YXJ0KCk7XG4gICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgc3RhdGUuY3VycmVudC5sYXN0UG9zaXRpb24gPSB7cGFnZVg6IGUucGFnZVgsIHBhZ2VZOiBlLnBhZ2VZfTtcbiAgICAgICAgICBhZGRHbG9iYWxMaXN0ZW5lcih3aW5kb3csICdtb3VzZW1vdmUnLCBvbk1vdXNlTW92ZSwgZmFsc2UpO1xuICAgICAgICAgIGFkZEdsb2JhbExpc3RlbmVyKHdpbmRvdywgJ21vdXNldXAnLCBvbk1vdXNlVXAsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgbGV0IG9uVG91Y2hNb3ZlID0gKGU6IFRvdWNoRXZlbnQpID0+IHtcbiAgICAgICAgbGV0IHRvdWNoID0gWy4uLmUuY2hhbmdlZFRvdWNoZXNdLmZpbmRJbmRleCgoe2lkZW50aWZpZXJ9KSA9PiBpZGVudGlmaWVyID09PSBzdGF0ZS5jdXJyZW50LmlkKTtcbiAgICAgICAgaWYgKHRvdWNoID49IDApIHtcbiAgICAgICAgICBsZXQge3BhZ2VYLCBwYWdlWX0gPSBlLmNoYW5nZWRUb3VjaGVzW3RvdWNoXTtcbiAgICAgICAgICBtb3ZlKGUsICd0b3VjaCcsIHBhZ2VYIC0gc3RhdGUuY3VycmVudC5sYXN0UG9zaXRpb24ucGFnZVgsIHBhZ2VZIC0gc3RhdGUuY3VycmVudC5sYXN0UG9zaXRpb24ucGFnZVkpO1xuICAgICAgICAgIHN0YXRlLmN1cnJlbnQubGFzdFBvc2l0aW9uID0ge3BhZ2VYLCBwYWdlWX07XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBsZXQgb25Ub3VjaEVuZCA9IChlOiBUb3VjaEV2ZW50KSA9PiB7XG4gICAgICAgIGxldCB0b3VjaCA9IFsuLi5lLmNoYW5nZWRUb3VjaGVzXS5maW5kSW5kZXgoKHtpZGVudGlmaWVyfSkgPT4gaWRlbnRpZmllciA9PT0gc3RhdGUuY3VycmVudC5pZCk7XG4gICAgICAgIGlmICh0b3VjaCA+PSAwKSB7XG4gICAgICAgICAgZW5kKGUsICd0b3VjaCcpO1xuICAgICAgICAgIHN0YXRlLmN1cnJlbnQuaWQgPSBudWxsO1xuICAgICAgICAgIHJlbW92ZUdsb2JhbExpc3RlbmVyKHdpbmRvdywgJ3RvdWNobW92ZScsIG9uVG91Y2hNb3ZlKTtcbiAgICAgICAgICByZW1vdmVHbG9iYWxMaXN0ZW5lcih3aW5kb3csICd0b3VjaGVuZCcsIG9uVG91Y2hFbmQpO1xuICAgICAgICAgIHJlbW92ZUdsb2JhbExpc3RlbmVyKHdpbmRvdywgJ3RvdWNoY2FuY2VsJywgb25Ub3VjaEVuZCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBtb3ZlUHJvcHMub25Ub3VjaFN0YXJ0ID0gKGU6IFJlYWN0LlRvdWNoRXZlbnQpID0+IHtcbiAgICAgICAgaWYgKGUuY2hhbmdlZFRvdWNoZXMubGVuZ3RoID09PSAwIHx8IHN0YXRlLmN1cnJlbnQuaWQgIT0gbnVsbCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCB7cGFnZVgsIHBhZ2VZLCBpZGVudGlmaWVyfSA9IGUuY2hhbmdlZFRvdWNoZXNbMF07XG4gICAgICAgIHN0YXJ0KCk7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgc3RhdGUuY3VycmVudC5sYXN0UG9zaXRpb24gPSB7cGFnZVgsIHBhZ2VZfTtcbiAgICAgICAgc3RhdGUuY3VycmVudC5pZCA9IGlkZW50aWZpZXI7XG4gICAgICAgIGFkZEdsb2JhbExpc3RlbmVyKHdpbmRvdywgJ3RvdWNobW92ZScsIG9uVG91Y2hNb3ZlLCBmYWxzZSk7XG4gICAgICAgIGFkZEdsb2JhbExpc3RlbmVyKHdpbmRvdywgJ3RvdWNoZW5kJywgb25Ub3VjaEVuZCwgZmFsc2UpO1xuICAgICAgICBhZGRHbG9iYWxMaXN0ZW5lcih3aW5kb3csICd0b3VjaGNhbmNlbCcsIG9uVG91Y2hFbmQsIGZhbHNlKTtcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBvblBvaW50ZXJNb3ZlID0gKGU6IFBvaW50ZXJFdmVudCkgPT4ge1xuICAgICAgICBpZiAoZS5wb2ludGVySWQgPT09IHN0YXRlLmN1cnJlbnQuaWQpIHtcbiAgICAgICAgICBsZXQgcG9pbnRlclR5cGUgPSAoZS5wb2ludGVyVHlwZSB8fCAnbW91c2UnKSBhcyBQb2ludGVyVHlwZTtcblxuICAgICAgICAgIC8vIFByb2JsZW1zIHdpdGggUG9pbnRlckV2ZW50I21vdmVtZW50WC9tb3ZlbWVudFk6XG4gICAgICAgICAgLy8gMS4gaXQgaXMgYWx3YXlzIDAgb24gbWFjT1MgU2FmYXJpLlxuICAgICAgICAgIC8vIDIuIE9uIENocm9tZSBBbmRyb2lkLCBpdCdzIHNjYWxlZCBieSBkZXZpY2VQaXhlbFJhdGlvLCBidXQgbm90IG9uIENocm9tZSBtYWNPU1xuICAgICAgICAgIG1vdmUoZSwgcG9pbnRlclR5cGUsIGUucGFnZVggLSBzdGF0ZS5jdXJyZW50Lmxhc3RQb3NpdGlvbi5wYWdlWCwgZS5wYWdlWSAtIHN0YXRlLmN1cnJlbnQubGFzdFBvc2l0aW9uLnBhZ2VZKTtcbiAgICAgICAgICBzdGF0ZS5jdXJyZW50Lmxhc3RQb3NpdGlvbiA9IHtwYWdlWDogZS5wYWdlWCwgcGFnZVk6IGUucGFnZVl9O1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBsZXQgb25Qb2ludGVyVXAgPSAoZTogUG9pbnRlckV2ZW50KSA9PiB7XG4gICAgICAgIGlmIChlLnBvaW50ZXJJZCA9PT0gc3RhdGUuY3VycmVudC5pZCkge1xuICAgICAgICAgIGxldCBwb2ludGVyVHlwZSA9IChlLnBvaW50ZXJUeXBlIHx8ICdtb3VzZScpIGFzIFBvaW50ZXJUeXBlO1xuICAgICAgICAgIGVuZChlLCBwb2ludGVyVHlwZSk7XG4gICAgICAgICAgc3RhdGUuY3VycmVudC5pZCA9IG51bGw7XG4gICAgICAgICAgcmVtb3ZlR2xvYmFsTGlzdGVuZXIod2luZG93LCAncG9pbnRlcm1vdmUnLCBvblBvaW50ZXJNb3ZlLCBmYWxzZSk7XG4gICAgICAgICAgcmVtb3ZlR2xvYmFsTGlzdGVuZXIod2luZG93LCAncG9pbnRlcnVwJywgb25Qb2ludGVyVXAsIGZhbHNlKTtcbiAgICAgICAgICByZW1vdmVHbG9iYWxMaXN0ZW5lcih3aW5kb3csICdwb2ludGVyY2FuY2VsJywgb25Qb2ludGVyVXAsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgbW92ZVByb3BzLm9uUG9pbnRlckRvd24gPSAoZTogUmVhY3QuUG9pbnRlckV2ZW50KSA9PiB7XG4gICAgICAgIGlmIChlLmJ1dHRvbiA9PT0gMCAmJiBzdGF0ZS5jdXJyZW50LmlkID09IG51bGwpIHtcbiAgICAgICAgICBzdGFydCgpO1xuICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIHN0YXRlLmN1cnJlbnQubGFzdFBvc2l0aW9uID0ge3BhZ2VYOiBlLnBhZ2VYLCBwYWdlWTogZS5wYWdlWX07XG4gICAgICAgICAgc3RhdGUuY3VycmVudC5pZCA9IGUucG9pbnRlcklkO1xuICAgICAgICAgIGFkZEdsb2JhbExpc3RlbmVyKHdpbmRvdywgJ3BvaW50ZXJtb3ZlJywgb25Qb2ludGVyTW92ZSwgZmFsc2UpO1xuICAgICAgICAgIGFkZEdsb2JhbExpc3RlbmVyKHdpbmRvdywgJ3BvaW50ZXJ1cCcsIG9uUG9pbnRlclVwLCBmYWxzZSk7XG4gICAgICAgICAgYWRkR2xvYmFsTGlzdGVuZXIod2luZG93LCAncG9pbnRlcmNhbmNlbCcsIG9uUG9pbnRlclVwLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuXG4gICAgbGV0IHRyaWdnZXJLZXlib2FyZE1vdmUgPSAoZTogRXZlbnRCYXNlLCBkZWx0YVg6IG51bWJlciwgZGVsdGFZOiBudW1iZXIpID0+IHtcbiAgICAgIHN0YXJ0KCk7XG4gICAgICBtb3ZlKGUsICdrZXlib2FyZCcsIGRlbHRhWCwgZGVsdGFZKTtcbiAgICAgIGVuZChlLCAna2V5Ym9hcmQnKTtcbiAgICB9O1xuXG4gICAgbW92ZVByb3BzLm9uS2V5RG93biA9IChlKSA9PiB7XG4gICAgICBzd2l0Y2ggKGUua2V5KSB7XG4gICAgICAgIGNhc2UgJ0xlZnQnOlxuICAgICAgICBjYXNlICdBcnJvd0xlZnQnOlxuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgIHRyaWdnZXJLZXlib2FyZE1vdmUoZSwgLTEsIDApO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdSaWdodCc6XG4gICAgICAgIGNhc2UgJ0Fycm93UmlnaHQnOlxuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgIHRyaWdnZXJLZXlib2FyZE1vdmUoZSwgMSwgMCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ1VwJzpcbiAgICAgICAgY2FzZSAnQXJyb3dVcCc6XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgdHJpZ2dlcktleWJvYXJkTW92ZShlLCAwLCAtMSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0Rvd24nOlxuICAgICAgICBjYXNlICdBcnJvd0Rvd24nOlxuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgIHRyaWdnZXJLZXlib2FyZE1vdmUoZSwgMCwgMSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBtb3ZlUHJvcHM7XG4gIH0sIFtzdGF0ZSwgb25Nb3ZlU3RhcnQsIG9uTW92ZSwgb25Nb3ZlRW5kLCBhZGRHbG9iYWxMaXN0ZW5lciwgcmVtb3ZlR2xvYmFsTGlzdGVuZXJdKTtcblxuICByZXR1cm4ge21vdmVQcm9wc307XG59XG4iLCIvKlxuICogQ29weXJpZ2h0IDIwMjEgQWRvYmUuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weVxuICogb2YgdGhlIExpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlclxuICogdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgUkVQUkVTRU5UQVRJT05TXG4gKiBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2VcbiAqIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtSZWZPYmplY3QsIHVzZUNhbGxiYWNrfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQge1Njcm9sbEV2ZW50c30gZnJvbSAnQHJlYWN0LXR5cGVzL3NoYXJlZCc7XG5pbXBvcnQge3VzZUV2ZW50fSBmcm9tICdAcmVhY3QtYXJpYS91dGlscyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2Nyb2xsV2hlZWxQcm9wcyBleHRlbmRzIFNjcm9sbEV2ZW50cyB7XG4gIC8qKiBXaGV0aGVyIHRoZSBzY3JvbGwgbGlzdGVuZXIgc2hvdWxkIGJlIGRpc2FibGVkLiAqL1xuICBpc0Rpc2FibGVkPzogYm9vbGVhblxufVxuXG4vLyBzY3JvbGwgd2hlZWwgbmVlZHMgdG8gYmUgYWRkZWQgbm90IHBhc3NpdmVseSBzbyBpdCdzIGNhbmNlbGFibGUsIHNtYWxsIGhlbHBlciBob29rIHRvIHJlbWVtYmVyIHRoYXRcbmV4cG9ydCBmdW5jdGlvbiB1c2VTY3JvbGxXaGVlbChwcm9wczogU2Nyb2xsV2hlZWxQcm9wcywgcmVmOiBSZWZPYmplY3Q8SFRNTEVsZW1lbnQ+KTogdm9pZCB7XG4gIGxldCB7b25TY3JvbGwsIGlzRGlzYWJsZWR9ID0gcHJvcHM7XG4gIGxldCBvblNjcm9sbEhhbmRsZXIgPSB1c2VDYWxsYmFjaygoZSkgPT4ge1xuICAgIC8vIElmIHRoZSBjdHJsS2V5IGlzIHByZXNzZWQsIHRoaXMgaXMgYSB6b29tIGV2ZW50LCBkbyBub3RoaW5nLlxuICAgIGlmIChlLmN0cmxLZXkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBzdG9wIHNjcm9sbGluZyB0aGUgcGFnZVxuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgaWYgKG9uU2Nyb2xsKSB7XG4gICAgICBvblNjcm9sbCh7ZGVsdGFYOiBlLmRlbHRhWCwgZGVsdGFZOiBlLmRlbHRhWX0pO1xuICAgIH1cbiAgfSwgW29uU2Nyb2xsXSk7XG5cbiAgdXNlRXZlbnQocmVmLCAnd2hlZWwnLCBpc0Rpc2FibGVkID8gbnVsbCA6IG9uU2Nyb2xsSGFuZGxlcik7XG59XG4iLCIvKlxuICogQ29weXJpZ2h0IDIwMjAgQWRvYmUuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weVxuICogb2YgdGhlIExpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlclxuICogdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgUkVQUkVTRU5UQVRJT05TXG4gKiBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2VcbiAqIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtIVE1MQXR0cmlidXRlcywgdXNlUmVmfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQge0xvbmdQcmVzc0V2ZW50fSBmcm9tICdAcmVhY3QtdHlwZXMvc2hhcmVkJztcbmltcG9ydCB7bWVyZ2VQcm9wcywgdXNlRGVzY3JpcHRpb24sIHVzZUdsb2JhbExpc3RlbmVyc30gZnJvbSAnQHJlYWN0LWFyaWEvdXRpbHMnO1xuaW1wb3J0IHt1c2VQcmVzc30gZnJvbSAnLi91c2VQcmVzcyc7XG5cbmludGVyZmFjZSBMb25nUHJlc3NQcm9wcyB7XG4gIC8qKiBXaGV0aGVyIGxvbmcgcHJlc3MgZXZlbnRzIHNob3VsZCBiZSBkaXNhYmxlZC4gKi9cbiAgaXNEaXNhYmxlZD86IGJvb2xlYW4sXG4gIC8qKiBIYW5kbGVyIHRoYXQgaXMgY2FsbGVkIHdoZW4gYSBsb25nIHByZXNzIGludGVyYWN0aW9uIHN0YXJ0cy4gKi9cbiAgb25Mb25nUHJlc3NTdGFydD86IChlOiBMb25nUHJlc3NFdmVudCkgPT4gdm9pZCxcbiAgLyoqXG4gICAqIEhhbmRsZXIgdGhhdCBpcyBjYWxsZWQgd2hlbiBhIGxvbmcgcHJlc3MgaW50ZXJhY3Rpb24gZW5kcywgZWl0aGVyXG4gICAqIG92ZXIgdGhlIHRhcmdldCBvciB3aGVuIHRoZSBwb2ludGVyIGxlYXZlcyB0aGUgdGFyZ2V0LlxuICAgKi9cbiAgb25Mb25nUHJlc3NFbmQ/OiAoZTogTG9uZ1ByZXNzRXZlbnQpID0+IHZvaWQsXG4gIC8qKlxuICAgKiBIYW5kbGVyIHRoYXQgaXMgY2FsbGVkIHdoZW4gdGhlIHRocmVzaG9sZCB0aW1lIGlzIG1ldCB3aGlsZVxuICAgKiB0aGUgcHJlc3MgaXMgb3ZlciB0aGUgdGFyZ2V0LlxuICAgKi9cbiAgb25Mb25nUHJlc3M/OiAoZTogTG9uZ1ByZXNzRXZlbnQpID0+IHZvaWQsXG4gIC8qKlxuICAgKiBUaGUgYW1vdW50IG9mIHRpbWUgaW4gbWlsbGlzZWNvbmRzIHRvIHdhaXQgYmVmb3JlIHRyaWdnZXJpbmcgYSBsb25nIHByZXNzLlxuICAgKiBAZGVmYXVsdCA1MDBtc1xuICAgKi9cbiAgdGhyZXNob2xkPzogbnVtYmVyLFxuICAvKipcbiAgICogQSBkZXNjcmlwdGlvbiBmb3IgYXNzaXN0aXZlIHRlY2hvbG9neSB1c2VycyBpbmRpY2F0aW5nIHRoYXQgYSBsb25nIHByZXNzXG4gICAqIGFjdGlvbiBpcyBhdmFpbGFibGUsIGUuZy4gXCJMb25nIHByZXNzIHRvIG9wZW4gbWVudVwiLlxuICAgKi9cbiAgYWNjZXNzaWJpbGl0eURlc2NyaXB0aW9uPzogc3RyaW5nXG59XG5cbmludGVyZmFjZSBMb25nUHJlc3NSZXN1bHQge1xuICAvKiogUHJvcHMgdG8gc3ByZWFkIG9uIHRoZSB0YXJnZXQgZWxlbWVudC4gKi9cbiAgbG9uZ1ByZXNzUHJvcHM6IEhUTUxBdHRyaWJ1dGVzPEhUTUxFbGVtZW50PlxufVxuXG5jb25zdCBERUZBVUxUX1RIUkVTSE9MRCA9IDUwMDtcblxuLyoqXG4gKiBIYW5kbGVzIGxvbmcgcHJlc3MgaW50ZXJhY3Rpb25zIGFjcm9zcyBtb3VzZSBhbmQgdG91Y2ggZGV2aWNlcy4gU3VwcG9ydHMgYSBjdXN0b21pemFibGUgdGltZSB0aHJlc2hvbGQsXG4gKiBhY2Nlc3NpYmlsaXR5IGRlc2NyaXB0aW9uLCBhbmQgbm9ybWFsaXplcyBiZWhhdmlvciBhY3Jvc3MgYnJvd3NlcnMgYW5kIGRldmljZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VMb25nUHJlc3MocHJvcHM6IExvbmdQcmVzc1Byb3BzKTogTG9uZ1ByZXNzUmVzdWx0IHtcbiAgbGV0IHtcbiAgICBpc0Rpc2FibGVkLFxuICAgIG9uTG9uZ1ByZXNzU3RhcnQsXG4gICAgb25Mb25nUHJlc3NFbmQsXG4gICAgb25Mb25nUHJlc3MsXG4gICAgdGhyZXNob2xkID0gREVGQVVMVF9USFJFU0hPTEQsXG4gICAgYWNjZXNzaWJpbGl0eURlc2NyaXB0aW9uXG4gIH0gPSBwcm9wcztcblxuICBjb25zdCB0aW1lUmVmID0gdXNlUmVmKG51bGwpO1xuICBsZXQge2FkZEdsb2JhbExpc3RlbmVyLCByZW1vdmVHbG9iYWxMaXN0ZW5lcn0gPSB1c2VHbG9iYWxMaXN0ZW5lcnMoKTtcblxuICBsZXQge3ByZXNzUHJvcHN9ID0gdXNlUHJlc3Moe1xuICAgIGlzRGlzYWJsZWQsXG4gICAgb25QcmVzc1N0YXJ0KGUpIHtcbiAgICAgIGlmIChlLnBvaW50ZXJUeXBlID09PSAnbW91c2UnIHx8IGUucG9pbnRlclR5cGUgPT09ICd0b3VjaCcpIHtcbiAgICAgICAgaWYgKG9uTG9uZ1ByZXNzU3RhcnQpIHtcbiAgICAgICAgICBvbkxvbmdQcmVzc1N0YXJ0KHtcbiAgICAgICAgICAgIC4uLmUsXG4gICAgICAgICAgICB0eXBlOiAnbG9uZ3ByZXNzc3RhcnQnXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aW1lUmVmLmN1cnJlbnQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAvLyBQcmV2ZW50IG90aGVyIHVzZVByZXNzIGhhbmRsZXJzIGZyb20gYWxzbyBoYW5kbGluZyB0aGlzIGV2ZW50LlxuICAgICAgICAgIGUudGFyZ2V0LmRpc3BhdGNoRXZlbnQobmV3IFBvaW50ZXJFdmVudCgncG9pbnRlcmNhbmNlbCcsIHtidWJibGVzOiB0cnVlfSkpO1xuICAgICAgICAgIGlmIChvbkxvbmdQcmVzcykge1xuICAgICAgICAgICAgb25Mb25nUHJlc3Moe1xuICAgICAgICAgICAgICAuLi5lLFxuICAgICAgICAgICAgICB0eXBlOiAnbG9uZ3ByZXNzJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRpbWVSZWYuY3VycmVudCA9IG51bGw7XG4gICAgICAgIH0sIHRocmVzaG9sZCk7XG5cbiAgICAgICAgLy8gUHJldmVudCBjb250ZXh0IG1lbnUsIHdoaWNoIG1heSBiZSBvcGVuZWQgb24gbG9uZyBwcmVzcyBvbiB0b3VjaCBkZXZpY2VzXG4gICAgICAgIGlmIChlLnBvaW50ZXJUeXBlID09PSAndG91Y2gnKSB7XG4gICAgICAgICAgbGV0IG9uQ29udGV4dE1lbnUgPSBlID0+IHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgYWRkR2xvYmFsTGlzdGVuZXIoZS50YXJnZXQsICdjb250ZXh0bWVudScsIG9uQ29udGV4dE1lbnUsIHtvbmNlOiB0cnVlfSk7XG4gICAgICAgICAgYWRkR2xvYmFsTGlzdGVuZXIod2luZG93LCAncG9pbnRlcnVwJywgKCkgPT4ge1xuICAgICAgICAgICAgLy8gSWYgbm8gY29udGV4dG1lbnUgZXZlbnQgaXMgZmlyZWQgcXVpY2tseSBhZnRlciBwb2ludGVydXAsIHJlbW92ZSB0aGUgaGFuZGxlclxuICAgICAgICAgICAgLy8gc28gZnV0dXJlIGNvbnRleHQgbWVudSBldmVudHMgb3V0c2lkZSBhIGxvbmcgcHJlc3MgYXJlIG5vdCBwcmV2ZW50ZWQuXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgcmVtb3ZlR2xvYmFsTGlzdGVuZXIoZS50YXJnZXQsICdjb250ZXh0bWVudScsIG9uQ29udGV4dE1lbnUpO1xuICAgICAgICAgICAgfSwgMzApO1xuICAgICAgICAgIH0sIHtvbmNlOiB0cnVlfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIG9uUHJlc3NFbmQoZSkge1xuICAgICAgaWYgKHRpbWVSZWYuY3VycmVudCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGltZVJlZi5jdXJyZW50KTtcbiAgICAgIH1cblxuICAgICAgaWYgKG9uTG9uZ1ByZXNzRW5kICYmIChlLnBvaW50ZXJUeXBlID09PSAnbW91c2UnIHx8IGUucG9pbnRlclR5cGUgPT09ICd0b3VjaCcpKSB7XG4gICAgICAgIG9uTG9uZ1ByZXNzRW5kKHtcbiAgICAgICAgICAuLi5lLFxuICAgICAgICAgIHR5cGU6ICdsb25ncHJlc3NlbmQnXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgbGV0IGRlc2NyaXB0aW9uUHJvcHMgPSB1c2VEZXNjcmlwdGlvbihvbkxvbmdQcmVzcyAmJiAhaXNEaXNhYmxlZCA/IGFjY2Vzc2liaWxpdHlEZXNjcmlwdGlvbiA6IG51bGwpO1xuXG4gIHJldHVybiB7XG4gICAgbG9uZ1ByZXNzUHJvcHM6IG1lcmdlUHJvcHMocHJlc3NQcm9wcywgZGVzY3JpcHRpb25Qcm9wcylcbiAgfTtcbn1cbiIsIi8qXG4gKiBDb3B5cmlnaHQgMjAyMCBBZG9iZS4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICdMaWNlbnNlJyk7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weVxuICogb2YgdGhlIExpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlclxuICogdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gJ0FTIElTJyBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIFJFUFJFU0VOVEFUSU9OU1xuICogT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlXG4gKiBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7Zm9jdXNXaXRob3V0U2Nyb2xsaW5nLCBydW5BZnRlclRyYW5zaXRpb259IGZyb20gJ0ByZWFjdC1hcmlhL3V0aWxzJztcbmltcG9ydCB7Z2V0SW50ZXJhY3Rpb25Nb2RhbGl0eX0gZnJvbSAnQHJlYWN0LWFyaWEvaW50ZXJhY3Rpb25zJztcblxuLyoqXG4gKiBBIHV0aWxpdHkgZnVuY3Rpb24gdGhhdCBmb2N1c2VzIGFuIGVsZW1lbnQgd2hpbGUgYXZvaWRpbmcgdW5kZXNpcmVkIHNpZGUgZWZmZWN0cyBzdWNoXG4gKiBhcyBwYWdlIHNjcm9sbGluZyBhbmQgc2NyZWVuIHJlYWRlciBpc3N1ZXMgd2l0aCBDU1MgdHJhbnNpdGlvbnMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmb2N1c1NhZmVseShlbGVtZW50OiBIVE1MRWxlbWVudCkge1xuICAvLyBJZiB0aGUgdXNlciBpcyBpbnRlcmFjdGluZyB3aXRoIGEgdmlydHVhbCBjdXJzb3IsIGUuZy4gc2NyZWVuIHJlYWRlciwgdGhlblxuICAvLyB3YWl0IHVudGlsIGFmdGVyIGFueSBhbmltYXRlZCB0cmFuc2l0aW9ucyB0aGF0IGFyZSBjdXJyZW50bHkgb2NjdXJyaW5nIG9uXG4gIC8vIHRoZSBwYWdlIGJlZm9yZSBzaGlmdGluZyBmb2N1cy4gVGhpcyBhdm9pZHMgaXNzdWVzIHdpdGggVm9pY2VPdmVyIG9uIGlPU1xuICAvLyBjYXVzaW5nIHRoZSBwYWdlIHRvIHNjcm9sbCB3aGVuIG1vdmluZyBmb2N1cyBpZiB0aGUgZWxlbWVudCBpcyB0cmFuc2l0aW9uaW5nXG4gIC8vIGZyb20gb2ZmIHRoZSBzY3JlZW4uXG4gIGlmIChnZXRJbnRlcmFjdGlvbk1vZGFsaXR5KCkgPT09ICd2aXJ0dWFsJykge1xuICAgIGxldCBsYXN0Rm9jdXNlZEVsZW1lbnQgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xuICAgIHJ1bkFmdGVyVHJhbnNpdGlvbigoKSA9PiB7XG4gICAgICAvLyBJZiBmb2N1cyBkaWQgbm90IG1vdmUgYW5kIHRoZSBlbGVtZW50IGlzIHN0aWxsIGluIHRoZSBkb2N1bWVudCwgZm9jdXMgaXQuXG4gICAgICBpZiAoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PT0gbGFzdEZvY3VzZWRFbGVtZW50ICYmIGRvY3VtZW50LmNvbnRhaW5zKGVsZW1lbnQpKSB7XG4gICAgICAgIGZvY3VzV2l0aG91dFNjcm9sbGluZyhlbGVtZW50KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBmb2N1c1dpdGhvdXRTY3JvbGxpbmcoZWxlbWVudCk7XG4gIH1cbn1cbiIsIi8qXG4gKiBDb3B5cmlnaHQgMjAyMSBBZG9iZS4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5XG4gKiBvZiB0aGUgTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyXG4gKiB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBSRVBSRVNFTlRBVElPTlNcbiAqIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZVxuICogZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5mdW5jdGlvbiBpc1N0eWxlVmlzaWJsZShlbGVtZW50OiBFbGVtZW50KSB7XG4gIGlmICghKGVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkgJiYgIShlbGVtZW50IGluc3RhbmNlb2YgU1ZHRWxlbWVudCkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBsZXQge2Rpc3BsYXksIHZpc2liaWxpdHl9ID0gZWxlbWVudC5zdHlsZTtcblxuICBsZXQgaXNWaXNpYmxlID0gKFxuICAgIGRpc3BsYXkgIT09ICdub25lJyAmJlxuICAgIHZpc2liaWxpdHkgIT09ICdoaWRkZW4nICYmXG4gICAgdmlzaWJpbGl0eSAhPT0gJ2NvbGxhcHNlJ1xuICApO1xuXG4gIGlmIChpc1Zpc2libGUpIHtcbiAgICBjb25zdCB7Z2V0Q29tcHV0ZWRTdHlsZX0gPSBlbGVtZW50Lm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXc7XG4gICAgbGV0IHtkaXNwbGF5OiBjb21wdXRlZERpc3BsYXksIHZpc2liaWxpdHk6IGNvbXB1dGVkVmlzaWJpbGl0eX0gPSBnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpO1xuXG4gICAgaXNWaXNpYmxlID0gKFxuICAgICAgY29tcHV0ZWREaXNwbGF5ICE9PSAnbm9uZScgJiZcbiAgICAgIGNvbXB1dGVkVmlzaWJpbGl0eSAhPT0gJ2hpZGRlbicgJiZcbiAgICAgIGNvbXB1dGVkVmlzaWJpbGl0eSAhPT0gJ2NvbGxhcHNlJ1xuICAgICk7XG4gIH1cblxuICByZXR1cm4gaXNWaXNpYmxlO1xufVxuXG5mdW5jdGlvbiBpc0F0dHJpYnV0ZVZpc2libGUoZWxlbWVudDogRWxlbWVudCwgY2hpbGRFbGVtZW50PzogRWxlbWVudCkge1xuICByZXR1cm4gKFxuICAgICFlbGVtZW50Lmhhc0F0dHJpYnV0ZSgnaGlkZGVuJykgJiZcbiAgICAoZWxlbWVudC5ub2RlTmFtZSA9PT0gJ0RFVEFJTFMnICYmXG4gICAgICBjaGlsZEVsZW1lbnQgJiZcbiAgICAgIGNoaWxkRWxlbWVudC5ub2RlTmFtZSAhPT0gJ1NVTU1BUlknXG4gICAgICA/IGVsZW1lbnQuaGFzQXR0cmlidXRlKCdvcGVuJylcbiAgICAgIDogdHJ1ZSlcbiAgKTtcbn1cblxuLyoqXG4gKiBBZGFwdGVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL3Rlc3RpbmctbGlicmFyeS9qZXN0LWRvbSBhbmQgXG4gKiBodHRwczovL2dpdGh1Yi5jb20vdnVlanMvdnVlLXRlc3QtdXRpbHMtbmV4dC8uXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKiBAcGFyYW0gZWxlbWVudCAtIEVsZW1lbnQgdG8gZXZhbHVhdGUgZm9yIGRpc3BsYXkgb3IgdmlzaWJpbGl0eS5cbiAqLyAgXG5leHBvcnQgZnVuY3Rpb24gaXNFbGVtZW50VmlzaWJsZShlbGVtZW50OiBFbGVtZW50LCBjaGlsZEVsZW1lbnQ/OiBFbGVtZW50KSB7XG4gIHJldHVybiAoXG4gICAgZWxlbWVudC5ub2RlTmFtZSAhPT0gJyNjb21tZW50JyAmJlxuICAgIGlzU3R5bGVWaXNpYmxlKGVsZW1lbnQpICYmXG4gICAgaXNBdHRyaWJ1dGVWaXNpYmxlKGVsZW1lbnQsIGNoaWxkRWxlbWVudCkgJiZcbiAgICAoIWVsZW1lbnQucGFyZW50RWxlbWVudCB8fCBpc0VsZW1lbnRWaXNpYmxlKGVsZW1lbnQucGFyZW50RWxlbWVudCwgZWxlbWVudCkpXG4gICk7XG59XG4iLCIvKlxuICogQ29weXJpZ2h0IDIwMjAgQWRvYmUuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weVxuICogb2YgdGhlIExpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlclxuICogdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgUkVQUkVTRU5UQVRJT05TXG4gKiBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2VcbiAqIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtmb2N1c1NhZmVseX0gZnJvbSAnLi9mb2N1c1NhZmVseSc7XG5pbXBvcnQge2lzRWxlbWVudFZpc2libGV9IGZyb20gJy4vaXNFbGVtZW50VmlzaWJsZSc7XG5pbXBvcnQgUmVhY3QsIHtSZWFjdE5vZGUsIFJlZk9iamVjdCwgdXNlQ29udGV4dCwgdXNlRWZmZWN0LCB1c2VSZWZ9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7dXNlTGF5b3V0RWZmZWN0fSBmcm9tICdAcmVhY3QtYXJpYS91dGlscyc7XG5cbi8vIGltcG9ydCB7Rm9jdXNTY29wZSwgdXNlRm9jdXNTY29wZX0gZnJvbSAncmVhY3QtZXZlbnRzL2ZvY3VzLXNjb3BlJztcbi8vIGV4cG9ydCB7Rm9jdXNTY29wZX07XG5cbmludGVyZmFjZSBGb2N1c1Njb3BlUHJvcHMge1xuICAvKiogVGhlIGNvbnRlbnRzIG9mIHRoZSBmb2N1cyBzY29wZS4gKi9cbiAgY2hpbGRyZW46IFJlYWN0Tm9kZSxcblxuICAvKipcbiAgICogV2hldGhlciB0byBjb250YWluIGZvY3VzIGluc2lkZSB0aGUgc2NvcGUsIHNvIHVzZXJzIGNhbm5vdFxuICAgKiBtb3ZlIGZvY3VzIG91dHNpZGUsIGZvciBleGFtcGxlIGluIGEgbW9kYWwgZGlhbG9nLlxuICAgKi9cbiAgY29udGFpbj86IGJvb2xlYW4sXG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gcmVzdG9yZSBmb2N1cyBiYWNrIHRvIHRoZSBlbGVtZW50IHRoYXQgd2FzIGZvY3VzZWRcbiAgICogd2hlbiB0aGUgZm9jdXMgc2NvcGUgbW91bnRlZCwgYWZ0ZXIgdGhlIGZvY3VzIHNjb3BlIHVubW91bnRzLlxuICAgKi9cbiAgcmVzdG9yZUZvY3VzPzogYm9vbGVhbixcblxuICAvKiogV2hldGhlciB0byBhdXRvIGZvY3VzIHRoZSBmaXJzdCBmb2N1c2FibGUgZWxlbWVudCBpbiB0aGUgZm9jdXMgc2NvcGUgb24gbW91bnQuICovXG4gIGF1dG9Gb2N1cz86IGJvb2xlYW5cbn1cblxuaW50ZXJmYWNlIEZvY3VzTWFuYWdlck9wdGlvbnMge1xuICAvKiogVGhlIGVsZW1lbnQgdG8gc3RhcnQgc2VhcmNoaW5nIGZyb20uIFRoZSBjdXJyZW50bHkgZm9jdXNlZCBlbGVtZW50IGJ5IGRlZmF1bHQuICovXG4gIGZyb20/OiBIVE1MRWxlbWVudCxcbiAgLyoqIFdoZXRoZXIgdG8gb25seSBpbmNsdWRlIHRhYmJhYmxlIGVsZW1lbnRzLCBvciBhbGwgZm9jdXNhYmxlIGVsZW1lbnRzLiAqL1xuICB0YWJiYWJsZT86IGJvb2xlYW4sXG4gIC8qKiBXaGV0aGVyIGZvY3VzIHNob3VsZCB3cmFwIGFyb3VuZCB3aGVuIGl0IHJlYWNoZXMgdGhlIGVuZCBvZiB0aGUgc2NvcGUuICovXG4gIHdyYXA/OiBib29sZWFuLFxuICAvKiogQSBjYWxsYmFjayB0aGF0IGRldGVybWluZXMgd2hldGhlciB0aGUgZ2l2ZW4gZWxlbWVudCBpcyBmb2N1c2VkLiAqL1xuICBhY2NlcHQ/OiAobm9kZTogRWxlbWVudCkgPT4gYm9vbGVhblxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZvY3VzTWFuYWdlciB7XG4gIC8qKiBNb3ZlcyBmb2N1cyB0byB0aGUgbmV4dCBmb2N1c2FibGUgb3IgdGFiYmFibGUgZWxlbWVudCBpbiB0aGUgZm9jdXMgc2NvcGUuICovXG4gIGZvY3VzTmV4dChvcHRzPzogRm9jdXNNYW5hZ2VyT3B0aW9ucyk6IEhUTUxFbGVtZW50LFxuICAvKiogTW92ZXMgZm9jdXMgdG8gdGhlIHByZXZpb3VzIGZvY3VzYWJsZSBvciB0YWJiYWJsZSBlbGVtZW50IGluIHRoZSBmb2N1cyBzY29wZS4gKi9cbiAgZm9jdXNQcmV2aW91cyhvcHRzPzogRm9jdXNNYW5hZ2VyT3B0aW9ucyk6IEhUTUxFbGVtZW50LFxuICAvKiogTW92ZXMgZm9jdXMgdG8gdGhlIGZpcnN0IGZvY3VzYWJsZSBvciB0YWJiYWJsZSBlbGVtZW50IGluIHRoZSBmb2N1cyBzY29wZS4gKi9cbiAgZm9jdXNGaXJzdChvcHRzPzogRm9jdXNNYW5hZ2VyT3B0aW9ucyk6IEhUTUxFbGVtZW50LFxuICAgIC8qKiBNb3ZlcyBmb2N1cyB0byB0aGUgbGFzdCBmb2N1c2FibGUgb3IgdGFiYmFibGUgZWxlbWVudCBpbiB0aGUgZm9jdXMgc2NvcGUuICovXG4gIGZvY3VzTGFzdChvcHRzPzogRm9jdXNNYW5hZ2VyT3B0aW9ucyk6IEhUTUxFbGVtZW50XG59XG5cbnR5cGUgU2NvcGVSZWYgPSBSZWZPYmplY3Q8SFRNTEVsZW1lbnRbXT47XG5pbnRlcmZhY2UgSUZvY3VzQ29udGV4dCB7XG4gIHNjb3BlUmVmOiBTY29wZVJlZixcbiAgZm9jdXNNYW5hZ2VyOiBGb2N1c01hbmFnZXJcbn1cblxuY29uc3QgRm9jdXNDb250ZXh0ID0gUmVhY3QuY3JlYXRlQ29udGV4dDxJRm9jdXNDb250ZXh0PihudWxsKTtcblxubGV0IGFjdGl2ZVNjb3BlOiBTY29wZVJlZiA9IG51bGw7XG5sZXQgc2NvcGVzOiBNYXA8U2NvcGVSZWYsIFNjb3BlUmVmIHwgbnVsbD4gPSBuZXcgTWFwKCk7XG5cbi8vIFRoaXMgaXMgYSBoYWNreSBET00tYmFzZWQgaW1wbGVtZW50YXRpb24gb2YgYSBGb2N1c1Njb3BlIHVudGlsIHRoaXMgUkZDIGxhbmRzIGluIFJlYWN0OlxuLy8gaHR0cHM6Ly9naXRodWIuY29tL3JlYWN0anMvcmZjcy9wdWxsLzEwOVxuLy8gRm9yIG5vdywgaXQgcmVsaWVzIG9uIHRoZSBET00gdHJlZSBvcmRlciByYXRoZXIgdGhhbiB0aGUgUmVhY3QgdHJlZSBvcmRlciwgYW5kIGlzIHByb2JhYmx5XG4vLyBsZXNzIG9wdGltaXplZCBmb3IgcGVyZm9ybWFuY2UuXG5cbi8qKlxuICogQSBGb2N1c1Njb3BlIG1hbmFnZXMgZm9jdXMgZm9yIGl0cyBkZXNjZW5kYW50cy4gSXQgc3VwcG9ydHMgY29udGFpbmluZyBmb2N1cyBpbnNpZGVcbiAqIHRoZSBzY29wZSwgcmVzdG9yaW5nIGZvY3VzIHRvIHRoZSBwcmV2aW91c2x5IGZvY3VzZWQgZWxlbWVudCBvbiB1bm1vdW50LCBhbmQgYXV0b1xuICogZm9jdXNpbmcgY2hpbGRyZW4gb24gbW91bnQuIEl0IGFsc28gYWN0cyBhcyBhIGNvbnRhaW5lciBmb3IgYSBwcm9ncmFtbWF0aWMgZm9jdXNcbiAqIG1hbmFnZW1lbnQgaW50ZXJmYWNlIHRoYXQgY2FuIGJlIHVzZWQgdG8gbW92ZSBmb2N1cyBmb3J3YXJkIGFuZCBiYWNrIGluIHJlc3BvbnNlXG4gKiB0byB1c2VyIGV2ZW50cy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIEZvY3VzU2NvcGUocHJvcHM6IEZvY3VzU2NvcGVQcm9wcykge1xuICBsZXQge2NoaWxkcmVuLCBjb250YWluLCByZXN0b3JlRm9jdXMsIGF1dG9Gb2N1c30gPSBwcm9wcztcbiAgbGV0IHN0YXJ0UmVmID0gdXNlUmVmPEhUTUxTcGFuRWxlbWVudD4oKTtcbiAgbGV0IGVuZFJlZiA9IHVzZVJlZjxIVE1MU3BhbkVsZW1lbnQ+KCk7XG4gIGxldCBzY29wZVJlZiA9IHVzZVJlZjxIVE1MRWxlbWVudFtdPihbXSk7XG4gIGxldCBjdHggPSB1c2VDb250ZXh0KEZvY3VzQ29udGV4dCk7XG4gIGxldCBwYXJlbnRTY29wZSA9IGN0eD8uc2NvcGVSZWY7XG5cbiAgdXNlTGF5b3V0RWZmZWN0KCgpID0+IHtcbiAgICAvLyBGaW5kIGFsbCByZW5kZXJlZCBub2RlcyBiZXR3ZWVuIHRoZSBzZW50aW5lbHMgYW5kIGFkZCB0aGVtIHRvIHRoZSBzY29wZS5cbiAgICBsZXQgbm9kZSA9IHN0YXJ0UmVmLmN1cnJlbnQubmV4dFNpYmxpbmc7XG4gICAgbGV0IG5vZGVzID0gW107XG4gICAgd2hpbGUgKG5vZGUgJiYgbm9kZSAhPT0gZW5kUmVmLmN1cnJlbnQpIHtcbiAgICAgIG5vZGVzLnB1c2gobm9kZSk7XG4gICAgICBub2RlID0gbm9kZS5uZXh0U2libGluZztcbiAgICB9XG5cbiAgICBzY29wZVJlZi5jdXJyZW50ID0gbm9kZXM7XG4gIH0sIFtjaGlsZHJlbiwgcGFyZW50U2NvcGVdKTtcblxuICB1c2VMYXlvdXRFZmZlY3QoKCkgPT4ge1xuICAgIHNjb3Blcy5zZXQoc2NvcGVSZWYsIHBhcmVudFNjb3BlKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgLy8gUmVzdG9yZSB0aGUgYWN0aXZlIHNjb3BlIG9uIHVubW91bnQgaWYgdGhpcyBzY29wZSBvciBhIGRlc2NlbmRhbnQgc2NvcGUgaXMgYWN0aXZlLlxuICAgICAgLy8gUGFyZW50IGVmZmVjdCBjbGVhbnVwcyBydW4gYmVmb3JlIGNoaWxkcmVuLCBzbyB3ZSBuZWVkIHRvIGNoZWNrIGlmIHRoZVxuICAgICAgLy8gcGFyZW50IHNjb3BlIGFjdHVhbGx5IHN0aWxsIGV4aXN0cyBiZWZvcmUgcmVzdG9yaW5nIHRoZSBhY3RpdmUgc2NvcGUgdG8gaXQuXG4gICAgICBpZiAoXG4gICAgICAgIChzY29wZVJlZiA9PT0gYWN0aXZlU2NvcGUgfHwgaXNBbmNlc3RvclNjb3BlKHNjb3BlUmVmLCBhY3RpdmVTY29wZSkpICYmXG4gICAgICAgICghcGFyZW50U2NvcGUgfHwgc2NvcGVzLmhhcyhwYXJlbnRTY29wZSkpXG4gICAgICApIHtcbiAgICAgICAgYWN0aXZlU2NvcGUgPSBwYXJlbnRTY29wZTtcbiAgICAgIH1cbiAgICAgIHNjb3Blcy5kZWxldGUoc2NvcGVSZWYpO1xuICAgIH07XG4gIH0sIFtzY29wZVJlZiwgcGFyZW50U2NvcGVdKTtcblxuICB1c2VGb2N1c0NvbnRhaW5tZW50KHNjb3BlUmVmLCBjb250YWluKTtcbiAgdXNlUmVzdG9yZUZvY3VzKHNjb3BlUmVmLCByZXN0b3JlRm9jdXMsIGNvbnRhaW4pO1xuICB1c2VBdXRvRm9jdXMoc2NvcGVSZWYsIGF1dG9Gb2N1cyk7XG5cbiAgbGV0IGZvY3VzTWFuYWdlciA9IGNyZWF0ZUZvY3VzTWFuYWdlckZvclNjb3BlKHNjb3BlUmVmKTtcblxuICByZXR1cm4gKFxuICAgIDxGb2N1c0NvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3tzY29wZVJlZiwgZm9jdXNNYW5hZ2VyfX0+XG4gICAgICA8c3BhbiBkYXRhLWZvY3VzLXNjb3BlLXN0YXJ0IGhpZGRlbiByZWY9e3N0YXJ0UmVmfSAvPlxuICAgICAge2NoaWxkcmVufVxuICAgICAgPHNwYW4gZGF0YS1mb2N1cy1zY29wZS1lbmQgaGlkZGVuIHJlZj17ZW5kUmVmfSAvPlxuICAgIDwvRm9jdXNDb250ZXh0LlByb3ZpZGVyPlxuICApO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBGb2N1c01hbmFnZXIgaW50ZXJmYWNlIGZvciB0aGUgcGFyZW50IEZvY3VzU2NvcGUuXG4gKiBBIEZvY3VzTWFuYWdlciBjYW4gYmUgdXNlZCB0byBwcm9ncmFtbWF0aWNhbGx5IG1vdmUgZm9jdXMgd2l0aGluXG4gKiBhIEZvY3VzU2NvcGUsIGUuZy4gaW4gcmVzcG9uc2UgdG8gdXNlciBldmVudHMgbGlrZSBrZXlib2FyZCBuYXZpZ2F0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlRm9jdXNNYW5hZ2VyKCk6IEZvY3VzTWFuYWdlciB7XG4gIHJldHVybiB1c2VDb250ZXh0KEZvY3VzQ29udGV4dCk/LmZvY3VzTWFuYWdlcjtcbn1cblxuZnVuY3Rpb24gY3JlYXRlRm9jdXNNYW5hZ2VyRm9yU2NvcGUoc2NvcGVSZWY6IFJlYWN0LlJlZk9iamVjdDxIVE1MRWxlbWVudFtdPik6IEZvY3VzTWFuYWdlciB7XG4gIHJldHVybiB7XG4gICAgZm9jdXNOZXh0KG9wdHM6IEZvY3VzTWFuYWdlck9wdGlvbnMgPSB7fSkge1xuICAgICAgbGV0IHNjb3BlID0gc2NvcGVSZWYuY3VycmVudDtcbiAgICAgIGxldCB7ZnJvbSwgdGFiYmFibGUsIHdyYXB9ID0gb3B0cztcbiAgICAgIGxldCBub2RlID0gZnJvbSB8fCBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xuICAgICAgbGV0IHNlbnRpbmVsID0gc2NvcGVbMF0ucHJldmlvdXNFbGVtZW50U2libGluZztcbiAgICAgIGxldCB3YWxrZXIgPSBnZXRGb2N1c2FibGVUcmVlV2Fsa2VyKGdldFNjb3BlUm9vdChzY29wZSksIHt0YWJiYWJsZX0sIHNjb3BlKTtcbiAgICAgIHdhbGtlci5jdXJyZW50Tm9kZSA9IGlzRWxlbWVudEluU2NvcGUobm9kZSwgc2NvcGUpID8gbm9kZSA6IHNlbnRpbmVsO1xuICAgICAgbGV0IG5leHROb2RlID0gd2Fsa2VyLm5leHROb2RlKCkgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICBpZiAoIW5leHROb2RlICYmIHdyYXApIHtcbiAgICAgICAgd2Fsa2VyLmN1cnJlbnROb2RlID0gc2VudGluZWw7XG4gICAgICAgIG5leHROb2RlID0gd2Fsa2VyLm5leHROb2RlKCkgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICB9XG4gICAgICBpZiAobmV4dE5vZGUpIHtcbiAgICAgICAgZm9jdXNFbGVtZW50KG5leHROb2RlLCB0cnVlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXh0Tm9kZTtcbiAgICB9LFxuICAgIGZvY3VzUHJldmlvdXMob3B0czogRm9jdXNNYW5hZ2VyT3B0aW9ucyA9IHt9KSB7XG4gICAgICBsZXQgc2NvcGUgPSBzY29wZVJlZi5jdXJyZW50O1xuICAgICAgbGV0IHtmcm9tLCB0YWJiYWJsZSwgd3JhcH0gPSBvcHRzO1xuICAgICAgbGV0IG5vZGUgPSBmcm9tIHx8IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG4gICAgICBsZXQgc2VudGluZWwgPSBzY29wZVtzY29wZS5sZW5ndGggLSAxXS5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICBsZXQgd2Fsa2VyID0gZ2V0Rm9jdXNhYmxlVHJlZVdhbGtlcihnZXRTY29wZVJvb3Qoc2NvcGUpLCB7dGFiYmFibGV9LCBzY29wZSk7XG4gICAgICB3YWxrZXIuY3VycmVudE5vZGUgPSBpc0VsZW1lbnRJblNjb3BlKG5vZGUsIHNjb3BlKSA/IG5vZGUgOiBzZW50aW5lbDtcbiAgICAgIGxldCBwcmV2aW91c05vZGUgPSB3YWxrZXIucHJldmlvdXNOb2RlKCkgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICBpZiAoIXByZXZpb3VzTm9kZSAmJiB3cmFwKSB7XG4gICAgICAgIHdhbGtlci5jdXJyZW50Tm9kZSA9IHNlbnRpbmVsO1xuICAgICAgICBwcmV2aW91c05vZGUgPSB3YWxrZXIucHJldmlvdXNOb2RlKCkgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICB9XG4gICAgICBpZiAocHJldmlvdXNOb2RlKSB7XG4gICAgICAgIGZvY3VzRWxlbWVudChwcmV2aW91c05vZGUsIHRydWUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHByZXZpb3VzTm9kZTtcbiAgICB9LFxuICAgIGZvY3VzRmlyc3Qob3B0cyA9IHt9KSB7XG4gICAgICBsZXQgc2NvcGUgPSBzY29wZVJlZi5jdXJyZW50O1xuICAgICAgbGV0IHt0YWJiYWJsZX0gPSBvcHRzO1xuICAgICAgbGV0IHdhbGtlciA9IGdldEZvY3VzYWJsZVRyZWVXYWxrZXIoZ2V0U2NvcGVSb290KHNjb3BlKSwge3RhYmJhYmxlfSwgc2NvcGUpO1xuICAgICAgd2Fsa2VyLmN1cnJlbnROb2RlID0gc2NvcGVbMF0ucHJldmlvdXNFbGVtZW50U2libGluZztcbiAgICAgIGxldCBuZXh0Tm9kZSA9IHdhbGtlci5uZXh0Tm9kZSgpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgaWYgKG5leHROb2RlKSB7XG4gICAgICAgIGZvY3VzRWxlbWVudChuZXh0Tm9kZSwgdHJ1ZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbmV4dE5vZGU7XG4gICAgfSxcbiAgICBmb2N1c0xhc3Qob3B0cyA9IHt9KSB7XG4gICAgICBsZXQgc2NvcGUgPSBzY29wZVJlZi5jdXJyZW50O1xuICAgICAgbGV0IHt0YWJiYWJsZX0gPSBvcHRzO1xuICAgICAgbGV0IHdhbGtlciA9IGdldEZvY3VzYWJsZVRyZWVXYWxrZXIoZ2V0U2NvcGVSb290KHNjb3BlKSwge3RhYmJhYmxlfSwgc2NvcGUpO1xuICAgICAgd2Fsa2VyLmN1cnJlbnROb2RlID0gc2NvcGVbc2NvcGUubGVuZ3RoIC0gMV0ubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgICAgbGV0IHByZXZpb3VzTm9kZSA9IHdhbGtlci5wcmV2aW91c05vZGUoKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgIGlmIChwcmV2aW91c05vZGUpIHtcbiAgICAgICAgZm9jdXNFbGVtZW50KHByZXZpb3VzTm9kZSwgdHJ1ZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcHJldmlvdXNOb2RlO1xuICAgIH1cbiAgfTtcbn1cblxuY29uc3QgZm9jdXNhYmxlRWxlbWVudHMgPSBbXG4gICdpbnB1dDpub3QoW2Rpc2FibGVkXSk6bm90KFt0eXBlPWhpZGRlbl0pJyxcbiAgJ3NlbGVjdDpub3QoW2Rpc2FibGVkXSknLFxuICAndGV4dGFyZWE6bm90KFtkaXNhYmxlZF0pJyxcbiAgJ2J1dHRvbjpub3QoW2Rpc2FibGVkXSknLFxuICAnYVtocmVmXScsXG4gICdhcmVhW2hyZWZdJyxcbiAgJ3N1bW1hcnknLFxuICAnaWZyYW1lJyxcbiAgJ29iamVjdCcsXG4gICdlbWJlZCcsXG4gICdhdWRpb1tjb250cm9sc10nLFxuICAndmlkZW9bY29udHJvbHNdJyxcbiAgJ1tjb250ZW50ZWRpdGFibGVdJ1xuXTtcblxuY29uc3QgRk9DVVNBQkxFX0VMRU1FTlRfU0VMRUNUT1IgPSBmb2N1c2FibGVFbGVtZW50cy5qb2luKCc6bm90KFtoaWRkZW5dKSwnKSArICcsW3RhYmluZGV4XTpub3QoW2Rpc2FibGVkXSk6bm90KFtoaWRkZW5dKSc7XG5cbmZvY3VzYWJsZUVsZW1lbnRzLnB1c2goJ1t0YWJpbmRleF06bm90KFt0YWJpbmRleD1cIi0xXCJdKTpub3QoW2Rpc2FibGVkXSknKTtcbmNvbnN0IFRBQkJBQkxFX0VMRU1FTlRfU0VMRUNUT1IgPSBmb2N1c2FibGVFbGVtZW50cy5qb2luKCc6bm90KFtoaWRkZW5dKTpub3QoW3RhYmluZGV4PVwiLTFcIl0pLCcpO1xuXG5mdW5jdGlvbiBnZXRTY29wZVJvb3Qoc2NvcGU6IEhUTUxFbGVtZW50W10pIHtcbiAgcmV0dXJuIHNjb3BlWzBdLnBhcmVudEVsZW1lbnQ7XG59XG5cbmZ1bmN0aW9uIHVzZUZvY3VzQ29udGFpbm1lbnQoc2NvcGVSZWY6IFJlZk9iamVjdDxIVE1MRWxlbWVudFtdPiwgY29udGFpbjogYm9vbGVhbikge1xuICBsZXQgZm9jdXNlZE5vZGUgPSB1c2VSZWY8SFRNTEVsZW1lbnQ+KCk7XG5cbiAgbGV0IHJhZiA9IHVzZVJlZihudWxsKTtcbiAgdXNlTGF5b3V0RWZmZWN0KCgpID0+IHtcbiAgICBsZXQgc2NvcGUgPSBzY29wZVJlZi5jdXJyZW50O1xuICAgIGlmICghY29udGFpbikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEhhbmRsZSB0aGUgVGFiIGtleSB0byBjb250YWluIGZvY3VzIHdpdGhpbiB0aGUgc2NvcGVcbiAgICBsZXQgb25LZXlEb3duID0gKGUpID0+IHtcbiAgICAgIGlmIChlLmtleSAhPT0gJ1RhYicgfHwgZS5hbHRLZXkgfHwgZS5jdHJsS2V5IHx8IGUubWV0YUtleSB8fCBzY29wZVJlZiAhPT0gYWN0aXZlU2NvcGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBsZXQgZm9jdXNlZEVsZW1lbnQgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50IGFzIEhUTUxFbGVtZW50O1xuICAgICAgbGV0IHNjb3BlID0gc2NvcGVSZWYuY3VycmVudDtcbiAgICAgIGlmICghaXNFbGVtZW50SW5TY29wZShmb2N1c2VkRWxlbWVudCwgc2NvcGUpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgbGV0IHdhbGtlciA9IGdldEZvY3VzYWJsZVRyZWVXYWxrZXIoZ2V0U2NvcGVSb290KHNjb3BlKSwge3RhYmJhYmxlOiB0cnVlfSwgc2NvcGUpO1xuICAgICAgd2Fsa2VyLmN1cnJlbnROb2RlID0gZm9jdXNlZEVsZW1lbnQ7XG4gICAgICBsZXQgbmV4dEVsZW1lbnQgPSAoZS5zaGlmdEtleSA/IHdhbGtlci5wcmV2aW91c05vZGUoKSA6IHdhbGtlci5uZXh0Tm9kZSgpKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgIGlmICghbmV4dEVsZW1lbnQpIHtcbiAgICAgICAgd2Fsa2VyLmN1cnJlbnROb2RlID0gZS5zaGlmdEtleSA/IHNjb3BlW3Njb3BlLmxlbmd0aCAtIDFdLm5leHRFbGVtZW50U2libGluZyA6IHNjb3BlWzBdLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XG4gICAgICAgIG5leHRFbGVtZW50ID0gKGUuc2hpZnRLZXkgPyB3YWxrZXIucHJldmlvdXNOb2RlKCkgOiB3YWxrZXIubmV4dE5vZGUoKSkgIGFzIEhUTUxFbGVtZW50O1xuICAgICAgfVxuXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBpZiAobmV4dEVsZW1lbnQpIHtcbiAgICAgICAgZm9jdXNFbGVtZW50KG5leHRFbGVtZW50LCB0cnVlKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgbGV0IG9uRm9jdXMgPSAoZSkgPT4ge1xuICAgICAgLy8gSWYgZm9jdXNpbmcgYW4gZWxlbWVudCBpbiBhIGNoaWxkIHNjb3BlIG9mIHRoZSBjdXJyZW50bHkgYWN0aXZlIHNjb3BlLCB0aGUgY2hpbGQgYmVjb21lcyBhY3RpdmUuXG4gICAgICAvLyBNb3Zpbmcgb3V0IG9mIHRoZSBhY3RpdmUgc2NvcGUgdG8gYW4gYW5jZXN0b3IgaXMgbm90IGFsbG93ZWQuXG4gICAgICBpZiAoIWFjdGl2ZVNjb3BlIHx8IGlzQW5jZXN0b3JTY29wZShhY3RpdmVTY29wZSwgc2NvcGVSZWYpKSB7XG4gICAgICAgIGFjdGl2ZVNjb3BlID0gc2NvcGVSZWY7XG4gICAgICAgIGZvY3VzZWROb2RlLmN1cnJlbnQgPSBlLnRhcmdldDtcbiAgICAgIH0gZWxzZSBpZiAoc2NvcGVSZWYgPT09IGFjdGl2ZVNjb3BlICYmICFpc0VsZW1lbnRJbkNoaWxkU2NvcGUoZS50YXJnZXQsIHNjb3BlUmVmKSkge1xuICAgICAgICAvLyBJZiBhIGZvY3VzIGV2ZW50IG9jY3VycyBvdXRzaWRlIHRoZSBhY3RpdmUgc2NvcGUgKGUuZy4gdXNlciB0YWJzIGZyb20gYnJvd3NlciBsb2NhdGlvbiBiYXIpLFxuICAgICAgICAvLyByZXN0b3JlIGZvY3VzIHRvIHRoZSBwcmV2aW91c2x5IGZvY3VzZWQgbm9kZSBvciB0aGUgZmlyc3QgdGFiYmFibGUgZWxlbWVudCBpbiB0aGUgYWN0aXZlIHNjb3BlLlxuICAgICAgICBpZiAoZm9jdXNlZE5vZGUuY3VycmVudCkge1xuICAgICAgICAgIGZvY3VzZWROb2RlLmN1cnJlbnQuZm9jdXMoKTtcbiAgICAgICAgfSBlbHNlIGlmIChhY3RpdmVTY29wZSkge1xuICAgICAgICAgIGZvY3VzRmlyc3RJblNjb3BlKGFjdGl2ZVNjb3BlLmN1cnJlbnQpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHNjb3BlUmVmID09PSBhY3RpdmVTY29wZSkge1xuICAgICAgICBmb2N1c2VkTm9kZS5jdXJyZW50ID0gZS50YXJnZXQ7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGxldCBvbkJsdXIgPSAoZSkgPT4ge1xuICAgICAgLy8gRmlyZWZveCBkb2Vzbid0IHNoaWZ0IGZvY3VzIGJhY2sgdG8gdGhlIERpYWxvZyBwcm9wZXJseSB3aXRob3V0IHRoaXNcbiAgICAgIHJhZi5jdXJyZW50ID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgLy8gVXNlIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgaW5zdGVhZCBvZiBlLnJlbGF0ZWRUYXJnZXQgc28gd2UgY2FuIHRlbGwgaWYgdXNlciBjbGlja2VkIGludG8gaWZyYW1lXG4gICAgICAgIGlmIChzY29wZVJlZiA9PT0gYWN0aXZlU2NvcGUgJiYgIWlzRWxlbWVudEluQ2hpbGRTY29wZShkb2N1bWVudC5hY3RpdmVFbGVtZW50LCBzY29wZVJlZikpIHtcbiAgICAgICAgICBhY3RpdmVTY29wZSA9IHNjb3BlUmVmO1xuICAgICAgICAgIGZvY3VzZWROb2RlLmN1cnJlbnQgPSBlLnRhcmdldDtcbiAgICAgICAgICBmb2N1c2VkTm9kZS5jdXJyZW50LmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgb25LZXlEb3duLCBmYWxzZSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXNpbicsIG9uRm9jdXMsIGZhbHNlKTtcbiAgICBzY29wZS5mb3JFYWNoKGVsZW1lbnQgPT4gZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdmb2N1c2luJywgb25Gb2N1cywgZmFsc2UpKTtcbiAgICBzY29wZS5mb3JFYWNoKGVsZW1lbnQgPT4gZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdmb2N1c291dCcsIG9uQmx1ciwgZmFsc2UpKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIG9uS2V5RG93biwgZmFsc2UpO1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignZm9jdXNpbicsIG9uRm9jdXMsIGZhbHNlKTtcbiAgICAgIHNjb3BlLmZvckVhY2goZWxlbWVudCA9PiBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZvY3VzaW4nLCBvbkZvY3VzLCBmYWxzZSkpO1xuICAgICAgc2NvcGUuZm9yRWFjaChlbGVtZW50ID0+IGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignZm9jdXNvdXQnLCBvbkJsdXIsIGZhbHNlKSk7XG4gICAgfTtcbiAgfSwgW3Njb3BlUmVmLCBjb250YWluXSk7XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGFycm93LWJvZHktc3R5bGVcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICByZXR1cm4gKCkgPT4gY2FuY2VsQW5pbWF0aW9uRnJhbWUocmFmLmN1cnJlbnQpO1xuICB9LCBbcmFmXSk7XG59XG5cbmZ1bmN0aW9uIGlzRWxlbWVudEluQW55U2NvcGUoZWxlbWVudDogRWxlbWVudCkge1xuICBmb3IgKGxldCBzY29wZSBvZiBzY29wZXMua2V5cygpKSB7XG4gICAgaWYgKGlzRWxlbWVudEluU2NvcGUoZWxlbWVudCwgc2NvcGUuY3VycmVudCkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIGlzRWxlbWVudEluU2NvcGUoZWxlbWVudDogRWxlbWVudCwgc2NvcGU6IEhUTUxFbGVtZW50W10pIHtcbiAgcmV0dXJuIHNjb3BlLnNvbWUobm9kZSA9PiBub2RlLmNvbnRhaW5zKGVsZW1lbnQpKTtcbn1cblxuZnVuY3Rpb24gaXNFbGVtZW50SW5DaGlsZFNjb3BlKGVsZW1lbnQ6IEVsZW1lbnQsIHNjb3BlOiBTY29wZVJlZikge1xuICAvLyBub2RlLmNvbnRhaW5zIGluIGlzRWxlbWVudEluU2NvcGUgY292ZXJzIGNoaWxkIHNjb3BlcyB0aGF0IGFyZSBhbHNvIERPTSBjaGlsZHJlbixcbiAgLy8gYnV0IGRvZXMgbm90IGNvdmVyIGNoaWxkIHNjb3BlcyBpbiBwb3J0YWxzLlxuICBmb3IgKGxldCBzIG9mIHNjb3Blcy5rZXlzKCkpIHtcbiAgICBpZiAoKHMgPT09IHNjb3BlIHx8IGlzQW5jZXN0b3JTY29wZShzY29wZSwgcykpICYmIGlzRWxlbWVudEluU2NvcGUoZWxlbWVudCwgcy5jdXJyZW50KSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiBpc0FuY2VzdG9yU2NvcGUoYW5jZXN0b3I6IFNjb3BlUmVmLCBzY29wZTogU2NvcGVSZWYpIHtcbiAgbGV0IHBhcmVudCA9IHNjb3Blcy5nZXQoc2NvcGUpO1xuICBpZiAoIXBhcmVudCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlmIChwYXJlbnQgPT09IGFuY2VzdG9yKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICByZXR1cm4gaXNBbmNlc3RvclNjb3BlKGFuY2VzdG9yLCBwYXJlbnQpO1xufVxuXG5mdW5jdGlvbiBmb2N1c0VsZW1lbnQoZWxlbWVudDogSFRNTEVsZW1lbnQgfCBudWxsLCBzY3JvbGwgPSBmYWxzZSkge1xuICBpZiAoZWxlbWVudCAhPSBudWxsICYmICFzY3JvbGwpIHtcbiAgICB0cnkge1xuICAgICAgZm9jdXNTYWZlbHkoZWxlbWVudCk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAvLyBpZ25vcmVcbiAgICB9XG4gIH0gZWxzZSBpZiAoZWxlbWVudCAhPSBudWxsKSB7XG4gICAgdHJ5IHtcbiAgICAgIGVsZW1lbnQuZm9jdXMoKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIC8vIGlnbm9yZVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBmb2N1c0ZpcnN0SW5TY29wZShzY29wZTogSFRNTEVsZW1lbnRbXSkge1xuICBsZXQgc2VudGluZWwgPSBzY29wZVswXS5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xuICBsZXQgd2Fsa2VyID0gZ2V0Rm9jdXNhYmxlVHJlZVdhbGtlcihnZXRTY29wZVJvb3Qoc2NvcGUpLCB7dGFiYmFibGU6IHRydWV9LCBzY29wZSk7XG4gIHdhbGtlci5jdXJyZW50Tm9kZSA9IHNlbnRpbmVsO1xuICBmb2N1c0VsZW1lbnQod2Fsa2VyLm5leHROb2RlKCkgYXMgSFRNTEVsZW1lbnQpO1xufVxuXG5mdW5jdGlvbiB1c2VBdXRvRm9jdXMoc2NvcGVSZWY6IFJlZk9iamVjdDxIVE1MRWxlbWVudFtdPiwgYXV0b0ZvY3VzOiBib29sZWFuKSB7XG4gIGNvbnN0IGF1dG9Gb2N1c1JlZiA9IFJlYWN0LnVzZVJlZihhdXRvRm9jdXMpO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChhdXRvRm9jdXNSZWYuY3VycmVudCkge1xuICAgICAgYWN0aXZlU2NvcGUgPSBzY29wZVJlZjtcbiAgICAgIGlmICghaXNFbGVtZW50SW5TY29wZShkb2N1bWVudC5hY3RpdmVFbGVtZW50LCBhY3RpdmVTY29wZS5jdXJyZW50KSkge1xuICAgICAgICBmb2N1c0ZpcnN0SW5TY29wZShzY29wZVJlZi5jdXJyZW50KTtcbiAgICAgIH1cbiAgICB9XG4gICAgYXV0b0ZvY3VzUmVmLmN1cnJlbnQgPSBmYWxzZTtcbiAgfSwgW10pO1xufVxuXG5mdW5jdGlvbiB1c2VSZXN0b3JlRm9jdXMoc2NvcGVSZWY6IFJlZk9iamVjdDxIVE1MRWxlbWVudFtdPiwgcmVzdG9yZUZvY3VzOiBib29sZWFuLCBjb250YWluOiBib29sZWFuKSB7XG4gIC8vIGNyZWF0ZSBhIHJlZiBkdXJpbmcgcmVuZGVyIGluc3RlYWQgb2YgdXNlTGF5b3V0RWZmZWN0IHNvIHRoZSBhY3RpdmUgZWxlbWVudCBpcyBzYXZlZCBiZWZvcmUgYSBjaGlsZCB3aXRoIGF1dG9Gb2N1cz10cnVlIG1vdW50cy5cbiAgY29uc3Qgbm9kZVRvUmVzdG9yZVJlZiA9IHVzZVJlZih0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnID8gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCBhcyBIVE1MRWxlbWVudCA6IG51bGwpO1xuXG4gIC8vIHVzZUxheW91dEVmZmVjdCBpbnN0ZWFkIG9mIHVzZUVmZmVjdCBzbyB0aGUgYWN0aXZlIGVsZW1lbnQgaXMgc2F2ZWQgc3luY2hyb25vdXNseSBpbnN0ZWFkIG9mIGFzeW5jaHJvbm91c2x5LlxuICB1c2VMYXlvdXRFZmZlY3QoKCkgPT4ge1xuICAgIGxldCBub2RlVG9SZXN0b3JlID0gbm9kZVRvUmVzdG9yZVJlZi5jdXJyZW50O1xuICAgIGlmICghcmVzdG9yZUZvY3VzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIHRoZSBUYWIga2V5IHNvIHRoYXQgdGFiYmluZyBvdXQgb2YgdGhlIHNjb3BlIGdvZXMgdG8gdGhlIG5leHQgZWxlbWVudFxuICAgIC8vIGFmdGVyIHRoZSBub2RlIHRoYXQgaGFkIGZvY3VzIHdoZW4gdGhlIHNjb3BlIG1vdW50ZWQuIFRoaXMgaXMgaW1wb3J0YW50IHdoZW5cbiAgICAvLyB1c2luZyBwb3J0YWxzIGZvciBvdmVybGF5cywgc28gdGhhdCBmb2N1cyBnb2VzIHRvIHRoZSBleHBlY3RlZCBlbGVtZW50IHdoZW5cbiAgICAvLyB0YWJiaW5nIG91dCBvZiB0aGUgb3ZlcmxheS5cbiAgICBsZXQgb25LZXlEb3duID0gKGU6IEtleWJvYXJkRXZlbnQpID0+IHtcbiAgICAgIGlmIChlLmtleSAhPT0gJ1RhYicgfHwgZS5hbHRLZXkgfHwgZS5jdHJsS2V5IHx8IGUubWV0YUtleSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGxldCBmb2N1c2VkRWxlbWVudCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICBpZiAoIWlzRWxlbWVudEluU2NvcGUoZm9jdXNlZEVsZW1lbnQsIHNjb3BlUmVmLmN1cnJlbnQpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gQ3JlYXRlIGEgRE9NIHRyZWUgd2Fsa2VyIHRoYXQgbWF0Y2hlcyBhbGwgdGFiYmFibGUgZWxlbWVudHNcbiAgICAgIGxldCB3YWxrZXIgPSBnZXRGb2N1c2FibGVUcmVlV2Fsa2VyKGRvY3VtZW50LmJvZHksIHt0YWJiYWJsZTogdHJ1ZX0pO1xuXG4gICAgICAvLyBGaW5kIHRoZSBuZXh0IHRhYmJhYmxlIGVsZW1lbnQgYWZ0ZXIgdGhlIGN1cnJlbnRseSBmb2N1c2VkIGVsZW1lbnRcbiAgICAgIHdhbGtlci5jdXJyZW50Tm9kZSA9IGZvY3VzZWRFbGVtZW50O1xuICAgICAgbGV0IG5leHRFbGVtZW50ID0gKGUuc2hpZnRLZXkgPyB3YWxrZXIucHJldmlvdXNOb2RlKCkgOiB3YWxrZXIubmV4dE5vZGUoKSkgYXMgSFRNTEVsZW1lbnQ7XG5cbiAgICAgIGlmICghZG9jdW1lbnQuYm9keS5jb250YWlucyhub2RlVG9SZXN0b3JlKSB8fCBub2RlVG9SZXN0b3JlID09PSBkb2N1bWVudC5ib2R5KSB7XG4gICAgICAgIG5vZGVUb1Jlc3RvcmUgPSBudWxsO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiB0aGVyZSBpcyBubyBuZXh0IGVsZW1lbnQsIG9yIGl0IGlzIG91dHNpZGUgdGhlIGN1cnJlbnQgc2NvcGUsIG1vdmUgZm9jdXMgdG8gdGhlXG4gICAgICAvLyBuZXh0IGVsZW1lbnQgYWZ0ZXIgdGhlIG5vZGUgdG8gcmVzdG9yZSB0byBpbnN0ZWFkLlxuICAgICAgaWYgKCghbmV4dEVsZW1lbnQgfHwgIWlzRWxlbWVudEluU2NvcGUobmV4dEVsZW1lbnQsIHNjb3BlUmVmLmN1cnJlbnQpKSAmJiBub2RlVG9SZXN0b3JlKSB7XG4gICAgICAgIHdhbGtlci5jdXJyZW50Tm9kZSA9IG5vZGVUb1Jlc3RvcmU7XG5cbiAgICAgICAgLy8gU2tpcCBvdmVyIGVsZW1lbnRzIHdpdGhpbiB0aGUgc2NvcGUsIGluIGNhc2UgdGhlIHNjb3BlIGltbWVkaWF0ZWx5IGZvbGxvd3MgdGhlIG5vZGUgdG8gcmVzdG9yZS5cbiAgICAgICAgZG8ge1xuICAgICAgICAgIG5leHRFbGVtZW50ID0gKGUuc2hpZnRLZXkgPyB3YWxrZXIucHJldmlvdXNOb2RlKCkgOiB3YWxrZXIubmV4dE5vZGUoKSkgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIH0gd2hpbGUgKGlzRWxlbWVudEluU2NvcGUobmV4dEVsZW1lbnQsIHNjb3BlUmVmLmN1cnJlbnQpKTtcblxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIGlmIChuZXh0RWxlbWVudCkge1xuICAgICAgICAgIGZvY3VzRWxlbWVudChuZXh0RWxlbWVudCwgdHJ1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgIC8vIElmIHRoZXJlIGlzIG5vIG5leHQgZWxlbWVudCBhbmQgdGhlIG5vZGVUb1Jlc3RvcmUgaXNuJ3Qgd2l0aGluIGEgRm9jdXNTY29wZSAoaS5lLiB3ZSBhcmUgbGVhdmluZyB0aGUgdG9wIGxldmVsIGZvY3VzIHNjb3BlKVxuICAgICAgICAgICAvLyB0aGVuIG1vdmUgZm9jdXMgdG8gdGhlIGJvZHkuXG4gICAgICAgICAgIC8vIE90aGVyd2lzZSByZXN0b3JlIGZvY3VzIHRvIHRoZSBub2RlVG9SZXN0b3JlIChlLmcgbWVudSB3aXRoaW4gYSBwb3BvdmVyIC0+IHRhYmJpbmcgdG8gY2xvc2UgdGhlIG1lbnUgc2hvdWxkIG1vdmUgZm9jdXMgdG8gbWVudSB0cmlnZ2VyKVxuICAgICAgICAgIGlmICghaXNFbGVtZW50SW5BbnlTY29wZShub2RlVG9SZXN0b3JlKSkge1xuICAgICAgICAgICAgZm9jdXNlZEVsZW1lbnQuYmx1cigpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb2N1c0VsZW1lbnQobm9kZVRvUmVzdG9yZSwgdHJ1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIGlmICghY29udGFpbikge1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIG9uS2V5RG93biwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlmICghY29udGFpbikge1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgb25LZXlEb3duLCB0cnVlKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHJlc3RvcmVGb2N1cyAmJiBub2RlVG9SZXN0b3JlICYmIGlzRWxlbWVudEluU2NvcGUoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCwgc2NvcGVSZWYuY3VycmVudCkpIHtcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICBpZiAoZG9jdW1lbnQuYm9keS5jb250YWlucyhub2RlVG9SZXN0b3JlKSkge1xuICAgICAgICAgICAgZm9jdXNFbGVtZW50KG5vZGVUb1Jlc3RvcmUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcbiAgfSwgW3Njb3BlUmVmLCByZXN0b3JlRm9jdXMsIGNvbnRhaW5dKTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBbVHJlZVdhbGtlcl17QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1RyZWVXYWxrZXJ9XG4gKiB0aGF0IG1hdGNoZXMgYWxsIGZvY3VzYWJsZS90YWJiYWJsZSBlbGVtZW50cy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEZvY3VzYWJsZVRyZWVXYWxrZXIocm9vdDogSFRNTEVsZW1lbnQsIG9wdHM/OiBGb2N1c01hbmFnZXJPcHRpb25zLCBzY29wZT86IEhUTUxFbGVtZW50W10pIHtcbiAgbGV0IHNlbGVjdG9yID0gb3B0cz8udGFiYmFibGUgPyBUQUJCQUJMRV9FTEVNRU5UX1NFTEVDVE9SIDogRk9DVVNBQkxFX0VMRU1FTlRfU0VMRUNUT1I7XG4gIGxldCB3YWxrZXIgPSBkb2N1bWVudC5jcmVhdGVUcmVlV2Fsa2VyKFxuICAgIHJvb3QsXG4gICAgTm9kZUZpbHRlci5TSE9XX0VMRU1FTlQsXG4gICAge1xuICAgICAgYWNjZXB0Tm9kZShub2RlKSB7XG4gICAgICAgIC8vIFNraXAgbm9kZXMgaW5zaWRlIHRoZSBzdGFydGluZyBub2RlLlxuICAgICAgICBpZiAob3B0cz8uZnJvbT8uY29udGFpbnMobm9kZSkpIHtcbiAgICAgICAgICByZXR1cm4gTm9kZUZpbHRlci5GSUxURVJfUkVKRUNUO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKChub2RlIGFzIEhUTUxFbGVtZW50KS5tYXRjaGVzKHNlbGVjdG9yKVxuICAgICAgICAgICYmIGlzRWxlbWVudFZpc2libGUobm9kZSBhcyBIVE1MRWxlbWVudClcbiAgICAgICAgICAmJiAoIXNjb3BlIHx8IGlzRWxlbWVudEluU2NvcGUobm9kZSBhcyBIVE1MRWxlbWVudCwgc2NvcGUpKVxuICAgICAgICAgICYmICghb3B0cz8uYWNjZXB0IHx8IG9wdHMuYWNjZXB0KG5vZGUgYXMgRWxlbWVudCkpXG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybiBOb2RlRmlsdGVyLkZJTFRFUl9BQ0NFUFQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gTm9kZUZpbHRlci5GSUxURVJfU0tJUDtcbiAgICAgIH1cbiAgICB9XG4gICk7XG5cbiAgaWYgKG9wdHM/LmZyb20pIHtcbiAgICB3YWxrZXIuY3VycmVudE5vZGUgPSBvcHRzLmZyb207XG4gIH1cblxuICByZXR1cm4gd2Fsa2VyO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBGb2N1c01hbmFnZXIgb2JqZWN0IHRoYXQgY2FuIGJlIHVzZWQgdG8gbW92ZSBmb2N1cyB3aXRoaW4gYW4gZWxlbWVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUZvY3VzTWFuYWdlcihyZWY6IFJlZk9iamVjdDxIVE1MRWxlbWVudD4sIGRlZmF1bHRPcHRpb25zOiBGb2N1c01hbmFnZXJPcHRpb25zID0ge30pOiBGb2N1c01hbmFnZXIge1xuICByZXR1cm4ge1xuICAgIGZvY3VzTmV4dChvcHRzOiBGb2N1c01hbmFnZXJPcHRpb25zID0ge30pIHtcbiAgICAgIGxldCByb290ID0gcmVmLmN1cnJlbnQ7XG4gICAgICBpZiAoIXJvb3QpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgbGV0IHtmcm9tLCB0YWJiYWJsZSA9IGRlZmF1bHRPcHRpb25zLnRhYmJhYmxlLCB3cmFwID0gZGVmYXVsdE9wdGlvbnMud3JhcCwgYWNjZXB0ID0gZGVmYXVsdE9wdGlvbnMuYWNjZXB0fSA9IG9wdHM7XG4gICAgICBsZXQgbm9kZSA9IGZyb20gfHwgZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcbiAgICAgIGxldCB3YWxrZXIgPSBnZXRGb2N1c2FibGVUcmVlV2Fsa2VyKHJvb3QsIHt0YWJiYWJsZSwgYWNjZXB0fSk7XG4gICAgICBpZiAocm9vdC5jb250YWlucyhub2RlKSkge1xuICAgICAgICB3YWxrZXIuY3VycmVudE5vZGUgPSBub2RlO1xuICAgICAgfVxuICAgICAgbGV0IG5leHROb2RlID0gd2Fsa2VyLm5leHROb2RlKCkgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICBpZiAoIW5leHROb2RlICYmIHdyYXApIHtcbiAgICAgICAgd2Fsa2VyLmN1cnJlbnROb2RlID0gcm9vdDtcbiAgICAgICAgbmV4dE5vZGUgPSB3YWxrZXIubmV4dE5vZGUoKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgIH1cbiAgICAgIGlmIChuZXh0Tm9kZSkge1xuICAgICAgICBmb2N1c0VsZW1lbnQobmV4dE5vZGUsIHRydWUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5leHROb2RlO1xuICAgIH0sXG4gICAgZm9jdXNQcmV2aW91cyhvcHRzOiBGb2N1c01hbmFnZXJPcHRpb25zID0gZGVmYXVsdE9wdGlvbnMpIHtcbiAgICAgIGxldCByb290ID0gcmVmLmN1cnJlbnQ7XG4gICAgICBpZiAoIXJvb3QpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgbGV0IHtmcm9tLCB0YWJiYWJsZSA9IGRlZmF1bHRPcHRpb25zLnRhYmJhYmxlLCB3cmFwID0gZGVmYXVsdE9wdGlvbnMud3JhcCwgYWNjZXB0ID0gZGVmYXVsdE9wdGlvbnMuYWNjZXB0fSA9IG9wdHM7XG4gICAgICBsZXQgbm9kZSA9IGZyb20gfHwgZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcbiAgICAgIGxldCB3YWxrZXIgPSBnZXRGb2N1c2FibGVUcmVlV2Fsa2VyKHJvb3QsIHt0YWJiYWJsZSwgYWNjZXB0fSk7XG4gICAgICBpZiAocm9vdC5jb250YWlucyhub2RlKSkge1xuICAgICAgICB3YWxrZXIuY3VycmVudE5vZGUgPSBub2RlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IG5leHQgPSBsYXN0KHdhbGtlcik7XG4gICAgICAgIGlmIChuZXh0KSB7XG4gICAgICAgICAgZm9jdXNFbGVtZW50KG5leHQsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgfVxuICAgICAgbGV0IHByZXZpb3VzTm9kZSA9IHdhbGtlci5wcmV2aW91c05vZGUoKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgIGlmICghcHJldmlvdXNOb2RlICYmIHdyYXApIHtcbiAgICAgICAgd2Fsa2VyLmN1cnJlbnROb2RlID0gcm9vdDtcbiAgICAgICAgcHJldmlvdXNOb2RlID0gbGFzdCh3YWxrZXIpO1xuICAgICAgfVxuICAgICAgaWYgKHByZXZpb3VzTm9kZSkge1xuICAgICAgICBmb2N1c0VsZW1lbnQocHJldmlvdXNOb2RlLCB0cnVlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBwcmV2aW91c05vZGU7XG4gICAgfSxcbiAgICBmb2N1c0ZpcnN0KG9wdHMgPSBkZWZhdWx0T3B0aW9ucykge1xuICAgICAgbGV0IHJvb3QgPSByZWYuY3VycmVudDtcbiAgICAgIGlmICghcm9vdCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBsZXQge3RhYmJhYmxlID0gZGVmYXVsdE9wdGlvbnMudGFiYmFibGUsIGFjY2VwdCA9IGRlZmF1bHRPcHRpb25zLmFjY2VwdH0gPSBvcHRzO1xuICAgICAgbGV0IHdhbGtlciA9IGdldEZvY3VzYWJsZVRyZWVXYWxrZXIocm9vdCwge3RhYmJhYmxlLCBhY2NlcHR9KTtcbiAgICAgIGxldCBuZXh0Tm9kZSA9IHdhbGtlci5uZXh0Tm9kZSgpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgaWYgKG5leHROb2RlKSB7XG4gICAgICAgIGZvY3VzRWxlbWVudChuZXh0Tm9kZSwgdHJ1ZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbmV4dE5vZGU7XG4gICAgfSxcbiAgICBmb2N1c0xhc3Qob3B0cyA9IGRlZmF1bHRPcHRpb25zKSB7XG4gICAgICBsZXQgcm9vdCA9IHJlZi5jdXJyZW50O1xuICAgICAgaWYgKCFyb290KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGxldCB7dGFiYmFibGUgPSBkZWZhdWx0T3B0aW9ucy50YWJiYWJsZSwgYWNjZXB0ID0gZGVmYXVsdE9wdGlvbnMuYWNjZXB0fSA9IG9wdHM7XG4gICAgICBsZXQgd2Fsa2VyID0gZ2V0Rm9jdXNhYmxlVHJlZVdhbGtlcihyb290LCB7dGFiYmFibGUsIGFjY2VwdH0pO1xuICAgICAgbGV0IG5leHQgPSBsYXN0KHdhbGtlcik7XG4gICAgICBpZiAobmV4dCkge1xuICAgICAgICBmb2N1c0VsZW1lbnQobmV4dCwgdHJ1ZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbmV4dDtcbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIGxhc3Qod2Fsa2VyOiBUcmVlV2Fsa2VyKSB7XG4gIGxldCBuZXh0OiBIVE1MRWxlbWVudDtcbiAgbGV0IGxhc3Q6IEhUTUxFbGVtZW50O1xuICBkbyB7XG4gICAgbGFzdCA9IHdhbGtlci5sYXN0Q2hpbGQoKSBhcyBIVE1MRWxlbWVudDtcbiAgICBpZiAobGFzdCkge1xuICAgICAgbmV4dCA9IGxhc3Q7XG4gICAgfVxuICB9IHdoaWxlIChsYXN0KTtcbiAgcmV0dXJuIG5leHQ7XG59XG4iLCJpbXBvcnQge0hUTUxBdHRyaWJ1dGVzLCB1c2VDYWxsYmFjaywgdXNlU3RhdGV9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7aXNGb2N1c1Zpc2libGUsIHVzZUZvY3VzLCB1c2VGb2N1c1Zpc2libGVMaXN0ZW5lciwgdXNlRm9jdXNXaXRoaW59IGZyb20gJ0ByZWFjdC1hcmlhL2ludGVyYWN0aW9ucyc7XG5pbXBvcnQge3VzZVJlZn0gZnJvbSAncmVhY3QnO1xuXG5pbnRlcmZhY2UgRm9jdXNSaW5nUHJvcHMge1xuICAvKipcbiAgICogV2hldGhlciB0byBzaG93IHRoZSBmb2N1cyByaW5nIHdoZW4gc29tZXRoaW5nXG4gICAqIGluc2lkZSB0aGUgY29udGFpbmVyIGVsZW1lbnQgaGFzIGZvY3VzICh0cnVlKSwgb3JcbiAgICogb25seSBpZiB0aGUgY29udGFpbmVyIGl0c2VsZiBoYXMgZm9jdXMgKGZhbHNlKS5cbiAgICogQGRlZmF1bHQgJ2ZhbHNlJ1xuICAgKi9cbiAgd2l0aGluPzogYm9vbGVhbixcblxuICAvKiogV2hldGhlciB0aGUgZWxlbWVudCBpcyBhIHRleHQgaW5wdXQuICovXG4gIGlzVGV4dElucHV0PzogYm9vbGVhbixcblxuICAvKiogV2hldGhlciB0aGUgZWxlbWVudCB3aWxsIGJlIGF1dG8gZm9jdXNlZC4gKi9cbiAgYXV0b0ZvY3VzPzogYm9vbGVhblxufVxuXG5pbnRlcmZhY2UgRm9jdXNSaW5nQXJpYSB7XG4gIC8qKiBXaGV0aGVyIHRoZSBlbGVtZW50IGlzIGN1cnJlbnRseSBmb2N1c2VkLiAqL1xuICBpc0ZvY3VzZWQ6IGJvb2xlYW4sXG5cbiAgLyoqIFdoZXRoZXIga2V5Ym9hcmQgZm9jdXMgc2hvdWxkIGJlIHZpc2libGUuICovXG4gIGlzRm9jdXNWaXNpYmxlOiBib29sZWFuLFxuXG4gIC8qKiBQcm9wcyB0byBhcHBseSB0byB0aGUgY29udGFpbmVyIGVsZW1lbnQgd2l0aCB0aGUgZm9jdXMgcmluZy4gKi9cbiAgZm9jdXNQcm9wczogSFRNTEF0dHJpYnV0ZXM8SFRNTEVsZW1lbnQ+XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lcyB3aGV0aGVyIGEgZm9jdXMgcmluZyBzaG91bGQgYmUgc2hvd24gdG8gaW5kaWNhdGUga2V5Ym9hcmQgZm9jdXMuXG4gKiBGb2N1cyByaW5ncyBhcmUgdmlzaWJsZSBvbmx5IHdoZW4gdGhlIHVzZXIgaXMgaW50ZXJhY3Rpbmcgd2l0aCBhIGtleWJvYXJkLFxuICogbm90IHdpdGggYSBtb3VzZSwgdG91Y2gsIG9yIG90aGVyIGlucHV0IG1ldGhvZHMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VGb2N1c1JpbmcocHJvcHM6IEZvY3VzUmluZ1Byb3BzID0ge30pOiBGb2N1c1JpbmdBcmlhIHtcbiAgbGV0IHtcbiAgICBhdXRvRm9jdXMgPSBmYWxzZSxcbiAgICBpc1RleHRJbnB1dCxcbiAgICB3aXRoaW5cbiAgfSA9IHByb3BzO1xuICBsZXQgc3RhdGUgPSB1c2VSZWYoe1xuICAgIGlzRm9jdXNlZDogZmFsc2UsXG4gICAgaXNGb2N1c1Zpc2libGU6IGF1dG9Gb2N1cyB8fCBpc0ZvY3VzVmlzaWJsZSgpXG4gIH0pO1xuICBsZXQgW2lzRm9jdXNlZCwgc2V0Rm9jdXNlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGxldCBbaXNGb2N1c1Zpc2libGVTdGF0ZSwgc2V0Rm9jdXNWaXNpYmxlXSA9IHVzZVN0YXRlKCgpID0+IHN0YXRlLmN1cnJlbnQuaXNGb2N1c2VkICYmIHN0YXRlLmN1cnJlbnQuaXNGb2N1c1Zpc2libGUpO1xuXG4gIGxldCB1cGRhdGVTdGF0ZSA9IHVzZUNhbGxiYWNrKCgpID0+IHNldEZvY3VzVmlzaWJsZShzdGF0ZS5jdXJyZW50LmlzRm9jdXNlZCAmJiBzdGF0ZS5jdXJyZW50LmlzRm9jdXNWaXNpYmxlKSwgW10pO1xuXG4gIGxldCBvbkZvY3VzQ2hhbmdlID0gdXNlQ2FsbGJhY2soaXNGb2N1c2VkID0+IHtcbiAgICBzdGF0ZS5jdXJyZW50LmlzRm9jdXNlZCA9IGlzRm9jdXNlZDtcbiAgICBzZXRGb2N1c2VkKGlzRm9jdXNlZCk7XG4gICAgdXBkYXRlU3RhdGUoKTtcbiAgfSwgW3VwZGF0ZVN0YXRlXSk7XG5cbiAgdXNlRm9jdXNWaXNpYmxlTGlzdGVuZXIoKGlzRm9jdXNWaXNpYmxlKSA9PiB7XG4gICAgc3RhdGUuY3VycmVudC5pc0ZvY3VzVmlzaWJsZSA9IGlzRm9jdXNWaXNpYmxlO1xuICAgIHVwZGF0ZVN0YXRlKCk7XG4gIH0sIFtdLCB7aXNUZXh0SW5wdXR9KTtcblxuICBsZXQge2ZvY3VzUHJvcHN9ID0gdXNlRm9jdXMoe1xuICAgIGlzRGlzYWJsZWQ6IHdpdGhpbixcbiAgICBvbkZvY3VzQ2hhbmdlXG4gIH0pO1xuXG4gIGxldCB7Zm9jdXNXaXRoaW5Qcm9wc30gPSB1c2VGb2N1c1dpdGhpbih7XG4gICAgaXNEaXNhYmxlZDogIXdpdGhpbixcbiAgICBvbkZvY3VzV2l0aGluQ2hhbmdlOiBvbkZvY3VzQ2hhbmdlXG4gIH0pO1xuXG4gIHJldHVybiB7XG4gICAgaXNGb2N1c2VkLFxuICAgIGlzRm9jdXNWaXNpYmxlOiBzdGF0ZS5jdXJyZW50LmlzRm9jdXNlZCAmJiBpc0ZvY3VzVmlzaWJsZVN0YXRlLFxuICAgIGZvY3VzUHJvcHM6IHdpdGhpbiA/IGZvY3VzV2l0aGluUHJvcHMgOiBmb2N1c1Byb3BzXG4gIH07XG59XG4iLCIvKlxuICogQ29weXJpZ2h0IDIwMjAgQWRvYmUuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weVxuICogb2YgdGhlIExpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlclxuICogdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgUkVQUkVTRU5UQVRJT05TXG4gKiBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2VcbiAqIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IGNsc3ggZnJvbSAnY2xzeCc7XG5pbXBvcnQge21lcmdlUHJvcHN9IGZyb20gJ0ByZWFjdC1hcmlhL3V0aWxzJztcbmltcG9ydCBSZWFjdCwge1JlYWN0RWxlbWVudH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHt1c2VGb2N1c1Jpbmd9IGZyb20gJy4vdXNlRm9jdXNSaW5nJztcblxuaW50ZXJmYWNlIEZvY3VzUmluZ1Byb3BzIHtcbiAgLyoqIENoaWxkIGVsZW1lbnQgdG8gYXBwbHkgQ1NTIGNsYXNzZXMgdG8uICovXG4gIGNoaWxkcmVuOiBSZWFjdEVsZW1lbnQsXG4gIC8qKiBDU1MgY2xhc3MgdG8gYXBwbHkgd2hlbiB0aGUgZWxlbWVudCBpcyBmb2N1c2VkLiAqL1xuICBmb2N1c0NsYXNzPzogc3RyaW5nLFxuICAvKiogQ1NTIGNsYXNzIHRvIGFwcGx5IHdoZW4gdGhlIGVsZW1lbnQgaGFzIGtleWJvYXJkIGZvY3VzLiAqL1xuICBmb2N1c1JpbmdDbGFzcz86IHN0cmluZyxcbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gc2hvdyB0aGUgZm9jdXMgcmluZyB3aGVuIHNvbWV0aGluZ1xuICAgKiBpbnNpZGUgdGhlIGNvbnRhaW5lciBlbGVtZW50IGhhcyBmb2N1cyAodHJ1ZSksIG9yXG4gICAqIG9ubHkgaWYgdGhlIGNvbnRhaW5lciBpdHNlbGYgaGFzIGZvY3VzIChmYWxzZSkuXG4gICAqIEBkZWZhdWx0IGZhbHNlXG4gICAqL1xuICB3aXRoaW4/OiBib29sZWFuLFxuICAvKiogV2hldGhlciB0aGUgZWxlbWVudCBpcyBhIHRleHQgaW5wdXQuICovXG4gIGlzVGV4dElucHV0PzogYm9vbGVhbixcbiAgLyoqIFdoZXRoZXIgdGhlIGVsZW1lbnQgd2lsbCBiZSBhdXRvIGZvY3VzZWQuICovXG4gIGF1dG9Gb2N1cz86IGJvb2xlYW5cbn1cblxuLyoqXG4gKiBBIHV0aWxpdHkgY29tcG9uZW50IHRoYXQgYXBwbGllcyBhIENTUyBjbGFzcyB3aGVuIGFuIGVsZW1lbnQgaGFzIGtleWJvYXJkIGZvY3VzLlxuICogRm9jdXMgcmluZ3MgYXJlIHZpc2libGUgb25seSB3aGVuIHRoZSB1c2VyIGlzIGludGVyYWN0aW5nIHdpdGggYSBrZXlib2FyZCxcbiAqIG5vdCB3aXRoIGEgbW91c2UsIHRvdWNoLCBvciBvdGhlciBpbnB1dCBtZXRob2RzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gRm9jdXNSaW5nKHByb3BzOiBGb2N1c1JpbmdQcm9wcykge1xuICBsZXQge2NoaWxkcmVuLCBmb2N1c0NsYXNzLCBmb2N1c1JpbmdDbGFzc30gPSBwcm9wcztcbiAgbGV0IHtpc0ZvY3VzZWQsIGlzRm9jdXNWaXNpYmxlLCBmb2N1c1Byb3BzfSA9IHVzZUZvY3VzUmluZyhwcm9wcyk7XG4gIGxldCBjaGlsZCA9IFJlYWN0LkNoaWxkcmVuLm9ubHkoY2hpbGRyZW4pO1xuXG4gIHJldHVybiBSZWFjdC5jbG9uZUVsZW1lbnQoY2hpbGQsIG1lcmdlUHJvcHMoY2hpbGQucHJvcHMsIHtcbiAgICAuLi5mb2N1c1Byb3BzLFxuICAgIGNsYXNzTmFtZTogY2xzeCh7XG4gICAgICBbZm9jdXNDbGFzcyB8fCAnJ106IGlzRm9jdXNlZCxcbiAgICAgIFtmb2N1c1JpbmdDbGFzcyB8fCAnJ106IGlzRm9jdXNWaXNpYmxlXG4gICAgfSlcbiAgfSkpO1xufVxuIiwiLypcbiAqIENvcHlyaWdodCAyMDIwIEFkb2JlLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBmaWxlIGlzIGxpY2Vuc2VkIHRvIHlvdSB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHlcbiAqIG9mIHRoZSBMaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXJcbiAqIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIFJFUFJFU0VOVEFUSU9OU1xuICogT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlXG4gKiBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7Rm9jdXNhYmxlRE9NUHJvcHMsIEZvY3VzYWJsZVByb3BzfSBmcm9tICdAcmVhY3QtdHlwZXMvc2hhcmVkJztcbmltcG9ydCB7Zm9jdXNTYWZlbHl9IGZyb20gJy4vJztcbmltcG9ydCB7bWVyZ2VQcm9wcywgdXNlU3luY1JlZn0gZnJvbSAnQHJlYWN0LWFyaWEvdXRpbHMnO1xuaW1wb3J0IFJlYWN0LCB7SFRNTEF0dHJpYnV0ZXMsIE11dGFibGVSZWZPYmplY3QsIFJlYWN0Tm9kZSwgUmVmT2JqZWN0LCB1c2VDb250ZXh0LCB1c2VFZmZlY3QsIHVzZVJlZn0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHt1c2VGb2N1cywgdXNlS2V5Ym9hcmR9IGZyb20gJ0ByZWFjdC1hcmlhL2ludGVyYWN0aW9ucyc7XG5cbmludGVyZmFjZSBGb2N1c2FibGVPcHRpb25zIGV4dGVuZHMgRm9jdXNhYmxlUHJvcHMsIEZvY3VzYWJsZURPTVByb3BzIHtcbiAgLyoqIFdoZXRoZXIgZm9jdXMgc2hvdWxkIGJlIGRpc2FibGVkLiAqL1xuICBpc0Rpc2FibGVkPzogYm9vbGVhblxufVxuXG5pbnRlcmZhY2UgRm9jdXNhYmxlUHJvdmlkZXJQcm9wcyBleHRlbmRzIEhUTUxBdHRyaWJ1dGVzPEhUTUxFbGVtZW50PiB7XG4gIC8qKiBUaGUgY2hpbGQgZWxlbWVudCB0byBwcm92aWRlIERPTSBwcm9wcyB0by4gKi9cbiAgY2hpbGRyZW4/OiBSZWFjdE5vZGVcbn1cblxuaW50ZXJmYWNlIEZvY3VzYWJsZUNvbnRleHRWYWx1ZSBleHRlbmRzIEZvY3VzYWJsZVByb3ZpZGVyUHJvcHMge1xuICByZWY/OiBNdXRhYmxlUmVmT2JqZWN0PEhUTUxFbGVtZW50PlxufVxuXG5sZXQgRm9jdXNhYmxlQ29udGV4dCA9IFJlYWN0LmNyZWF0ZUNvbnRleHQ8Rm9jdXNhYmxlQ29udGV4dFZhbHVlPihudWxsKTtcblxuZnVuY3Rpb24gdXNlRm9jdXNhYmxlQ29udGV4dChyZWY6IFJlZk9iamVjdDxIVE1MRWxlbWVudD4pOiBGb2N1c2FibGVDb250ZXh0VmFsdWUge1xuICBsZXQgY29udGV4dCA9IHVzZUNvbnRleHQoRm9jdXNhYmxlQ29udGV4dCkgfHwge307XG4gIHVzZVN5bmNSZWYoY29udGV4dCwgcmVmKTtcblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgbGV0IHtyZWY6IF8sIC4uLm90aGVyUHJvcHN9ID0gY29udGV4dDtcbiAgcmV0dXJuIG90aGVyUHJvcHM7XG59XG5cbi8qKlxuICogUHJvdmlkZXMgRE9NIHByb3BzIHRvIHRoZSBuZWFyZXN0IGZvY3VzYWJsZSBjaGlsZC5cbiAqL1xuZnVuY3Rpb24gRm9jdXNhYmxlUHJvdmlkZXIocHJvcHM6IEZvY3VzYWJsZVByb3ZpZGVyUHJvcHMsIHJlZjogUmVmT2JqZWN0PEhUTUxFbGVtZW50Pikge1xuICBsZXQge2NoaWxkcmVuLCAuLi5vdGhlclByb3BzfSA9IHByb3BzO1xuICBsZXQgY29udGV4dCA9IHtcbiAgICAuLi5vdGhlclByb3BzLFxuICAgIHJlZlxuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPEZvY3VzYWJsZUNvbnRleHQuUHJvdmlkZXIgdmFsdWU9e2NvbnRleHR9PlxuICAgICAge2NoaWxkcmVufVxuICAgIDwvRm9jdXNhYmxlQ29udGV4dC5Qcm92aWRlcj5cbiAgKTtcbn1cblxubGV0IF9Gb2N1c2FibGVQcm92aWRlciA9IFJlYWN0LmZvcndhcmRSZWYoRm9jdXNhYmxlUHJvdmlkZXIpO1xuZXhwb3J0IHtfRm9jdXNhYmxlUHJvdmlkZXIgYXMgRm9jdXNhYmxlUHJvdmlkZXJ9O1xuXG5pbnRlcmZhY2UgRm9jdXNhYmxlQXJpYSB7XG4gIC8qKiBQcm9wcyBmb3IgdGhlIGZvY3VzYWJsZSBlbGVtZW50LiAqL1xuICBmb2N1c2FibGVQcm9wczogSFRNTEF0dHJpYnV0ZXM8SFRNTEVsZW1lbnQ+XG59XG5cbi8qKlxuICogVXNlZCB0byBtYWtlIGFuIGVsZW1lbnQgZm9jdXNhYmxlIGFuZCBjYXBhYmxlIG9mIGF1dG8gZm9jdXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VGb2N1c2FibGUocHJvcHM6IEZvY3VzYWJsZU9wdGlvbnMsIGRvbVJlZjogUmVmT2JqZWN0PEhUTUxFbGVtZW50Pik6IEZvY3VzYWJsZUFyaWEge1xuICBsZXQge2ZvY3VzUHJvcHN9ID0gdXNlRm9jdXMocHJvcHMpO1xuICBsZXQge2tleWJvYXJkUHJvcHN9ID0gdXNlS2V5Ym9hcmQocHJvcHMpO1xuICBsZXQgaW50ZXJhY3Rpb25zID0gbWVyZ2VQcm9wcyhmb2N1c1Byb3BzLCBrZXlib2FyZFByb3BzKTtcbiAgbGV0IGRvbVByb3BzID0gdXNlRm9jdXNhYmxlQ29udGV4dChkb21SZWYpO1xuICBsZXQgaW50ZXJhY3Rpb25Qcm9wcyA9IHByb3BzLmlzRGlzYWJsZWQgPyB7fSA6IGRvbVByb3BzO1xuICBsZXQgYXV0b0ZvY3VzUmVmID0gdXNlUmVmKHByb3BzLmF1dG9Gb2N1cyk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoYXV0b0ZvY3VzUmVmLmN1cnJlbnQgJiYgZG9tUmVmLmN1cnJlbnQpIHtcbiAgICAgIGZvY3VzU2FmZWx5KGRvbVJlZi5jdXJyZW50KTtcbiAgICB9XG4gICAgYXV0b0ZvY3VzUmVmLmN1cnJlbnQgPSBmYWxzZTtcbiAgfSwgW2RvbVJlZl0pO1xuXG4gIHJldHVybiB7XG4gICAgZm9jdXNhYmxlUHJvcHM6IG1lcmdlUHJvcHMoXG4gICAgICB7XG4gICAgICAgIC4uLmludGVyYWN0aW9ucyxcbiAgICAgICAgdGFiSW5kZXg6IHByb3BzLmV4Y2x1ZGVGcm9tVGFiT3JkZXIgJiYgIXByb3BzLmlzRGlzYWJsZWQgPyAtMSA6IHVuZGVmaW5lZFxuICAgICAgfSxcbiAgICAgIGludGVyYWN0aW9uUHJvcHNcbiAgICApXG4gIH07XG59XG4iLCIvKlxuICogQ29weXJpZ2h0IDIwMjAgQWRvYmUuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGZpbGUgaXMgbGljZW5zZWQgdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weVxuICogb2YgdGhlIExpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlclxuICogdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgUkVQUkVTRU5UQVRJT05TXG4gKiBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2VcbiAqIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtcbiAgQW5jaG9ySFRNTEF0dHJpYnV0ZXMsXG4gIEJ1dHRvbkhUTUxBdHRyaWJ1dGVzLFxuICBFbGVtZW50VHlwZSxcbiAgSFRNTEF0dHJpYnV0ZXMsXG4gIElucHV0SFRNTEF0dHJpYnV0ZXMsXG4gIFJlZk9iamVjdFxufSBmcm9tICdyZWFjdCc7XG5pbXBvcnQge0FyaWFCdXR0b25Qcm9wc30gZnJvbSAnQHJlYWN0LXR5cGVzL2J1dHRvbic7XG5pbXBvcnQge2ZpbHRlckRPTVByb3BzfSBmcm9tICdAcmVhY3QtYXJpYS91dGlscyc7XG5pbXBvcnQge21lcmdlUHJvcHN9IGZyb20gJ0ByZWFjdC1hcmlhL3V0aWxzJztcbmltcG9ydCB7dXNlRm9jdXNhYmxlfSBmcm9tICdAcmVhY3QtYXJpYS9mb2N1cyc7XG5pbXBvcnQge3VzZVByZXNzfSBmcm9tICdAcmVhY3QtYXJpYS9pbnRlcmFjdGlvbnMnO1xuXG5cbmV4cG9ydCBpbnRlcmZhY2UgQnV0dG9uQXJpYTxUPiB7XG4gIC8qKiBQcm9wcyBmb3IgdGhlIGJ1dHRvbiBlbGVtZW50LiAqL1xuICBidXR0b25Qcm9wczogVCxcbiAgLyoqIFdoZXRoZXIgdGhlIGJ1dHRvbiBpcyBjdXJyZW50bHkgcHJlc3NlZC4gKi9cbiAgaXNQcmVzc2VkOiBib29sZWFuXG59XG5cbi8vIE9yZGVyIHdpdGggb3ZlcnJpZGVzIGlzIGltcG9ydGFudDogJ2J1dHRvbicgc2hvdWxkIGJlIGRlZmF1bHRcbmV4cG9ydCBmdW5jdGlvbiB1c2VCdXR0b24ocHJvcHM6IEFyaWFCdXR0b25Qcm9wczwnYnV0dG9uJz4sIHJlZjogUmVmT2JqZWN0PEhUTUxCdXR0b25FbGVtZW50Pik6IEJ1dHRvbkFyaWE8QnV0dG9uSFRNTEF0dHJpYnV0ZXM8SFRNTEJ1dHRvbkVsZW1lbnQ+PjtcbmV4cG9ydCBmdW5jdGlvbiB1c2VCdXR0b24ocHJvcHM6IEFyaWFCdXR0b25Qcm9wczwnYSc+LCByZWY6IFJlZk9iamVjdDxIVE1MQW5jaG9yRWxlbWVudD4pOiBCdXR0b25BcmlhPEFuY2hvckhUTUxBdHRyaWJ1dGVzPEhUTUxBbmNob3JFbGVtZW50Pj47XG5leHBvcnQgZnVuY3Rpb24gdXNlQnV0dG9uKHByb3BzOiBBcmlhQnV0dG9uUHJvcHM8J2Rpdic+LCByZWY6IFJlZk9iamVjdDxIVE1MRGl2RWxlbWVudD4pOiBCdXR0b25BcmlhPEhUTUxBdHRyaWJ1dGVzPEhUTUxEaXZFbGVtZW50Pj47XG5leHBvcnQgZnVuY3Rpb24gdXNlQnV0dG9uKHByb3BzOiBBcmlhQnV0dG9uUHJvcHM8J2lucHV0Jz4sIHJlZjogUmVmT2JqZWN0PEhUTUxJbnB1dEVsZW1lbnQ+KTogQnV0dG9uQXJpYTxJbnB1dEhUTUxBdHRyaWJ1dGVzPEhUTUxJbnB1dEVsZW1lbnQ+PjtcbmV4cG9ydCBmdW5jdGlvbiB1c2VCdXR0b24ocHJvcHM6IEFyaWFCdXR0b25Qcm9wczwnc3Bhbic+LCByZWY6IFJlZk9iamVjdDxIVE1MU3BhbkVsZW1lbnQ+KTogQnV0dG9uQXJpYTxIVE1MQXR0cmlidXRlczxIVE1MU3BhbkVsZW1lbnQ+PjtcbmV4cG9ydCBmdW5jdGlvbiB1c2VCdXR0b24ocHJvcHM6IEFyaWFCdXR0b25Qcm9wczxFbGVtZW50VHlwZT4sIHJlZjogUmVmT2JqZWN0PEhUTUxFbGVtZW50Pik6IEJ1dHRvbkFyaWE8SFRNTEF0dHJpYnV0ZXM8SFRNTEVsZW1lbnQ+Pjtcbi8qKlxuICogUHJvdmlkZXMgdGhlIGJlaGF2aW9yIGFuZCBhY2Nlc3NpYmlsaXR5IGltcGxlbWVudGF0aW9uIGZvciBhIGJ1dHRvbiBjb21wb25lbnQuIEhhbmRsZXMgbW91c2UsIGtleWJvYXJkLCBhbmQgdG91Y2ggaW50ZXJhY3Rpb25zLFxuICogZm9jdXMgYmVoYXZpb3IsIGFuZCBBUklBIHByb3BzIGZvciBib3RoIG5hdGl2ZSBidXR0b24gZWxlbWVudHMgYW5kIGN1c3RvbSBlbGVtZW50IHR5cGVzLlxuICogQHBhcmFtIHByb3BzIC0gUHJvcHMgdG8gYmUgYXBwbGllZCB0byB0aGUgYnV0dG9uLlxuICogQHBhcmFtIHJlZiAtIEEgcmVmIHRvIGEgRE9NIGVsZW1lbnQgZm9yIHRoZSBidXR0b24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VCdXR0b24ocHJvcHM6IEFyaWFCdXR0b25Qcm9wczxFbGVtZW50VHlwZT4sIHJlZjogUmVmT2JqZWN0PGFueT4pOiBCdXR0b25BcmlhPEhUTUxBdHRyaWJ1dGVzPGFueT4+IHtcbiAgbGV0IHtcbiAgICBlbGVtZW50VHlwZSA9ICdidXR0b24nLFxuICAgIGlzRGlzYWJsZWQsXG4gICAgb25QcmVzcyxcbiAgICBvblByZXNzU3RhcnQsXG4gICAgb25QcmVzc0VuZCxcbiAgICBvblByZXNzQ2hhbmdlLFxuICAgIC8vIEB0cy1pZ25vcmUgLSB1bmRvY3VtZW50ZWRcbiAgICBwcmV2ZW50Rm9jdXNPblByZXNzLFxuICAgIC8vIEB0cy1pZ25vcmUgLSB1bmRvY3VtZW50ZWRcbiAgICBhbGxvd0ZvY3VzV2hlbkRpc2FibGVkLFxuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBvbkNsaWNrOiBkZXByZWNhdGVkT25DbGljayxcbiAgICBocmVmLFxuICAgIHRhcmdldCxcbiAgICByZWwsXG4gICAgdHlwZSA9ICdidXR0b24nXG4gIH0gPSBwcm9wcztcbiAgbGV0IGFkZGl0aW9uYWxQcm9wcztcbiAgaWYgKGVsZW1lbnRUeXBlID09PSAnYnV0dG9uJykge1xuICAgIGFkZGl0aW9uYWxQcm9wcyA9IHtcbiAgICAgIHR5cGUsXG4gICAgICBkaXNhYmxlZDogaXNEaXNhYmxlZFxuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgYWRkaXRpb25hbFByb3BzID0ge1xuICAgICAgcm9sZTogJ2J1dHRvbicsXG4gICAgICB0YWJJbmRleDogaXNEaXNhYmxlZCA/IHVuZGVmaW5lZCA6IDAsXG4gICAgICBocmVmOiBlbGVtZW50VHlwZSA9PT0gJ2EnICYmIGlzRGlzYWJsZWQgPyB1bmRlZmluZWQgOiBocmVmLFxuICAgICAgdGFyZ2V0OiBlbGVtZW50VHlwZSA9PT0gJ2EnID8gdGFyZ2V0IDogdW5kZWZpbmVkLFxuICAgICAgdHlwZTogZWxlbWVudFR5cGUgPT09ICdpbnB1dCcgPyB0eXBlIDogdW5kZWZpbmVkLFxuICAgICAgZGlzYWJsZWQ6IGVsZW1lbnRUeXBlID09PSAnaW5wdXQnID8gaXNEaXNhYmxlZCA6IHVuZGVmaW5lZCxcbiAgICAgICdhcmlhLWRpc2FibGVkJzogIWlzRGlzYWJsZWQgfHwgZWxlbWVudFR5cGUgPT09ICdpbnB1dCcgPyB1bmRlZmluZWQgOiBpc0Rpc2FibGVkLFxuICAgICAgcmVsOiBlbGVtZW50VHlwZSA9PT0gJ2EnID8gcmVsIDogdW5kZWZpbmVkXG4gICAgfTtcbiAgfVxuXG4gIGxldCB7cHJlc3NQcm9wcywgaXNQcmVzc2VkfSA9IHVzZVByZXNzKHtcbiAgICBvblByZXNzU3RhcnQsXG4gICAgb25QcmVzc0VuZCxcbiAgICBvblByZXNzQ2hhbmdlLFxuICAgIG9uUHJlc3MsXG4gICAgaXNEaXNhYmxlZCxcbiAgICBwcmV2ZW50Rm9jdXNPblByZXNzLFxuICAgIHJlZlxuICB9KTtcblxuICBsZXQge2ZvY3VzYWJsZVByb3BzfSA9IHVzZUZvY3VzYWJsZShwcm9wcywgcmVmKTtcbiAgaWYgKGFsbG93Rm9jdXNXaGVuRGlzYWJsZWQpIHtcbiAgICBmb2N1c2FibGVQcm9wcy50YWJJbmRleCA9IGlzRGlzYWJsZWQgPyAtMSA6IGZvY3VzYWJsZVByb3BzLnRhYkluZGV4O1xuICB9XG4gIGxldCBidXR0b25Qcm9wcyA9IG1lcmdlUHJvcHMoZm9jdXNhYmxlUHJvcHMsIHByZXNzUHJvcHMsIGZpbHRlckRPTVByb3BzKHByb3BzLCB7bGFiZWxhYmxlOiB0cnVlfSkpO1xuXG4gIHJldHVybiB7XG4gICAgaXNQcmVzc2VkLCAvLyBVc2VkIHRvIGluZGljYXRlIHByZXNzIHN0YXRlIGZvciB2aXN1YWxcbiAgICBidXR0b25Qcm9wczogbWVyZ2VQcm9wcyhhZGRpdGlvbmFsUHJvcHMsIGJ1dHRvblByb3BzLCB7XG4gICAgICAnYXJpYS1oYXNwb3B1cCc6IHByb3BzWydhcmlhLWhhc3BvcHVwJ10sXG4gICAgICAnYXJpYS1leHBhbmRlZCc6IHByb3BzWydhcmlhLWV4cGFuZGVkJ10sXG4gICAgICAnYXJpYS1jb250cm9scyc6IHByb3BzWydhcmlhLWNvbnRyb2xzJ10sXG4gICAgICAnYXJpYS1wcmVzc2VkJzogcHJvcHNbJ2FyaWEtcHJlc3NlZCddLFxuICAgICAgb25DbGljazogKGUpID0+IHtcbiAgICAgICAgaWYgKGRlcHJlY2F0ZWRPbkNsaWNrKSB7XG4gICAgICAgICAgZGVwcmVjYXRlZE9uQ2xpY2soZSk7XG4gICAgICAgICAgY29uc29sZS53YXJuKCdvbkNsaWNrIGlzIGRlcHJlY2F0ZWQsIHBsZWFzZSB1c2Ugb25QcmVzcycpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgfTtcbn1cbiIsIi8qXG4gKiBDb3B5cmlnaHQgMjAyMCBBZG9iZS4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgZmlsZSBpcyBsaWNlbnNlZCB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5XG4gKiBvZiB0aGUgTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyXG4gKiB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBSRVBSRVNFTlRBVElPTlNcbiAqIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZVxuICogZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge1xuICBBbmNob3JIVE1MQXR0cmlidXRlcyxcbiAgQnV0dG9uSFRNTEF0dHJpYnV0ZXMsXG4gIEVsZW1lbnRUeXBlLFxuICBIVE1MQXR0cmlidXRlcyxcbiAgSW5wdXRIVE1MQXR0cmlidXRlcyxcbiAgUmVmT2JqZWN0XG59IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7QXJpYVRvZ2dsZUJ1dHRvblByb3BzfSBmcm9tICdAcmVhY3QtdHlwZXMvYnV0dG9uJztcbmltcG9ydCB7QnV0dG9uQXJpYSwgdXNlQnV0dG9ufSBmcm9tICcuL3VzZUJ1dHRvbic7XG5pbXBvcnQge2NoYWlufSBmcm9tICdAcmVhY3QtYXJpYS91dGlscyc7XG5pbXBvcnQge21lcmdlUHJvcHN9IGZyb20gJ0ByZWFjdC1hcmlhL3V0aWxzJztcbmltcG9ydCB7VG9nZ2xlU3RhdGV9IGZyb20gJ0ByZWFjdC1zdGF0ZWx5L3RvZ2dsZSc7XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VUb2dnbGVCdXR0b24ocHJvcHM6IEFyaWFUb2dnbGVCdXR0b25Qcm9wczwnYSc+LCBzdGF0ZTogVG9nZ2xlU3RhdGUsIHJlZjogUmVmT2JqZWN0PEhUTUxBbmNob3JFbGVtZW50Pik6IEJ1dHRvbkFyaWE8QW5jaG9ySFRNTEF0dHJpYnV0ZXM8SFRNTEFuY2hvckVsZW1lbnQ+PjtcbmV4cG9ydCBmdW5jdGlvbiB1c2VUb2dnbGVCdXR0b24ocHJvcHM6IEFyaWFUb2dnbGVCdXR0b25Qcm9wczwnYnV0dG9uJz4sIHN0YXRlOiBUb2dnbGVTdGF0ZSwgcmVmOiBSZWZPYmplY3Q8SFRNTEJ1dHRvbkVsZW1lbnQ+KTogQnV0dG9uQXJpYTxCdXR0b25IVE1MQXR0cmlidXRlczxIVE1MQnV0dG9uRWxlbWVudD4+O1xuZXhwb3J0IGZ1bmN0aW9uIHVzZVRvZ2dsZUJ1dHRvbihwcm9wczogQXJpYVRvZ2dsZUJ1dHRvblByb3BzPCdkaXYnPiwgc3RhdGU6IFRvZ2dsZVN0YXRlLCByZWY6IFJlZk9iamVjdDxIVE1MRGl2RWxlbWVudD4pOiBCdXR0b25BcmlhPEhUTUxBdHRyaWJ1dGVzPEhUTUxEaXZFbGVtZW50Pj47XG5leHBvcnQgZnVuY3Rpb24gdXNlVG9nZ2xlQnV0dG9uKHByb3BzOiBBcmlhVG9nZ2xlQnV0dG9uUHJvcHM8J2lucHV0Jz4sIHN0YXRlOiBUb2dnbGVTdGF0ZSwgcmVmOiBSZWZPYmplY3Q8SFRNTElucHV0RWxlbWVudD4pOiBCdXR0b25BcmlhPElucHV0SFRNTEF0dHJpYnV0ZXM8SFRNTElucHV0RWxlbWVudD4+O1xuZXhwb3J0IGZ1bmN0aW9uIHVzZVRvZ2dsZUJ1dHRvbihwcm9wczogQXJpYVRvZ2dsZUJ1dHRvblByb3BzPCdzcGFuJz4sIHN0YXRlOiBUb2dnbGVTdGF0ZSwgcmVmOiBSZWZPYmplY3Q8SFRNTFNwYW5FbGVtZW50Pik6IEJ1dHRvbkFyaWE8SFRNTEF0dHJpYnV0ZXM8SFRNTFNwYW5FbGVtZW50Pj47XG5leHBvcnQgZnVuY3Rpb24gdXNlVG9nZ2xlQnV0dG9uKHByb3BzOiBBcmlhVG9nZ2xlQnV0dG9uUHJvcHM8RWxlbWVudFR5cGU+LCBzdGF0ZTogVG9nZ2xlU3RhdGUsIHJlZjogUmVmT2JqZWN0PEhUTUxFbGVtZW50Pik6IEJ1dHRvbkFyaWE8SFRNTEF0dHJpYnV0ZXM8SFRNTEVsZW1lbnQ+Pjtcbi8qKlxuICogUHJvdmlkZXMgdGhlIGJlaGF2aW9yIGFuZCBhY2Nlc3NpYmlsaXR5IGltcGxlbWVudGF0aW9uIGZvciBhIHRvZ2dsZSBidXR0b24gY29tcG9uZW50LlxuICogVG9nZ2xlQnV0dG9ucyBhbGxvdyB1c2VycyB0byB0b2dnbGUgYSBzZWxlY3Rpb24gb24gb3Igb2ZmLCBmb3IgZXhhbXBsZSBzd2l0Y2hpbmcgYmV0d2VlbiB0d28gc3RhdGVzIG9yIG1vZGVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlVG9nZ2xlQnV0dG9uKHByb3BzOiBBcmlhVG9nZ2xlQnV0dG9uUHJvcHM8RWxlbWVudFR5cGU+LCBzdGF0ZTogVG9nZ2xlU3RhdGUsIHJlZjogUmVmT2JqZWN0PGFueT4pOiBCdXR0b25BcmlhPEhUTUxBdHRyaWJ1dGVzPGFueT4+IHtcbiAgY29uc3Qge2lzU2VsZWN0ZWR9ID0gc3RhdGU7XG4gIGNvbnN0IHtpc1ByZXNzZWQsIGJ1dHRvblByb3BzfSA9IHVzZUJ1dHRvbih7XG4gICAgLi4ucHJvcHMsXG4gICAgb25QcmVzczogY2hhaW4oc3RhdGUudG9nZ2xlLCBwcm9wcy5vblByZXNzKVxuICB9LCByZWYpO1xuXG4gIHJldHVybiB7XG4gICAgaXNQcmVzc2VkLFxuICAgIGJ1dHRvblByb3BzOiBtZXJnZVByb3BzKGJ1dHRvblByb3BzLCB7XG4gICAgICAnYXJpYS1wcmVzc2VkJzogaXNTZWxlY3RlZFxuICAgIH0pXG4gIH07XG59XG4iLCJpbXBvcnQgY3ggZnJvbSAnY2xhc3NuYW1lcydcbmltcG9ydCB7IEJ1dHRvblByb3BzIH0gZnJvbSAnLi9idXR0b24udHlwZXMnXG5cbmludGVyZmFjZSBidG5DbGFzc1Byb3BzIHtcblx0dmFyaWFudDogQnV0dG9uUHJvcHNbJ3ZhcmlhbnQnXVxuXHR0eXBlOiBCdXR0b25Qcm9wc1sndHlwZSddXG5cdHNpemU6IEJ1dHRvblByb3BzWydzaXplJ11cblx0ZGlzYWJsZWQ6IEJ1dHRvblByb3BzWydkaXNhYmxlZCddXG5cdGxvYWRpbmc6IEJ1dHRvblByb3BzWydsb2FkaW5nJ11cblx0cm91bmRlZDogQnV0dG9uUHJvcHNbJ3JvdW5kZWQnXVxufVxuXG5leHBvcnQgY29uc3QgdXNlQnV0dG9uQ2xhc3MgPSAoe1xuXHR2YXJpYW50LFxuXHR0eXBlLFxuXHRzaXplLFxuXHRkaXNhYmxlZCxcblx0bG9hZGluZyxcblx0cm91bmRlZCxcbn06IGJ0bkNsYXNzUHJvcHMpID0+IHtcblx0Y29uc3QgdmFyaWFudHMgPSB7XG5cdFx0c29saWQ6ICdidG4tc29saWQnLFxuXHRcdGdob3N0OiAnYnRuLWdob3N0Jyxcblx0fVxuXG5cdGNvbnN0IHR5cGVzID0ge1xuXHRcdHN1Y2Nlc3M6ICdidG4tc3VjY2VzcycsXG5cdFx0c2Vjb25kYXJ5OiAnYnRuLXNlY29uZGFyeScsXG5cdFx0d2FybmluZzogJ2J0bi13YXJuaW5nJyxcblx0XHRlcnJvcjogJ2J0bi1lcnJvcicsXG5cdFx0YWxlcnQ6ICdidG4tYWxlcnQnLFxuXHR9XG5cblx0Y29uc3Qgc2l6ZXMgPSB7XG5cdFx0YmxvY2s6ICdidG4tYmxvY2snLFxuXHRcdHhzOiAnYnRuLXhzJyxcblx0XHRzbTogJ2J0bi1zbScsXG5cdFx0bWQ6ICdidG4tbWQnLFxuXHRcdGxnOiAnYnRuLWxnJyxcblx0fVxuXG5cdGNvbnN0IGNsYXNzZXMgPSBjeChbXG5cdFx0J2J0bicsXG5cdFx0dmFyaWFudCAmJiB2YXJpYW50c1t2YXJpYW50XSxcblx0XHR0eXBlICYmIHR5cGVzW3R5cGVdLFxuXHRcdHNpemUgJiYgc2l6ZXNbc2l6ZV0sXG5cdFx0ZGlzYWJsZWQgJiYgJ2J0bi1kaXNhYmxlZCcsXG5cdFx0bG9hZGluZyAmJiAnYnRuLWxvYWRpbmcnLFxuXHRcdHJvdW5kZWQgJiYgJ2J0bi1yb3VuZGVkJyxcblx0XSlcblxuXHRyZXR1cm4gY2xhc3Nlc1xufVxuIiwiaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSAnY2xhc3NuYW1lcydcbmltcG9ydCB7IEJ1dHRvbkdyb3VwUHJvcHMgfSBmcm9tICcuL2J1dHRvbi50eXBlcydcbmltcG9ydCBSZWFjdCwgeyBmb3J3YXJkUmVmIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBnZXRWYWxpZENoaWxkcmVuIH0gZnJvbSAnQHNrYXVpL3V0aWxzJ1xuXG5jb25zdCBCdXR0b25Hcm91cCA9IGZvcndhcmRSZWY8SFRNTERpdkVsZW1lbnQsIEJ1dHRvbkdyb3VwUHJvcHM+KFxuXHQocHJvcHMsIHJlZikgPT4ge1xuXHRcdGNvbnN0IHtcblx0XHRcdHNpemUsXG5cdFx0XHRjb2xvcixcblx0XHRcdHZhcmlhbnQsXG5cdFx0XHRhdHRhY2hlZCxcblx0XHRcdHJvdW5kZWQsXG5cdFx0XHRkaXNhYmxlZCxcblx0XHRcdGNoaWxkcmVuLFxuXHRcdFx0Y2xhc3NOYW1lLFxuXHRcdFx0Li4ucmVzdFxuXHRcdH0gPSBwcm9wc1xuXG5cdFx0Y29uc3QgdmFsaWRDaGlsZHJlbiA9IGdldFZhbGlkQ2hpbGRyZW4oY2hpbGRyZW4pXG5cdFx0Y29uc3QgY29waWVzID0gdmFsaWRDaGlsZHJlbi5tYXAoKGNoaWxkKSA9PiB7XG5cdFx0XHRyZXR1cm4gUmVhY3QuY2xvbmVFbGVtZW50KGNoaWxkLCB7XG5cdFx0XHRcdHNpemU6IHNpemUgfHwgY2hpbGQucHJvcHMuc2l6ZSxcblx0XHRcdFx0Y29sb3I6IGNoaWxkLnByb3BzLmNvbG9yIHx8IGNvbG9yLFxuXHRcdFx0XHR2YXJpYW50OiBjaGlsZC5wcm9wcy52YXJpYW50IHx8IHZhcmlhbnQsXG5cdFx0XHRcdGRpc2FibGVkOiBjaGlsZC5wcm9wcy5kaXNhYmxlZCB8fCBkaXNhYmxlZCxcblx0XHRcdFx0cm91bmRlZDogY2hpbGQucHJvcHMucm91bmRlZCB8fCByb3VuZGVkLFxuXHRcdFx0XHRmb2N1c2FmdGVyY2xpY2s6IHRydWUsXG5cdFx0XHR9KVxuXHRcdH0pXG5cblx0XHRyZXR1cm4gKFxuXHRcdFx0PGRpdlxuXHRcdFx0XHRyZWY9e3JlZn1cblx0XHRcdFx0cm9sZT0nZ3JvdXAnXG5cdFx0XHRcdGNsYXNzTmFtZT17Y2xhc3NOYW1lcyhcblx0XHRcdFx0XHQnYnRuLWdyb3VwJyxcblx0XHRcdFx0XHRhdHRhY2hlZCAmJiAnYnRuLWdyb3VwLWF0dGFjaGVkJyxcblx0XHRcdFx0XHRyb3VuZGVkICYmICdidG4tZ3JvdXAtcm91bmRlZCcsXG5cdFx0XHRcdFx0Y2xhc3NOYW1lXG5cdFx0XHRcdCl9XG5cdFx0XHRcdHsuLi5yZXN0fT5cblx0XHRcdFx0e2NvcGllc31cblx0XHRcdDwvZGl2PlxuXHRcdClcblx0fVxuKVxuQnV0dG9uR3JvdXAuZGlzcGxheU5hbWUgPSAnQnV0dG9uR3JvdXAnXG5cbmV4cG9ydCBkZWZhdWx0IEJ1dHRvbkdyb3VwXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRWYWxpZENoaWxkcmVuKGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGUpIHtcblx0cmV0dXJuIFJlYWN0LkNoaWxkcmVuLnRvQXJyYXkoY2hpbGRyZW4pLmZpbHRlcigoY2hpbGQpID0+XG5cdFx0UmVhY3QuaXNWYWxpZEVsZW1lbnQoY2hpbGQpXG5cdCkgYXMgUmVhY3QuUmVhY3RFbGVtZW50W11cbn1cblxuZXhwb3J0IGRlZmF1bHQgZ2V0VmFsaWRDaGlsZHJlblxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0J1xuaW1wb3J0IEludGVybmFsQnV0dG9uIGZyb20gJy4vYnV0dG9uJ1xuaW1wb3J0IHsgQnV0dG9uUHJvcHMgfSBmcm9tICcuL2J1dHRvbi50eXBlcydcbmltcG9ydCBCdXR0b25Hcm91cCBmcm9tICcuL2J1dHRvbkdyb3VwJ1xuXG5pbnRlcmZhY2UgQnV0dG9uIGV4dGVuZHMgUmVhY3QuRm9yd2FyZFJlZkV4b3RpY0NvbXBvbmVudDxCdXR0b25Qcm9wcz4ge1xuXHRHcm91cDogdHlwZW9mIEJ1dHRvbkdyb3VwXG59XG5cbmNvbnN0IEJ1dHRvbiA9IEludGVybmFsQnV0dG9uIGFzIEJ1dHRvblxuXG5CdXR0b24uR3JvdXAgPSBCdXR0b25Hcm91cFxuXG5leHBvcnQgeyBCdXR0b24sIEJ1dHRvbkdyb3VwIH1cbiJdfQ==